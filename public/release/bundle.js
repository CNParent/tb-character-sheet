var app=function(){"use strict";"undefined"!=typeof window&&((window.__svelte??={}).v??=new Set).add("5");let e=!1,t=!1;e=!0;const n=1,l=2,r=4,a=8,i=16,s=1,o=2,c=4,d=8,u=16,v=Symbol(),f=Symbol("filename"),b="http://www.w3.org/1999/xhtml",m=globalThis.process?.env?.NODE_ENV;var p=m&&!m.toLowerCase().startsWith("prod"),h=Array.isArray,g=Array.prototype.indexOf,k=Array.from,y=Object.defineProperty,w=Object.getOwnPropertyDescriptor,$=Object.getOwnPropertyDescriptors,x=Object.prototype,_=Array.prototype,S=Object.getPrototypeOf;const E=()=>{};function D(e){return e()}function z(e){for(var t=0;t<e.length;t++)e[t]()}const A=2,O=4,C=8,T=16,W=32,U=64,P=128,N=256,I=512,L=1024,H=2048,j=4096,M=8192,F=16384,R=32768,V=65536,K=1<<17,B=1<<18,q=1<<19,J=1<<20,G=1<<21,Z=Symbol("$state"),Q=Symbol("legacy props"),Y=Symbol("");function X(){if(p){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}let ee=!1,te=null;function ne(e){let t=Error();const n=t.stack;if(n){const l=n.split("\n"),r=["\n"];for(let e=0;e<l.length;e++){const t=l[e];if("Error"!==t){if(t.includes("validate_each_keys"))return null;t.includes("svelte/src/internal")||r.push(t)}}if(1===r.length)return null;y(t,"stack",{value:r.join("\n")}),y(t,"name",{value:`${e}Error`})}return t}function le(e){if("object"!=typeof e||null===e||Z in e)return e;const n=S(e);if(n!==x&&n!==_)return e;var l=new Map,r=h(e),a=Lt(0),i=p&&t?ne("CreatedAt"):null,s=Xe,o=e=>{var t=Xe;tt(s);var n=e();return tt(t),n};return r&&l.set("length",Lt(e.length,i)),new Proxy(e,{defineProperty(e,t,n){"value"in n&&!1!==n.configurable&&!1!==n.enumerable&&!1!==n.writable||function(){if(p){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var r=l.get(t);return void 0===r?(r=o((()=>Lt(n.value,i))),l.set(t,r)):jt(r,o((()=>le(n.value)))),!0},deleteProperty(e,t){var n=l.get(t);if(void 0===n)t in e&&(l.set(t,o((()=>Lt(v,i)))),re(a));else{if(r&&"string"==typeof t){var s=l.get("length"),c=Number(t);Number.isInteger(c)&&c<s.v&&jt(s,c)}jt(n,v),re(a)}return!0},get(t,n,r){if(n===Z)return e;var a=l.get(n),s=n in t;if(void 0!==a||s&&!w(t,n)?.writable||(a=o((()=>Lt(le(s?t[n]:v),i))),l.set(n,a)),void 0!==a){var c=Dt(a);return c===v?void 0:c}return Reflect.get(t,n,r)},getOwnPropertyDescriptor(e,t){var n=Reflect.getOwnPropertyDescriptor(e,t);if(n&&"value"in n){var r=l.get(t);r&&(n.value=Dt(r))}else if(void 0===n){var a=l.get(t),i=a?.v;if(void 0!==a&&i!==v)return{enumerable:!0,configurable:!0,value:i,writable:!0}}return n},has(e,t){if(t===Z)return!0;var n=l.get(t),r=void 0!==n&&n.v!==v||Reflect.has(e,t);if((void 0!==n||null!==nt&&(!r||w(e,t)?.writable))&&(void 0===n&&(n=o((()=>Lt(r?le(e[t]):v,i))),l.set(t,n)),Dt(n)===v))return!1;return r},set(e,t,n,s){var c=l.get(t),d=t in e;if(r&&"length"===t)for(var u=n;u<c.v;u+=1){var f=l.get(u+"");void 0!==f?jt(f,v):u in e&&(f=o((()=>Lt(v,i))),l.set(u+"",f))}void 0===c?d&&!w(e,t)?.writable||(jt(c=o((()=>Lt(void 0,i))),o((()=>le(n)))),l.set(t,c)):(d=c.v!==v,jt(c,o((()=>le(n)))));var b=Reflect.getOwnPropertyDescriptor(e,t);if(b?.set&&b.set.call(s,n),!d){if(r&&"string"==typeof t){var m=l.get("length"),p=Number(t);Number.isInteger(p)&&p>=m.v&&jt(m,p+1)}re(a)}return!0},ownKeys(e){Dt(a);var t=Reflect.ownKeys(e).filter((e=>{var t=l.get(e);return void 0===t||t.v!==v}));for(var[n,r]of l)r.v===v||n in e||t.push(n);return t},setPrototypeOf(){!function(){if(p){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/state_prototype_fixed")}()}})}function re(e,t=1){jt(e,e.v+t)}var ae,ie;function se(e=""){return document.createTextNode(e)}function oe(e){return ae.call(e)}function ce(e){return ie.call(e)}function de(e,t){return oe(e)}function ue(e,t){var n=oe(e);return n instanceof Comment&&""===n.data?ce(n):n}function ve(e,t=1,n=!1){let l=e;for(;t--;)l=ce(l);return l}function fe(e){return e===this.v}function be(e){return t=e,n=this.v,!(t!=t?n==n:t!==n||null!==t&&"object"==typeof t||"function"==typeof t);var t,n}function me(e){var n=A|H,l=null!==Xe&&Xe.f&A?Xe:null;null===nt||null!==l&&l.f&N?n|=N:nt.f|=J;const r={ctx:Rt,deps:null,effects:null,equals:fe,f:n,fn:e,reactions:null,rv:0,v:null,wv:0,parent:l??nt};return p&&t&&(r.created=ne("CreatedAt")),r}function pe(e){const t=me(e);return t.equals=be,t}function he(e){var t=e.effects;if(null!==t){e.effects=null;for(var n=0;n<t.length;n+=1)Ue(t[n])}}let ge=[];function ke(e){var t,n=nt;if(lt(function(e){for(var t=e.parent;null!==t;){if(!(t.f&A))return t;t=t.parent}return null}(e)),p){let l=Ut;Nt(new Set);try{ge.includes(e)&&function(){if(p){const e=new Error("derived_references_self\nA derived value cannot reference itself recursively\nhttps://svelte.dev/e/derived_references_self");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/derived_references_self")}(),ge.push(e),he(e),t=ht(e)}finally{lt(n),Nt(l),ge.pop()}}else try{he(e),t=ht(e)}finally{lt(n)}return t}function ye(e){var t=ke(e);Ct(e,(dt||e.f&N)&&null!==e.deps?j:L),e.equals(t)||(e.v=t,e.wv=vt())}function we(e){null===nt&&null===Xe&&function(e){if(p){const t=new Error(`effect_orphan\n\`${e}\` can only be used inside an effect (e.g. during component initialisation)\nhttps://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/effect_orphan")}(e),null!==Xe&&Xe.f&N&&null===nt&&function(){if(p){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}(),Ge&&function(e){if(p){const t=new Error(`effect_in_teardown\n\`${e}\` cannot be used inside an effect cleanup function\nhttps://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/effect_in_teardown")}(e)}function $e(e,t,n,l=!0){var r=nt;if(p)for(;null!==r&&r.f&B;)r=r.parent;var a={ctx:Rt,deps:null,nodes_start:null,nodes_end:null,f:e|H,first:null,fn:t,last:null,next:null,parent:r,prev:null,teardown:null,transitions:null,wv:0};if(p&&(a.component_function=Kt),n)try{yt(a),a.f|=R}catch(e){throw Ue(a),e}else null!==t&&St(a);if(!(n&&null===a.deps&&null===a.first&&null===a.nodes_start&&null===a.teardown&&!(a.f&(J|P)))&&l&&(null!==r&&function(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}(a,r),null!==Xe&&Xe.f&A)){var i=Xe;(i.effects??=[]).push(a)}return a}function xe(e){const t=$e(C,null,!1);return Ct(t,L),t.teardown=e,t}function _e(e){we("$effect");var t=null!==nt&&!!(nt.f&W)&&null!==Rt&&!Rt.m;if(p&&y(e,"name",{value:"$effect"}),!t)return Se(e);var n=Rt;(n.e??=[]).push({fn:e,effect:nt,reaction:Xe})}function Se(e){return $e(O,e,!1)}function Ee(e,t){var n=Rt,l={effect:null,ran:!1};n.l.r1.push(l),l.effect=ze((()=>{e(),l.ran||(l.ran=!0,jt(n.l.r2,!0),At(t))}))}function De(){var e=Rt;ze((()=>{if(Dt(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&L&&Ct(n,j),ft(n)&&yt(n),t.ran=!1}e.l.r2.v=!1}}))}function ze(e){return $e(C,e,!0)}function Ae(e,t=[],n=me){const l=t.map(n),r=()=>e(...l.map(Dt));return p&&y(r,"name",{value:"{expression}"}),Oe(r)}function Oe(e,t=0){return $e(C|T|t,e,!0)}function Ce(e,t=!0){return $e(C|W,e,!0,t)}function Te(e){var t=e.teardown;if(null!==t){const e=Ge,n=Xe;Ze(!0),tt(null);try{t.call(null)}finally{Ze(e),tt(n)}}}function We(e,t=!1){var n=e.first;for(e.first=e.last=null;null!==n;){var l=n.next;n.f&U?n.parent=null:Ue(n,t),n=l}}function Ue(e,t=!0){var n=!1;(t||e.f&q)&&null!==e.nodes_start&&(!function(e,t){for(;null!==e;){var n=e===t?null:ce(e);e.remove(),e=n}}(e.nodes_start,e.nodes_end),n=!0),We(e,t&&!n),kt(e,0),Ct(e,F);var l=e.transitions;if(null!==l)for(const e of l)e.stop();Te(e);var r=e.parent;null!==r&&null!==r.first&&Pe(e),p&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Pe(e){var t=e.parent,n=e.prev,l=e.next;null!==n&&(n.next=l),null!==l&&(l.prev=n),null!==t&&(t.first===e&&(t.first=l),t.last===e&&(t.last=n))}function Ne(e,t){var n=[];Le(e,n,!0),Ie(n,(()=>{Ue(e),t&&t()}))}function Ie(e,t){var n=e.length;if(n>0){var l=()=>--n||t();for(var r of e)r.out(l)}else t()}function Le(e,t,n){if(!(e.f&M)){if(e.f^=M,null!==e.transitions)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var l=e.first;null!==l;){var r=l.next;Le(l,t,!!(!!(l.f&V)||!!(l.f&W))&&n),l=r}}}function He(e){je(e,!0)}function je(e,t){if(e.f&M){e.f^=M,e.f&L||(e.f^=L),ft(e)&&(Ct(e,H),St(e));for(var n=e.first;null!==n;){var l=n.next;je(n,!!(!!(n.f&V)||!!(n.f&W))&&t),n=l}if(null!==e.transitions)for(const n of e.transitions)(n.is_global||t)&&n.in()}}let Me=[];function Fe(){var e=Me;Me=[],z(e)}function Re(e){0===Me.length&&queueMicrotask(Fe),Me.push(e)}const Ve=new WeakSet;let Ke=!1,Be=!1,qe=null,Je=!1,Ge=!1;function Ze(e){Ge=e}let Qe=[],Ye=[],Xe=null,et=!1;function tt(e){Xe=e}let nt=null;function lt(e){nt=e}let rt=null;let at=null,it=0,st=null;let ot=1,ct=0,dt=!1,ut=null;function vt(){return++ot}function ft(e){var t=e.f;if(t&H)return!0;if(t&j){var n=e.deps,l=!!(t&N);if(null!==n){var r,a,i=!!(t&I),s=l&&null!==nt&&!dt,o=n.length;if(i||s){var c=e,d=c.parent;for(r=0;r<o;r++)a=n[r],!i&&a?.reactions?.includes(c)||(a.reactions??=[]).push(c);i&&(c.f^=I),!s||null===d||d.f&N||(c.f^=N)}for(r=0;r<o;r++)if(ft(a=n[r])&&ye(a),a.wv>e.wv)return!0}l&&(null===nt||dt)||Ct(e,L)}return!1}function bt(e){return!(e.f&F||null!==e.parent&&e.parent.f&P)}function mt(e,t,n,l){if(Ke){if(null===n&&(Ke=!1),bt(t))throw e}else{if(null!==n&&(Ke=!0),p&&null!==l&&e instanceof Error&&!Ve.has(e)){Ve.add(e);const n=[],a=t.fn?.name;a&&n.push(a);let i=l;for(;null!==i;){var r=i.function?.[f];if(r){const e=r.split("/").pop();n.push(e)}i=i.p}const s="\t";y(e,"message",{value:e.message+`\n${n.map((e=>`\n${s}in ${e}`)).join("")}\n`}),y(e,"component_stack",{value:n});const o=e.stack;if(o){const t=o.split("\n"),n=[];for(let e=0;e<t.length;e++){const l=t[e];l.includes("svelte/src/internal")||n.push(l)}y(e,"stack",{value:n.join("\n")})}}if(function(e,t){for(var n=t;null!==n;){if(n.f&P)try{return void n.fn(e)}catch{n.f^=P}n=n.parent}throw Ke=!1,e}(e,t),bt(t))throw e}}function pt(e,t,n=!0){var l=e.reactions;if(null!==l)for(var r=0;r<l.length;r++){var a=l[r];rt?.includes(e)||(a.f&A?pt(a,t,!1):t===a&&(n?Ct(a,H):a.f&L&&Ct(a,j),St(a)))}}function ht(e){var t=at,n=it,l=st,r=Xe,a=dt,i=rt,s=Rt,o=et,c=e.f;at=null,it=0,st=null,dt=!!(c&N)&&(et||!Je||null===Xe),Xe=c&(W|U)?null:e,rt=null,Vt(e.ctx),et=!1,ct++,e.f|=G;try{var d=(0,e.fn)(),u=e.deps;if(null!==at){var v;if(kt(e,it),null!==u&&it>0)for(u.length=it+at.length,v=0;v<at.length;v++)u[it+v]=at[v];else e.deps=u=at;if(!dt)for(v=it;v<u.length;v++)(u[v].reactions??=[]).push(e)}else null!==u&&it<u.length&&(kt(e,it),u.length=it);if(Gt()&&null!==st&&!et&&null!==u&&!(e.f&(A|j|H)))for(v=0;v<st.length;v++)pt(st[v],e);return null!==r&&r!==e&&(ct++,null!==st&&(null===l?l=st:l.push(...st))),d}finally{at=t,it=n,st=l,Xe=r,dt=a,rt=i,Vt(s),et=o,e.f^=G}}function gt(e,t){let n=t.reactions;if(null!==n){var l=g.call(n,e);if(-1!==l){var r=n.length-1;0===r?n=t.reactions=null:(n[l]=n[r],n.pop())}}null===n&&t.f&A&&(null===at||!at.includes(t))&&(Ct(t,j),t.f&(N|I)||(t.f^=I),he(t),kt(t,0))}function kt(e,t){var n=e.deps;if(null!==n)for(var l=t;l<n.length;l++)gt(e,n[l])}function yt(e){var n=e.f;if(!(n&F)){Ct(e,L);var l=nt,r=Rt,a=Je;if(nt=e,Je=!0,p){var i=Kt;Bt(e.component_function)}try{n&T?function(e){for(var t=e.first;null!==t;){var n=t.next;t.f&W||Ue(t),t=n}}(e):We(e),Te(e);var s=ht(e);e.teardown="function"==typeof s?s:null,e.wv=ot;var o=e.deps;if(p&&t&&e.f&H&&null!==o)for(let e=0;e<o.length;e++){var c=o[e];c.trace_need_increase&&(c.wv=vt(),c.trace_need_increase=void 0,c.trace_v=void 0)}p&&Ye.push(e)}catch(t){mt(t,e,l,r||e.ctx)}finally{Je=a,nt=l,p&&Bt(i)}}}function wt(){console.error("Last ten effects were: ",Ye.slice(-10).map((e=>e.fn))),Ye=[]}function $t(){try{!function(){if(p){const e=new Error("effect_update_depth_exceeded\nMaximum update depth exceeded. This can happen when a reactive block or effect repeatedly sets a new value. Svelte limits the number of nested updates to prevent infinite loops\nhttps://svelte.dev/e/effect_update_depth_exceeded");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}()}catch(e){if(p&&y(e,"stack",{value:""}),null===qe)throw p&&wt(),e;if(p)try{mt(e,qe,null,null)}catch(e){throw wt(),e}else mt(e,qe,null,null)}}function xt(){var e=Je;try{var t=0;for(Je=!0;Qe.length>0;){t++>1e3&&$t();var n=Qe,l=n.length;Qe=[];for(var r=0;r<l;r++){_t(Et(n[r]))}Pt.clear()}}finally{Be=!1,Je=e,qe=null,p&&(Ye=[])}}function _t(e){var t=e.length;if(0!==t)for(var n=0;n<t;n++){var l=e[n];if(!(l.f&(F|M)))try{ft(l)&&(yt(l),null===l.deps&&null===l.first&&null===l.nodes_start&&(null===l.teardown?Pe(l):l.fn=null))}catch(e){mt(e,l,null,l.ctx)}}}function St(e){Be||(Be=!0,queueMicrotask(xt));for(var t=qe=e;null!==t.parent;){var n=(t=t.parent).f;if(n&(U|W)){if(!(n&L))return;t.f^=L}}Qe.push(t)}function Et(e){for(var t=[],n=e;null!==n;){var l=n.f,r=!!(l&(W|U));if(!(r&&!!(l&L)||l&M)){if(l&O)t.push(n);else if(r)n.f^=L;else try{ft(n)&&yt(n)}catch(e){mt(e,n,null,n.ctx)}var a=n.first;if(null!==a){n=a;continue}}var i=n.parent;for(n=n.next;null===n&&null!==i;)n=i.next,i=i.parent}return t}function Dt(e){var n=!!(e.f&A);if(null!==ut&&ut.add(e),null===Xe||et){if(n&&null===e.deps&&null===e.effects){var l=e,r=l.parent;null===r||r.f&N||(l.f^=N)}}else if(!rt?.includes(e)){var a=Xe.deps;e.rv<ct&&(e.rv=ct,null===at&&null!==a&&a[it]===e?it++:null===at?at=[e]:dt&&at.includes(e)||at.push(e))}if(n&&ft(l=e)&&ye(l),p&&t&&null!==te&&null!==Xe&&te.reaction===Xe)if(e.debug)e.debug();else if(e.created){var i=te.entries.get(e);void 0===i&&(i={read:[]},te.entries.set(e,i)),i.read.push(ne("TracedAt"))}return Ge&&Pt.has(e)?Pt.get(e):e.v}function zt(e){var t=function(e){var t=ut;ut=new Set;var n,l=ut;try{if(At(e),null!==t)for(n of ut)t.add(n)}finally{ut=t}return l}((()=>At(e)));for(var n of t)if(n.f&K)for(const e of n.deps||[])e.f&A||Mt(e,e.v);else Mt(n,n.v)}function At(e){var t=et;try{return et=!0,e()}finally{et=t}}const Ot=~(H|j|L);function Ct(e,t){e.f=e.f&Ot|t}function Tt(e){if("object"==typeof e&&e&&!(e instanceof EventTarget))if(Z in e)Wt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];"object"==typeof n&&n&&Z in n&&Wt(n)}}function Wt(e,t=new Set){if(!("object"!=typeof e||null===e||e instanceof EventTarget||t.has(e))){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Wt(e[n],t)}catch(e){}const n=S(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const t=$(n);for(let n in t){const l=t[n].get;if(l)try{l.call(e)}catch(e){}}}}}let Ut=new Set;const Pt=new Map;function Nt(e){Ut=e}function It(e,n){var l={f:0,v:e,reactions:null,equals:fe,rv:0,wv:0};return p&&t&&(l.created=n??ne("CreatedAt"),l.debug=null),l}function Lt(e,t){const n=It(e,t);var l;return l=n,null!==Xe&&Xe.f&G&&(null===rt?rt=[l]:rt.push(l)),n}function Ht(t,n=!1){const l=It(t);return n||(l.equals=be),e&&null!==Rt&&null!==Rt.l&&(Rt.l.s??=[]).push(l),l}function jt(e,t,n=!1){return null!==Xe&&!et&&Gt()&&Xe.f&(A|T)&&!rt?.includes(e)&&function(){if(p){const e=new Error("state_unsafe_mutation\nUpdating state inside a derived or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/state_unsafe_mutation")}(),Mt(e,n?le(t):t)}function Mt(e,n){if(!e.equals(n)){var l=e.v;if(Ge?Pt.set(e,n):Pt.set(e,l),e.v=n,p&&t&&(e.updated=ne("UpdatedAt"),null!=nt&&(e.trace_need_increase=!0,e.trace_v??=l)),e.f&A&&(e.f&H&&ke(e),Ct(e,e.f&N?j:L)),e.wv=vt(),Ft(e,H),Gt()&&null!==nt&&nt.f&L&&!(nt.f&(W|U))&&(null===st?function(e){st=e}([e]):st.push(e)),p&&Ut.size>0){const e=Array.from(Ut);for(const t of e)t.f&L&&Ct(t,j),ft(t)&&yt(t);Ut.clear()}}return n}function Ft(e,t){var n=e.reactions;if(null!==n)for(var l=Gt(),r=n.length,a=0;a<r;a++){var i=n[a],s=i.f;s&H||(l||i!==nt)&&(p&&s&B?Ut.add(i):(Ct(i,t),s&(L|N)&&(s&A?Ft(i,j):St(i))))}}let Rt=null;function Vt(e){Rt=e}let Kt=null;function Bt(e){Kt=e}function qt(t,n=!1,l){var r=Rt={p:Rt,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};e&&!n&&(Rt.l={s:null,u:null,r1:[],r2:It(!1)}),xe((()=>{r.d=!0})),p&&(Rt.function=l,Kt=l)}function Jt(e){const t=Rt;if(null!==t){void 0!==e&&(t.x=e);const i=t.e;if(null!==i){var n=nt,l=Xe;t.e=null;try{for(var r=0;r<i.length;r++){var a=i[r];lt(a.effect),tt(a.reaction),Se(a.fn)}}finally{lt(n),tt(l)}}Rt=t.p,p&&(Kt=t.p?.function??null),t.m=!0}return e||{}}function Gt(){return!e||null!==Rt&&null===Rt.l}let Zt=!1;function Qt(e){var t=Xe,n=nt;tt(null),lt(null);try{return e()}finally{tt(t),lt(n)}}function Yt(e,t,n,l=n){e.addEventListener(t,(()=>Qt(n)));const r=e.__on_r;e.__on_r=r?()=>{r(),l(!0)}:()=>l(!0),Zt||(Zt=!0,document.addEventListener("reset",(e=>{Promise.resolve().then((()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()}))}),{capture:!0}))}function Xt(e,t,n,l={}){function r(e){if(l.capture||tn.call(t,e),!e.cancelBubble)return Qt((()=>n?.call(this,e)))}return e.startsWith("pointer")||e.startsWith("touch")||"wheel"===e?Re((()=>{t.addEventListener(e,r,l)})):t.addEventListener(e,r,l),r}function en(e,t,n,l,r){var a={capture:l,passive:r},i=Xt(e,t,n,a);t!==document.body&&t!==window&&t!==document||xe((()=>{t.removeEventListener(e,i,a)}))}function tn(e){var t=this,n=t.ownerDocument,l=e.type,r=e.composedPath?.()||[],a=r[0]||e.target,i=0,s=e.__root;if(s){var o=r.indexOf(s);if(-1!==o&&(t===document||t===window))return void(e.__root=t);var c=r.indexOf(t);if(-1===c)return;o<=c&&(i=o)}if((a=r[i]||e.target)!==t){y(e,"currentTarget",{configurable:!0,get:()=>a||n});var d=Xe,u=nt;tt(null),lt(null);try{for(var v,f=[];null!==a;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var m=a["__"+l];if(null!=m&&(!a.disabled||e.target===a))if(h(m)){var[p,...g]=m;p.apply(a,[e,...g])}else m.call(a,e)}catch(e){v?f.push(e):v=e}if(e.cancelBubble||b===t||null===b)break;a=b}if(v){for(let e of f)queueMicrotask((()=>{throw e}));throw v}}finally{e.__root=t,delete e.currentTarget,tt(d),lt(u)}}}function nn(e,t){var n=nt;null===n.nodes_start&&(n.nodes_start=e,n.nodes_end=t)}function ln(e,t){var n,l=!!(1&t),r=!!(2&t),a=!e.startsWith("<!>");return()=>{var t,i;void 0===n&&(t=a?e:"<!>"+e,(i=document.createElement("template")).innerHTML=t,n=i.content,l||(n=oe(n)));var s=r?document.importNode(n,!0):n.cloneNode(!0);l?nn(oe(s),s.lastChild):nn(s,s);return s}}function rn(e=""){var t=se(e+"");return nn(t,t),t}function an(){var e=document.createDocumentFragment(),t=document.createComment(""),n=se();return e.append(t,n),nn(t,n),e}function sn(e,t){null!==e&&e.before(t)}function on(e,t){var n=null==t?"":"object"==typeof t?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function cn(e,t,[n,l]=[0,0]){var r=e,a=null,i=null,s=v,o=!1;const c=(e,t=!0)=>{o=!0,d(t,e)},d=(e,t)=>{s!==(s=e)&&(s?(a?He(a):t&&(a=Ce((()=>t(r)))),i&&Ne(i,(()=>{i=null}))):(i?He(i):t&&(i=Ce((()=>t(r,[n+1,l])))),a&&Ne(a,(()=>{a=null}))))};Oe((()=>{o=!1,t(c),o||d(null,null)}),n>0?V:0)}function dn(e,t){return t}function un(e,t,i,s,o,c=null){var d=e,u={flags:t,items:new Map,first:null};!(t&r)||(d=e.appendChild(se()));var v=null,f=!1,b=pe((()=>{var e=i();return h(e)?e:null==e?[]:k(e)}));Oe((()=>{var e=Dt(b),m=e.length;f&&0===m||(f=0===m,function(e,t,i,s,o,c,d){var u,v,f,b,m,p,h=!!(o&a),g=!!(o&(n|l)),y=e.length,w=t.items,$=t.first,x=$,_=null,S=[],E=[];if(h)for(p=0;p<y;p+=1)b=c(f=e[p],p),void 0!==(m=w.get(b))&&(m.a?.measure(),(v??=new Set).add(m));for(p=0;p<y;p+=1)if(b=c(f=e[p],p),void 0!==(m=w.get(b))){if(g&&vn(m,f,p,o),m.e.f&M&&(He(m.e),h&&(m.a?.unfix(),(v??=new Set).delete(m))),m!==x){if(void 0!==u&&u.has(m)){if(S.length<E.length){var D,z=E[0];_=z.prev;var A=S[0],O=S[S.length-1];for(D=0;D<S.length;D+=1)bn(S[D],z,i);for(D=0;D<E.length;D+=1)u.delete(E[D]);mn(t,A.prev,O.next),mn(t,_,A),mn(t,O,z),x=z,_=O,p-=1,S=[],E=[]}else u.delete(m),bn(m,x,i),mn(t,m.prev,m.next),mn(t,m,null===_?t.first:_.next),mn(t,_,m),_=m;continue}for(S=[],E=[];null!==x&&x.k!==b;)x.e.f&M||(u??=new Set).add(x),E.push(x),x=x.next;if(null===x)continue;m=x}S.push(m),_=m,x=m.next}else{_=fn(x?x.e.nodes_start:i,t,_,null===_?t.first:_.next,f,b,p,s,o,d),w.set(b,_),S=[],E=[],x=_.next}if(null!==x||void 0!==u){for(var C=void 0===u?[]:k(u);null!==x;)x.e.f&M||C.push(x),x=x.next;var T=C.length;if(T>0){var W=o&r&&0===y?i:null;if(h){for(p=0;p<T;p+=1)C[p].a?.measure();for(p=0;p<T;p+=1)C[p].a?.fix()}!function(e,t,n,l){for(var r=[],a=t.length,i=0;i<a;i++)Le(t[i].e,r,!0);var s=a>0&&0===r.length&&null!==n;if(s){var o=n.parentNode;o.textContent="",o.append(n),l.clear(),mn(e,t[0].prev,t[a-1].next)}Ie(r,(()=>{for(var n=0;n<a;n++){var r=t[n];s||(l.delete(r.k),mn(e,r.prev,r.next)),Ue(r.e,!s)}}))}(t,C,W,w)}}h&&Re((()=>{if(void 0!==v)for(m of v)m.a?.apply()}));nt.first=t.first&&t.first.e,nt.last=_&&_.e}(e,u,d,o,t,s,i),null!==c&&(0===m?v?He(v):v=Ce((()=>c(d))):null!==v&&Ne(v,(()=>{v=null}))),Dt(b))}))}function vn(e,t,r,a){a&n&&Mt(e.v,t),a&l?Mt(e.i,r):e.i=r}function fn(e,t,r,a,s,o,c,d,u,v){var f=!!(u&n),b=f?!(u&i)?Ht(s):It(s):s,m=u&l?It(c):c;p&&f&&(b.debug=()=>{var e="number"==typeof m?c:m.v;v()[e]});var h={i:m,v:b,k:o,a:null,e:null,prev:r,next:a};try{return h.e=Ce((()=>d(e,b,m,v)),ee),h.e.prev=r&&r.e,h.e.next=a&&a.e,null===r?t.first=h:(r.next=h,r.e.next=h.e),null!==a&&(a.prev=h,a.e.prev=h.e),h}finally{}}function bn(e,t,n){for(var l=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==l;){var i=ce(a);r.before(a),a=i}}function mn(e,t,n){null===t?e.first=n:(t.next=n,t.e.next=n&&n.e),null!==n&&(n.prev=t,n.e.prev=t&&t.e)}function pn(e,t,n,l,r){var a=t.$$slots?.[n],i=!1;!0===a&&(a=t["default"===n?"children":n],i=!0),void 0===a?null!==r&&r(e):a(e,i?()=>l:l)}const hn=[..." \t\n\r\f \v\ufeff"];function gn(e,t=!1){var n=t?" !important;":";",l="";for(var r in e){var a=e[r];null!=a&&""!==a&&(l+=" "+r+": "+a+n)}return l}function kn(e){return"-"!==e[0]||"-"!==e[1]?e.toLowerCase():e}function yn(e,t,n,l,r,a){var i=e.__className;if(i!==n||void 0===i){var s=function(e,t,n){var l=null==e?"":""+e;if(t&&(l=l?l+" "+t:t),n)for(var r in n)if(n[r])l=l?l+" "+r:r;else if(l.length)for(var a=r.length,i=0;(i=l.indexOf(r,i))>=0;){var s=i+a;0!==i&&!hn.includes(l[i-1])||s!==l.length&&!hn.includes(l[s])?i=s:l=(0===i?"":l.substring(0,i))+l.substring(s+1)}return""===l?null:l}(n,l,a);null==s?e.removeAttribute("class"):t?e.className=s:e.setAttribute("class",s),e.__className=n}else if(a&&r!==a)for(var o in a){var c=!!a[o];null!=r&&c===!!r[o]||e.classList.toggle(o,c)}return a}function wn(e,t={},n,l){for(var r in n){var a=n[r];t[r]!==a&&(null==n[r]?e.style.removeProperty(r):e.style.setProperty(r,a,l))}}function $n(e,t,n,l){if(e.__style!==t){var r=function(e,t){if(t){var n,l,r="";if(Array.isArray(t)?(n=t[0],l=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,i=0,s=!1,o=[];n&&o.push(...Object.keys(n).map(kn)),l&&o.push(...Object.keys(l).map(kn));var c=0,d=-1;const t=e.length;for(var u=0;u<t;u++){var v=e[u];if(s?"/"===v&&"*"===e[u-1]&&(s=!1):a?a===v&&(a=!1):"/"===v&&"*"===e[u+1]?s=!0:'"'===v||"'"===v?a=v:"("===v?i++:")"===v&&i--,!s&&!1===a&&0===i)if(":"===v&&-1===d)d=u;else if(";"===v||u===t-1){if(-1!==d){var f=kn(e.substring(c,d).trim());o.includes(f)||(";"!==v&&u++,r+=" "+e.substring(c,u).trim()+";")}c=u+1,d=-1}}}return n&&(r+=gn(n)),l&&(r+=gn(l,!0)),""===(r=r.trim())?null:r}return null==e?null:String(e)}(t,l);null==r?e.removeAttribute("style"):e.style.cssText=r,e.__style=t}else l&&(Array.isArray(l)?(wn(e,n?.[0],l[0]),wn(e,n?.[1],l[1],"important")):wn(e,n,l));return l}const xn=Symbol("is custom element"),_n=Symbol("is html");function Sn(e,t,n,l){var r=function(e){return e.__attributes??={[xn]:e.nodeName.includes("-"),[_n]:e.namespaceURI===b}}(e);r[t]!==(r[t]=n)&&("loading"===t&&(e[Y]=n),null==n?e.removeAttribute(t):"string"!=typeof n&&function(e){var t,n=En.get(e.nodeName);if(n)return n;En.set(e.nodeName,n=[]);var l=e,r=Element.prototype;for(;r!==l;){for(var a in t=$(l))t[a].set&&n.push(a);l=S(l)}return n}(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var En=new Map;function Dn(e,t,n=t){var l=Gt();Yt(e,"input",(r=>{p&&"checkbox"===e.type&&X();var a=r?e.defaultValue:e.value;if(a=zn(e)?An(a):a,n(a),l&&a!==(a=t())){var i=e.selectionStart,s=e.selectionEnd;e.value=a??"",null!==s&&(e.selectionStart=i,e.selectionEnd=Math.min(s,e.value.length))}})),null==At(t)&&e.value&&n(zn(e)?An(e.value):e.value),ze((()=>{p&&"checkbox"===e.type&&X();var n=t();zn(e)&&n===An(e.value)||("date"!==e.type||n||e.value)&&n!==e.value&&(e.value=n??"")}))}function zn(e){var t=e.type;return"number"===t||"range"===t}function An(e){return""===e?null:+e}function On(e,t){return e===t||e?.[Z]===t}function Cn(e={},t,n,l){return Se((()=>{var r,a;return ze((()=>{r=a,a=l?.()||[],At((()=>{e!==n(...a)&&(t(e,...a),r&&On(n(...r),e)&&t(null,...r))}))})),()=>{Re((()=>{a&&On(n(...a),e)&&t(null,...a)}))}})),e}function Tn(e=!1){const t=Rt,n=t.l.u;if(!n)return;let l=()=>Tt(t.s);if(e){let e=0,n={};const r=me((()=>{let l=!1;const r=t.s;for(const e in r)r[e]!==n[e]&&(n[e]=r[e],l=!0);return l&&e++,e}));l=()=>Dt(r)}var r;n.b.length&&(r=()=>{Wn(t,l),z(n.b)},we("$effect.pre"),p&&y(r,"name",{value:"$effect.pre"}),ze(r)),_e((()=>{const e=At((()=>n.m.map(D)));return()=>{for(const t of e)"function"==typeof t&&t()}})),n.a.length&&_e((()=>{Wn(t,l),z(n.a)}))}function Wn(e,t){if(e.l.s)for(const t of e.l.s)Dt(t);t()}if(p){function ma(e){if(!(e in globalThis)){let t;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(void 0!==t)return t;!function(e){if(p){const t=new Error(`rune_outside_svelte\nThe \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files\nhttps://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/rune_outside_svelte")}(e)},set:e=>{t=e}})}}ma("$state"),ma("$effect"),ma("$derived"),ma("$inspect"),ma("$props"),ma("$bindable")}let Un=!1;function Pn(e){return e.ctx?.d??!1}function Nn(t,n,l,r){var a,i=!!(l&s),v=!e||!!(l&o),f=!!(l&d),b=!!(l&u),m=!1;f?[a,m]=function(e){var t=Un;try{return Un=!1,[e(),Un]}finally{Un=t}}((()=>t[n])):a=t[n];var h,g=Z in t||Q in t,k=f&&(w(t,n)?.set??(g&&n in t&&(e=>t[n]=e)))||void 0,y=r,$=!0,x=!1,_=()=>(x=!0,$&&($=!1,y=b?At(r):r),y);if(void 0===a&&void 0!==r&&(k&&v&&function(e){if(p){const t=new Error(`props_invalid_value\nCannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value\nhttps://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/props_invalid_value")}(n),a=_(),k&&k(a)),v)h=()=>{var e=t[n];return void 0===e?_():($=!0,x=!1,e)};else{var S=(i?me:pe)((()=>t[n]));S.f|=K,h=()=>{var e=Dt(S);return void 0!==e&&(y=void 0),void 0===e?y:e}}if(!(l&c))return h;if(k){var E=t.$$legacy;return function(e,t){return arguments.length>0?(v&&t&&!E&&!m||k(t?h():e),e):h()}}var D=!1,z=!1,A=Ht(a),O=me((()=>{var e=h(),t=Dt(A);return D?(D=!1,z=!0,t):(z=!1,A.v=e)}));return f&&Dt(O),i||(O.equals=be),function(e,t){if(null!==ut&&(D=z,h(),Dt(A)),arguments.length>0){const n=t?Dt(O):v&&f?le(e):e;if(!O.equals(n)){if(D=!0,jt(A,n),x&&void 0!==y&&(y=n),Pn(O))return e;At((()=>Dt(O)))}return e}return Pn(O)?O.v:Dt(O)}}const In=({name:e,cap:t})=>({name:e,cap:t,rating:0,pass:0,fail:0}),Ln=()=>({health:In({name:"Health",cap:7}),will:In({name:"Will",cap:7}),nature:{current:3,maximum:3,pass:0,fail:0,descriptors:[]},resources:In({name:"Resources",cap:10}),circles:In({name:"Circles",cap:10}),lifestyle:0,might:3,precedence:0}),Hn=({name:e,size:t,format:n})=>({id:crypto.randomUUID(),name:e,size:t,format:n,items:[]}),jn=({name:e="",bluck:t="Health",readonly:n=!0,special:l=!1})=>({id:crypto.randomUUID(),name:e,bluck:t,readonly:n,special:l,cap:7,rating:0,pass:0,fail:0}),Mn=()=>({navbar:{tab:"bio"},abilities:Ln(),advancement:{currentFate:0,currentPersona:0,spentFate:0,spentPersona:0,levelBenefits:[]},bio:{name:"",parents:"",mentor:"",age:"",home:"",level:"",raiment:"",stock:"",classValue:"",belief:"",creed:"",goal:"",instinct:"",epithet:""},circles:{friends:[],enemies:[]},conditions:{shown:!0,fresh:!1,hungry:!1,angry:!1,afraid:!1,exhausted:!1,injured:!1,sick:!1,dead:!1},inventory:[Hn({name:"Head",size:1,format:"static"}),Hn({name:"Neck",size:1,format:"static"}),Hn({name:"Hands (worn)",size:2,format:"static"}),Hn({name:"Hands (carried)",size:2,format:"static"}),Hn({name:"Feet",size:1,format:"static"}),Hn({name:"Torso",size:3,format:"static"}),Hn({name:"Belt",size:3,format:"static"}),Hn({name:"Pockets",size:1,format:"pockets"}),Hn({name:"Backpack",size:6,format:"pack"}),Hn({name:"Ground",size:1,format:"pockets"}),Hn({name:"Stash",size:12,format:"stash"})],mod:"torchbearer",notes:[],skills:{show:"all",lockSpecialty:!1,skills:[jn({name:"Alchemist",bluck:"Will"}),jn({name:"Arcanist",bluck:"Will"}),jn({name:"Armorer",bluck:"Health"}),jn({name:"Cartographer",bluck:"Will",special:!0}),jn({name:"Commander",bluck:"Will"}),jn({name:"Cook",bluck:"Will",special:!0}),jn({name:"Criminal",bluck:"Health",special:!0}),jn({name:"Dungeoneer",bluck:"Health",special:!0}),jn({name:"Fighter",bluck:"Health"}),jn({name:"Haggler",bluck:"Will",special:!0}),jn({name:"Healer",bluck:"Will",special:!0}),jn({name:"Hunter",bluck:"Health",special:!0}),jn({name:"Lore Master",bluck:"Will"}),jn({name:"Manipulator",bluck:"Will",special:!0}),jn({name:"Mentor",bluck:"Will"}),jn({name:"Orator",bluck:"Will",special:!0}),jn({name:"Pathfinder",bluck:"Health",special:!0}),jn({name:"Persuader",bluck:"Will",special:!0}),jn({name:"Rider",bluck:"Health",special:!0}),jn({name:"Ritualist",bluck:"Will"}),jn({name:"Sapper",bluck:"Health",special:!0}),jn({name:"Scavenger",bluck:"Health",special:!0}),jn({name:"Scholar",bluck:"Will"}),jn({name:"Scout",bluck:"Will",special:!0}),jn({name:"Survivalist",bluck:"Health",special:!0}),jn({name:"Theologian",bluck:"Will"})]},spells:{burden:0,urdr:0,memory:0,spells:[]},traits:[],wises:[]});var Fn=ln("<button></button>"),Rn=ln('<div class="d-flex w-100"><small class="align-self-center" style="width: 3em;"><!></small> <div></div></div>');function Vn(e,t){qt(t,!1);const n=Ht();let l=Nn(t,"count",8,6),r=Nn(t,"value",12,0);Ee((()=>Tt(l())),(()=>{jt(n,[...new Array(l())])})),De(),Tn();var a=Rn(),i=de(a);pn(de(i),t,"default",{},null),un(ve(i,2),5,(()=>Dt(n)),dn,((e,t,n)=>{var l=Fn();let a;Ae((e=>a=yn(l,1,"bubble btn border border-dark",null,a,e)),[()=>({"btn-dark":r()>n,"btn-light":r()<=n})],pe),en("click",l,(()=>function(e){r(r()==e+1?e:e+1)}(n))),sn(e,l)})),sn(e,a),Jt()}var Kn=ln('<div class="card text-nowrap"><div class="card-body"><div class="d-flex"><h2 class="mr-auto"> </h2> <h2><button class="badge btn btn-dark"> </button></h2></div> <!> <!></div></div>');function Bn(e,t){qt(t,!1);const n=Ht(),l=Ht();let r=Nn(t,"ability",12);Ee((()=>Tt(r())),(()=>{jt(n,r().rating<2?0:r().rating-1)})),Ee((()=>Tt(r())),(()=>{jt(l,r().rating<1?1:r().rating)})),De(),Tn();var a=Kn(),i=de(a),s=de(i),o=de(s),c=de(o),d=de(ve(o,2)),u=de(d),v=ve(s,2),f=e=>{Vn(e,{get count(){return Dt(l)},get value(){return r().pass},set value(e){r(r().pass=e,!0)},children:(e,t)=>{sn(e,rn("Pass"))},$$slots:{default:!0},$$legacy:!0})};cn(v,(e=>{r().rating<r().cap&&e(f)}));var b=ve(v,2),m=e=>{Vn(e,{get count(){return Dt(n)},get value(){return r().fail},set value(e){r(r().fail=e,!0)},children:(e,t)=>{sn(e,rn("Fail"))},$$slots:{default:!0},$$legacy:!0})};cn(b,(e=>{Dt(n)>0&&r().rating<r().cap&&e(m)})),Ae((()=>{on(c,r().name),on(u,r().rating)})),en("click",d,(function(e){r(r().rating+=e.shiftKey?-1:1,!0),r().rating<0&&r(r().rating=r().cap,!0),r().rating>r().cap&&r(r().rating=0,!0)})),sn(e,a),Jt()}var qn=null;var Jn=ln('<span class="btn badge badge-light border border-dark p-2 my-1 mr-1"> </span>'),Gn=ln('<button class="btn badge badge-dark p-2 my-1 mr-1"> </button>'),Zn=ln('<button class="btn badge badge-light border border-dark p-2 ml-0 mt-1 mb-1">add</button>'),Qn=ln('<input class="form-control">'),Yn=ln('<div><div class="d-flex flex-wrap"><!> <!></div> <!></div>');function Xn(e,t){qt(t,!1);let n=Nn(t,"items",28,(()=>[])),l=Ht(!1),r=Ht(-1),a=Ht();function i(){n().push(""),jt(r,n().length-1),jt(l,!0),n(n())}function s(){n()[Dt(r)]||n().splice(Dt(r),1),jt(l,!1),jt(r,-1),n(n())}Tn();var o=Yn(),c=de(o),d=de(c);un(d,1,n,dn,((e,t,n)=>{var a=an(),i=ue(a),s=e=>{var n=Jn(),l=de(n);Ae((()=>on(l,Dt(t)))),sn(e,n)},o=e=>{var a=Gn(),i=de(a);Ae((()=>on(i,Dt(t)))),en("click",a,(()=>{jt(l,!0),jt(r,n)})),sn(e,a)};cn(i,(e=>{n==Dt(r)?e(s):e(o,!1)})),sn(e,a)}));var u=ve(d,2),v=e=>{var t=Zn();en("click",t,i),sn(e,t)};cn(u,(e=>{Dt(l)||e(v)}));var f=ve(c,2),b=e=>{var t=Qn();Cn(t,(e=>jt(a,e)),(()=>Dt(a))),Dn(t,(()=>n()[Dt(r)]),(e=>n(n()[Dt(r)]=e,!0))),en("blur",t,s),sn(e,t)};cn(f,(e=>{Dt(l)&&e(b)})),sn(e,o),Jt()}var el=ln('<div class="d-flex"><!></div>'),tl=ln('<div class="d-flex"><!></div>'),nl=ln('<div class="card text-nowrap"><div class="card-body"><div class="d-flex"><h2 class="mr-auto">Nature</h2> <h2><button class="btn badge btn-dark"> </button></h2> <h2><span class="m-1">/</span></h2> <h2><button class="btn badge btn-dark"> </button></h2></div> <!> <!> <div class="mt-2"><!></div></div></div>');function ll(e,t){qt(t,!1);const n=Ht(),l=Ht();let r=Nn(t,"nature",12);Ee((()=>Tt(r())),(()=>{jt(n,r().maximum<2?0:r().maximum-1)})),Ee((()=>Tt(r())),(()=>{jt(l,r().maximum<1?1:r().maximum)})),De(),Tn();var a=nl(),i=de(a),s=de(i),o=ve(de(s),2),c=de(o),d=de(c),u=de(ve(o,4)),v=de(u),f=ve(s,2),b=e=>{var t=el();Vn(de(t),{get count(){return Dt(l)},get value(){return r().pass},set value(e){r(r().pass=e,!0)},children:(e,t)=>{sn(e,rn("pass"))},$$slots:{default:!0},$$legacy:!0}),sn(e,t)};cn(f,(e=>{r().maximum<7&&e(b)}));var m=ve(f,2),p=e=>{var t=tl();Vn(de(t),{get count(){return Dt(n)},get value(){return r().fail},set value(e){r(r().fail=e,!0)},children:(e,t)=>{sn(e,rn("fail"))},$$slots:{default:!0},$$legacy:!0}),sn(e,t)};cn(m,(e=>{Dt(n)>0&&r().maximum<7&&e(p)})),Xn(de(ve(m,2)),{get items(){return r().descriptors},set items(e){r(r().descriptors=e,!0)},$$legacy:!0}),Ae((()=>{Sn(a,"id",`$${this.id??""}`),on(d,r().current),on(v,r().maximum)})),en("click",c,(function(e){r(r().current+=e.shiftKey?-1:1,!0),r().current>r().maximum?r(r().current=0,!0):r().current<0&&r(r().current=r().maximum,!0)})),en("click",u,(function(e){r(r().maximum+=e.shiftKey?-1:1,!0),r().maximum>7?r(r().maximum=0,!0):r().maximum<0&&r(r().maximum=7,!0),r().current>r().maximum&&r(r().current=r().maximum,!0)})),sn(e,a),Jt()}var rl=ln('<div class="container-fluid"><div class="row"><div class="col-md-6"><!> <!> <!></div> <div class="col-md-6"><!> <!> <div class="card"><div class="card-body d-flex"><h2>Lifestyle</h2> <h5 class="ml-2"><button class="btn badge btn-light border align-self-center">reset</button></h5> <h2 class="ml-auto"><button class="btn badge btn-dark"> </button></h2></div></div> <div class="card"><div class="card-body d-flex"><h2 class="mr-auto">Might</h2> <h2><button class="btn badge btn-dark"> </button></h2></div></div> <div class="card"><div class="card-body d-flex"><h2 class="mr-auto">Precedence</h2> <h2><button class="btn badge btn-dark"> </button></h2></div></div></div></div></div>');var al=ln('<div class="col-md-6"><div class="card"><div class="card-body"><h2 class="card-subtitle mb-1"> </h2> <div class="d-flex"><div class="btn-group align-self-center mr-1"><button class="btn btn-dark"> </button> <button class="btn btn-light border border-dark">&darr;</button></div> <div class="btn-group align-self-center"><button class="btn btn-dark"> </button> <button class="btn btn-light border border-dark">&larr;</button></div></div></div></div></div>'),il=ln('<div class="card-body"><h2 class="mr-auto">Level Benefits</h2> <!> <button class="position-topright btn badge btn-light border border-dark">?</button></div>'),sl=ln("<tr><td> </td><td> </td><td> </td></tr>"),ol=ln('<div class="card-header"><h5 id="levelRequirementsTitle">Level Requirements</h5> <button type="button" class="position-topright close" aria-label="Close"><span aria-hidden="true">&cross;</span></button></div> <div class="card-body"><table class="table"><thead><tr><th>Level</th><th>Fate</th><th>Persona</th></tr></thead><tbody></tbody></table></div>',1),cl=ln('<div class="container-fluid text-nowrap"><div class="row"><!> <div class="col-12"><div class="card"><!></div></div></div></div>');function dl(e,t){qt(t,!1);let n=Nn(t,"model",12),l=Ht(!1);const r=[{level:1,fate:0,persona:0},{level:2,fate:3,persona:3},{level:3,fate:7,persona:6},{level:4,fate:14,persona:12},{level:5,fate:22,persona:20},{level:6,fate:31,persona:30},{level:7,fate:41,persona:42},{level:8,fate:52,persona:56},{level:9,fate:64,persona:72},{level:10,fate:78,persona:98}];function a(e,t){n(n().advancement[e]+=t,!0),n().advancement[e]<0&&n(n().advancement[e]=0,!0)}Tn();var i=cl(),s=de(i),o=de(s);un(o,0,(()=>["Fate","Persona"]),dn,((e,t)=>{var l=al(),r=de(l),i=de(r),s=de(i),o=de(s),c=de(ve(s,2)),d=de(c),u=de(d),v=ve(d,2),f=de(ve(c,2)),b=de(f),m=ve(f,2);Ae((()=>{on(o,t),on(u,n().advancement[`current${t}`]),on(b,`${n().advancement[`spent${t}`]??""} spent`)})),en("click",d,(()=>a(`current${t}`,1))),en("click",v,(()=>a(`current${t}`,-1))),en("click",f,(()=>function(e){0!=n().advancement[`current${e}`]&&(n(n().advancement[`current${e}`]--,!0),n(n().advancement[`spent${e}`]++,!0))}(t))),en("click",m,(()=>function(e){0!=n().advancement[`spent${e}`]&&(n(n().advancement[`current${e}`]++,!0),n(n().advancement[`spent${e}`]--,!0))}(t))),sn(e,l)}));var c=de(ve(o,2)),d=de(c),u=e=>{var t=il(),r=ve(de(t),2);Xn(r,{get items(){return n().advancement.levelBenefits}}),en("click",ve(r,2),(()=>jt(l,!0))),sn(e,t)},v=e=>{var t=ol(),n=ue(t),a=ve(de(n),2),i=de(ve(n,2));un(ve(de(i)),5,(()=>r),dn,((e,t)=>{var n=sl(),l=de(n),r=de(l),a=ve(l),i=de(a),s=de(ve(a));Ae((()=>{on(r,Dt(t).level),on(i,Dt(t).fate),on(s,Dt(t).persona)})),sn(e,n)})),en("click",a,(()=>jt(l,!1))),sn(e,t)};cn(d,(e=>{Dt(l)?e(v,!1):e(u)})),sn(e,i),Jt()}var ul=ln('<span class="py-2 border-bottom font-weight-bold"><!></span> <textarea class="flex-grow-1 form-control"></textarea>',1),vl=ln('<!><span class="bg-info"> </span><!>',1),fl=ln('<span class="py-2 border-bottom font-weight-bold"><!></span> <button class="btn btn-light text-left align-top wrap w-100" style="min-height: 2.5em;"><!></button>',1);function bl(e,t){qt(t,!1);const n=Ht(),l=Ht(),r=Ht(),a=Ht();let i=Nn(t,"content",12,""),s=Nn(t,"highlight",8,""),o=Ht(!1),c=Ht();function d(){Dt(c)&&function(e){jt(e,At((()=>Dt(e))))}(c,Dt(c).style.height=`${Dt(c).scrollHeight+2}px`)}Ee((()=>Tt(s())),(()=>{jt(n,new RegExp(s(),"gi"))})),Ee((()=>(Tt(i()),Dt(n))),(()=>{jt(l,[...i().matchAll(Dt(n))])})),Ee((()=>(Dt(l),Tt(i()))),(()=>{jt(r,0==Dt(l).length?"":i().substring(0,Dt(l)[0].index))})),Ee((()=>(Dt(l),Tt(i()))),(()=>{jt(a,0==Dt(l).length?"":i().substring(Dt(l)[Dt(l).length-1].index+Dt(l)[Dt(l).length-1][0].length))})),De(),Tn();var u=an(),v=ue(u),f=e=>{var n=ul(),l=ue(n);pn(de(l),t,"default",{},null);var r=ve(l,2);Cn(r,(e=>jt(c,e)),(()=>Dt(c))),Dn(r,i),en("blur",r,(()=>jt(o,!1))),en("focus",r,d),en("keyup",r,d),sn(e,n)},b=e=>{var n=fl(),s=ue(n);pn(de(s),t,"default",{},null);var c=ve(s,2),d=de(c),u=e=>{var t=rn();Ae((()=>on(t,i()))),sn(e,t)},v=e=>{var t=an();un(ue(t),1,(()=>Dt(l)),dn,((e,t,n)=>{var s=vl(),o=ue(s),c=e=>{var t=rn();Ae((()=>on(t,Dt(r)))),sn(e,t)};cn(o,(e=>{0==n&&e(c)}));var d=ve(o),u=de(d),v=ve(d),f=e=>{var r=rn();Ae((e=>on(r,e)),[()=>i().substring(Dt(t).index+Dt(t)[0].length,Dt(l)[n+1].index)],pe),sn(e,r)},b=e=>{var t=rn();Ae((()=>on(t,Dt(a)))),sn(e,t)};cn(v,(e=>{n<Dt(l).length-1?e(f):e(b,!1)})),Ae((()=>on(u,Dt(t)[0]))),sn(e,s)})),sn(e,t)};cn(d,(e=>{0==Dt(l).length?e(u):e(v,!1)})),en("click",c,(()=>jt(o,!0))),sn(e,n)};cn(v,(e=>{Dt(o)?e(f):e(b,!1)})),sn(e,u),Jt()}var ml=ln('<div class="d-flex mb-1 border-bottom col-lg-3 col-md-4"><span class="align-self-center text-right mr-1 py-2 font-weight-bold" style="width: 4.5em; height: 2.5em;"><!></span> <input class="flex-grow-1 form-control"></div>'),pl=ln('<div class="d-flex mb-1 border-bottom col-lg-3 col-md-4"><span class="align-self-center text-right border-right pr-1 py-2 font-weight-bold" style="width: 4.5em;"><!></span> <button class="flex-grow-1 btn btn-light text-left"> </button></div>');function hl(e,t){qt(t,!1);let n=Nn(t,"content",12,""),l=Ht(!1),r=Ht();Tn();var a=an(),i=ue(a),s=e=>{var a=ml(),i=de(a);pn(de(i),t,"default",{},null);var s=ve(i,2);Cn(s,(e=>jt(r,e)),(()=>Dt(r))),Dn(s,n),en("blur",s,(()=>jt(l,!1))),sn(e,a)},o=e=>{var r=pl(),a=de(r);pn(de(a),t,"default",{},null);var i=ve(a,2),s=de(i);Ae((()=>on(s,n()))),en("click",i,(()=>jt(l,!0))),sn(e,r)};cn(i,(e=>{Dt(l)?e(s):e(o,!1)})),sn(e,a),Jt()}var gl=ln('<div class="container-fluid"><div class="card"><div class="card-body"><div class="row"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div></div> <div class="card"><div class="card-body"><div class="row"><div class="d-flex flex-column mb-1 col-lg-3 col-md-4"><!></div> <div class="d-flex flex-column mb-1 col-lg-3 col-md-4"><!></div> <div class="d-flex flex-column mb-1 col-lg-3 col-md-4"><!></div> <div class="d-flex flex-column mb-1 col-lg-3 col-md-4"><!></div></div></div></div></div>');var kl=ln('<input class="form-control my-1">'),yl=ln('<button class="btn btn-light border-bottom text-left"> </button>'),wl=ln('<div class="card"><div class="card-body"><div class="d-flex flex-column"><h2><!></h2> <!></div> <div class="btn-group"><button class="btn btn-light border my-1">Add</button> <button class="btn btn-light border my-1">a &rarr; z</button></div></div></div>');function $l(e,t){qt(t,!1);let n=Nn(t,"items",28,(()=>[])),l=Ht(),r=Ht(-1);function a(){n()[Dt(r)]||n().splice(Dt(r),1),jt(r,-1)}Tn();var i=wl(),s=de(i),o=de(s),c=de(o);pn(de(c),t,"default",{},null),un(ve(c,2),1,n,dn,((e,t,i)=>{var s=an(),o=ue(s),c=e=>{var t=kl();Cn(t,(e=>jt(l,e)),(()=>Dt(l))),en("blur",t,a),Dn(t,(()=>n()[i]),(e=>(n()[i]=e,zt((()=>n()))))),sn(e,t)},d=e=>{var t=yl(),l=de(t);Ae((()=>on(l,n()[i]))),en("click",t,(()=>jt(r,i))),sn(e,t)};cn(o,(e=>{Dt(r)==i?e(c):e(d,!1)})),sn(e,s)}));var d=de(ve(o,2)),u=ve(d,2);en("click",d,(function(){n().push(""),n(n()),jt(r,n().length-1)})),en("click",u,(()=>{n().sort(),n(n())})),sn(e,i),Jt()}var xl=ln('<input class="form-control">'),_l=ln('<button class="btn btn-light w-100 text-left font-weight-bold" style="min-height: 2.2em;"> </button>'),Sl=ln('<button class="badge btn btn-light border ml-1 p-2">hide</button>'),El=ln('<button class="badge btn btn-light border ml-1 p-2">show</button>'),Dl=ln('<div class="card"><div class="card-body p-2"><div class="mb-1"><!></div> <!> <div class="mt-1"><button class="btn btn-dark">Delete</button></div></div></div>'),zl=ln('<div class="mb-2"><div class="d-flex"><button class="btn btn-dark" title="Number of conditions"> </button> <!> <!> <div class="btn-group"><button class="badge btn btn-light border ml-1 p-2">&uarr;</button> <button class="badge btn btn-light border p-2">&darr;</button></div></div> <!></div>');const Al=()=>({id:crypto.randomUUID(),name:"New follower",conditions:0,description:"",tags:[]});var Ol=ln('<div class="card"><div class="card-body"><h2>Followers</h2> <div class="d-flex mb-1"><button class="btn btn-light border mb-1 mr-1">Add follower</button></div> <!></div></div>');function Cl(e,t){qt(t,!1);let n=Nn(t,"followers",28,(()=>[]));n()||n([]);const l={delete:e=>{if(!confirm(`Delete ${e.name}?`))return;let t=n().indexOf(e);n().splice(t,1),n(n())},move:(e,t)=>{let l=n().indexOf(e);n().splice(l,1),l+=t,l<0?l=n().length:l>n().length&&(l=0),n().splice(l,0,e),n(n())}};Tn();var r=Ol(),a=de(r),i=ve(de(a),2),s=de(i);un(ve(i,2),1,n,(e=>e.id),((e,t)=>{!function(e,t){qt(t,!1);let n=Nn(t,"follower",12),l=Nn(t,"actions",8),r=Ht(!0),a=Ht(!1),i=Ht();Tn();var s=zl(),o=de(s),c=de(o),d=de(c),u=ve(c,2),v=e=>{var t=xl();Cn(t,(e=>jt(i,e)),(()=>Dt(i))),en("blur",t,(()=>jt(a,!1))),Dn(t,(()=>n().name),(e=>n(n().name=e,!0))),sn(e,t)},f=e=>{var t=_l(),l=de(t);Ae((()=>on(l,n().name))),en("click",t,(()=>jt(a,!0))),sn(e,t)};cn(u,(e=>{Dt(a)?e(v):e(f,!1)}));var b=ve(u,2),m=e=>{var t=Sl();en("click",t,(()=>jt(r,!0))),sn(e,t)},p=e=>{var t=El();en("click",t,(()=>jt(r,!1))),sn(e,t)};cn(b,(e=>{Dt(r)?e(p,!1):e(m)}));var h=de(ve(b,2)),g=ve(h,2),k=ve(o,2),y=e=>{var t=Dl(),r=de(t),a=de(r);Xn(de(a),{get items(){return n().tags}});var i=ve(a,2);bl(i,{get content(){return n().description},set content(e){n(n().description=e,!0)},$$legacy:!0}),en("click",de(ve(i,2)),(()=>l().delete(n()))),sn(e,t)};cn(k,(e=>{Dt(r)||e(y)})),Ae((()=>on(d,n().conditions))),en("click",c,(function(e){n(n().conditions+=e.shiftKey?-1:1,!0),n().conditions<0&&n(n().conditions=6,!0),n().conditions>6&&n(n().conditions=0,!0)})),en("click",h,(()=>l().move(n(),-1))),en("click",g,(()=>l().move(n(),1))),sn(e,s),Jt()}(e,{get follower(){return Dt(t)},actions:l})})),en("click",s,(function(){n().push(Al()),n(n())})),sn(e,r),Jt()}var Tl=ln('<div class="container-fluid"><!> <div class="row"><div class="col-md-6"><!></div> <div class="col-md-6"><!></div></div></div>');var Wl=ln("<button><!></button>");function Ul(e,t){let n=Nn(t,"selected",12,!1);var l=Wl();let r;pn(de(l),t,"default",{},null),Ae((e=>r=yn(l,1,"border border-dark btn m-1",null,r,e)),[()=>({"btn-dark":n(),"btn-light":!n()})],pe),en("click",l,(()=>n(!n()))),sn(e,l)}var Pl=ln('<div class="card-body d-flex flex-wrap"><!> <!> <!> <!> <!> <!> <!> <!></div> <div class="btn-group position-topright"><button class="btn badge btn-light border border-dark">?</button> <button class="btn badge btn-light border border-dark">&cross;</button></div>',1),Nl=ln("<h5> </h5> <p> </p>",1),Il=ln('<div class="card-header"><h5 class="card-title">Conditions</h5> <button type="button" class="close position-topright"><span aria-hidden="true">&cross;</span></button></div> <div class="card-body"></div>',1),Ll=ln('<div class="container-fluid"><div class="card"><!></div></div>'),Hl=ln('<div class="container-fluid"><button class="btn btn-light border col">Conditions</button></div>');var jl=ln('<div class="btn bg-light mb-1 p-0 w-100 border"><div class="d-flex m-1"><input class="form-control flex-grow-1" style="min-width: 0px;"> <button>Done</button></div> <div class="d-flex m-1 align-items-center"><span> </span> <span class="ml-1">Size</span> <div class="btn-group ml-auto"><button>&uarr;</button> <button>&darr;</button></div></div> <div class="d-flex m-1 align-items-center"><span> </span> <span class="ml-1">Uses</span> <div class="btn-group ml-auto"><button>&uarr;</button> <button>&darr;</button></div></div> <div class="d-flex m-1 align-items-center"><div class="btn-group"><button>&uarr;</button> <button>&darr;</button></div> <button>Delete</button></div></div>'),Ml=ln('<span><span tabindex="0" class="btn btn-light border border-dark flex-grow-0 align-items-center d-flex" draggable="true" title="Move"><span style="align-self: center;">⦀</span></span> <span class="btn btn-light text-left border border-dark flex-grow-1"><span> </span> <!></span> <button class="btn btn-light border border-dark flex-grow-0"> </button></span>'),Fl=ln("<div><!></div>");var Rl=ln('<h4 class="flex-grow-1 m-0"><button class="badge btn btn-light text-left card-title w-100 mb-0"> </button></h4>'),Vl=ln('<input class="form-control mr-2">'),Kl=ln('<h4 class="flex-grow-1 m-0"><button class="badge btn btn-light text-left card-title w-100 mb-0"> </button></h4>'),Bl=ln('<h5 class="m-0"><span class="card-title mb-0"> </span></h5>'),ql=ln('<h5 class="ml-auto mr-1"><span class="badge btn btn-light"> </span></h5>'),Jl=ln('<h5 class="ml-auto mr-1"><span class="badge btn btn-light"> </span></h5>'),Gl=ln("<button></button>"),Zl=ln('<div class="d-flex"><button class="btn btn-light border ml-auto">Delete</button></div>'),Ql=ln('<div class="col-lg-3 col-md-4 col-sm-6 my-1"><div class="card"><div class="card-header p-2 d-flex"><!> <!> <div class="ml-1 btn-group"><button>hide</button> <button>a &rarr; z</button></div></div> <div class="card-body"><div class="d-flex flex-column"><!> <!></div> <!></div></div></div>');function Yl(e,t){qt(t,!1);const n=Ht(),l=Ht(),r=Ht(),a=Ht();let i=Nn(t,"container",12),s=Nn(t,"dragItem",8),o=Nn(t,"actions",8),c=Nn(t,"selected",8);const d="badge btn btn-light border border-dark align-self-center p-2",u=["custom","pockets"].includes(i().format),v={delete:e=>{let t=i().items.indexOf(e);i().items.splice(t,1),i(i().items=i().items,!0)},dragEnd:()=>{o().dragEnd()},dragStart:e=>{o().dragStart(i(),e)},move:(e,t)=>{let n=i().items.indexOf(e);i().items.splice(n,1),n+=t,n<0?n=i().items.length:n>i().items.length&&(n=0),i().items.splice(n,0,e),i(i().items=i().items,!0)},resize:(e,t)=>{e.size+=t,Dt(l)-t<0&&(e.size-=t),0==e.size&&(e.size=1),i(i().items=i().items,!0)},select:e=>{o().select(i(),e)}};let f=Ht(!1),b=Ht(),m=Ht();function p(){0!=Dt(l)&&(Dt(r)?o().selectEnd(i()):null==c()&&(i().items.push({text:"",size:1,id:crypto.randomUUID()}),i(i().items=i().items,!0)))}function h(e){Dt(r)&&e.target.classList.add("dragover")}function g(e){e.target.classList.remove("dragover")}function k(e){Dt(r)&&e.preventDefault()}function y(e){e.target.classList.remove("dragover"),o().dragEnd(i())}function w(){6==i().size&&Dt(n)<=3?(i(i().size=3,!0),i(i().name="Satchel",!0)):(i(i().size=6,!0),i(i().name="Backpack",!0))}i().items.forEach((e=>{e.id||(e.id=crypto.randomUUID())})),Ee((()=>Tt(i())),(()=>{jt(n,i().items.reduce(((e,t)=>e+t.size),0))})),Ee((()=>(Tt(i()),Dt(n))),(()=>{jt(l,u?1:i().size-Dt(n))})),Ee((()=>(Tt(s()),Tt(c()))),(()=>{u?jt(m,1):null!=s()?jt(m,s().size):null!=c()?jt(m,c().size):jt(m,1)})),Ee((()=>(Tt(s()),Tt(c()),Dt(l),Dt(m))),(()=>{jt(r,(null!=s()||null!=c())&&Dt(l)>=Dt(m))})),Ee((()=>(Dt(l),Dt(m))),(()=>{jt(a,Dt(l)<Dt(m))})),De(),Tn();var $=Ql(),x=de($),_=de(x),S=de(_),E=e=>{var t=Rl(),n=de(t),l=de(n);Ae((()=>on(l,i().name))),en("click",n,w),sn(e,t)},D=(e,t)=>{var n=e=>{var t=Vl();Cn(t,(e=>jt(b,e)),(()=>Dt(b))),en("blur",t,(()=>jt(f,!1))),Dn(t,(()=>i().name),(e=>i(i().name=e,!0))),sn(e,t)},l=(e,t)=>{var n=e=>{var t=Kl(),n=de(t),l=de(n);Ae((()=>on(l,i().name))),en("click",n,(()=>jt(f,!0))),sn(e,t)},l=e=>{var t=Bl(),n=de(t),l=de(n);Ae((()=>on(l,i().name))),sn(e,t)};cn(e,(e=>{"custom"==i().format?e(n):e(l,!1)}),t)};cn(e,(e=>{"custom"==i().format&&Dt(f)?e(n):e(l,!1)}),t)};cn(S,(e=>{"pack"==i().format?e(E):e(D,!1)}));var z=ve(S,2),A=e=>{var t=ql(),l=de(t),r=de(l);Ae((()=>on(r,Dt(n)))),sn(e,t)},O=e=>{var t=Jl(),l=de(t),r=de(l);Ae((()=>on(r,`${Dt(n)??""} / ${i().size??""}`))),sn(e,t)};cn(z,(e=>{u?e(A):e(O,!1)}));var C=de(ve(z,2));yn(C,1,d);var T=ve(C,2);yn(T,1,d);var W=de(ve(_,2)),U=de(W);un(U,1,(()=>i().items),(e=>e.id),((e,t)=>{const n=pe((()=>c()==Dt(t)));!function(e,t){qt(t,!1);const n=Ht();let l=Nn(t,"item",12),r=Nn(t,"actions",8),a=Nn(t,"selected",8,!1);const i="btn border border-dark align-self-start";let s=Ht(!1);function o(){r().select(l())}function c(e){l(l().stackSize+=e,!0),l().stackSize<0&&l(l().stackSize=0,!0)}void 0===l().stackSize&&(l(l().stackSize=0,!0),l(l().stack=0,!0)),Ee((()=>Tt(l())),(()=>{jt(n,l().stackSize?l().size+1:l().size)})),De(),Tn();var d=Fl(),u=de(d),v=e=>{var t=jl(),n=de(t),a=de(n),o=ve(a,2);yn(o,1,"btn border border-dark align-self-start btn-light ml-1");var d=ve(n,2),u=de(d);yn(u,1,"btn border border-dark align-self-start btn-dark");var v=de(u),f=de(ve(u,4));yn(f,1,i);var b=ve(f,2);yn(b,1,i);var m=ve(d,2),p=de(m);yn(p,1,"btn border border-dark align-self-start btn-dark");var h=de(p),g=de(ve(p,4));yn(g,1,i);var k=ve(g,2);yn(k,1,i);var y=de(ve(m,2)),w=de(y);yn(w,1,"btn border border-dark align-self-start btn-light");var $=ve(w,2);yn($,1,"btn border border-dark align-self-start btn-light");var x=ve(y,2);yn(x,1,"btn border border-dark align-self-start btn-light ml-auto"),Ae((()=>{on(v,l().size),on(h,l().stackSize)})),Dn(a,(()=>l().text),(e=>l(l().text=e,!0))),en("click",o,(()=>jt(s,!1))),en("click",f,(()=>r().resize(l(),1))),en("click",b,(()=>r().resize(l(),-1))),en("click",g,(()=>c(1))),en("click",k,(()=>c(-1))),en("click",w,(()=>r().move(l(),-1))),en("click",$,(()=>r().move(l(),1))),en("click",x,(()=>r().delete(l()))),sn(e,t)},f=e=>{var t=Ml();let i;var c=de(t),d=ve(c,2),u=de(d),v=de(u),f=ve(u,2),b=e=>{Vn(e,{get count(){return l().stackSize},get value(){return l().stack},set value(e){l(l().stack=e,!0)},children:(e,t)=>{sn(e,rn("Used"))},$$slots:{default:!0},$$legacy:!0})};cn(f,(e=>{l().stackSize&&e(b)}));var m=ve(d,2),p=de(m);Ae((e=>{i=yn(t,1,"d-flex btn-group mb-1",null,i,e),$n(t,`min-height: ${2.5*Dt(n)}em;`),on(v,l().text),on(p,l().size)}),[()=>({"m-2":a()})],pe),en("dragstart",c,(()=>r().dragStart(l()))),en("dragend",c,(()=>r().dragEnd())),en("click",c,o),en("click",m,(()=>jt(s,!0))),sn(e,t)};cn(u,(e=>{Dt(s)?e(v):e(f,!1)})),sn(e,d),Jt()}(e,{get item(){return Dt(t)},actions:v,get selected(){return Dt(n)}})}));var P=ve(U,2),N=e=>{var t=Gl();Ae((()=>{t.disabled=Dt(a),yn(t,1,"drop btn border mb-1 "+(Dt(a)?"disabled btn-secondary":"btn-light")),$n(t,`height: ${2.5*Dt(l)}em;`)})),en("dragenter",t,h),en("dragleave",t,g),en("dragover",t,k),en("drop",t,y),en("click",t,p),sn(e,t)};cn(P,(e=>{Dt(l)>0&&e(N)}));var I=ve(W,2),L=e=>{var t=Zl();en("click",de(t),(()=>o().delete(i()))),sn(e,t)};cn(I,(e=>{"custom"==i().format&&e(L)})),en("click",C,(()=>o().hide(i()))),en("click",T,(function(){i().items.sort(((e,t)=>e.text.localeCompare(t.text))),i(i().items=i().items,!0)})),sn(e,$),Jt()}var Xl=ln('<button class="btn btn-light border mt-1 mr-1"> </button>'),er=ln('<div class="container-fluid"><div class="row"><div class="col-md-12 my-1"><div class="card"><div class="card-header p-2"><h5 class="m-0">Containers</h5></div> <div class="card-body d-flex flex-column"><button class="btn btn-light border">Add container</button> <div></div></div></div></div> <!></div></div>');var tr=ln('<a href="#"><!></a>');function nr(e,t){qt(t,!1);const n=E;let l=Nn(t,"tabValue",8),r=Nn(t,"tab",12,"");Tn();var a=tr();let i;pn(de(a),t,"default",{},null),Ae((e=>i=yn(a,1,"nav-item nav-link",null,i,e)),[()=>({active:r()==l()})],pe),en("click",a,(function(){r(l()),n("setTab",{tab:l()})})),sn(e,a),Jt()}const lr={colonialMarines:()=>({navbar:{tab:"bio"},abilities:Ln(),advancement:{currentFate:0,currentPersona:0,spentFate:0,spentPersona:0,levelBenefits:[]},bio:{name:"",parents:"",mentor:"",age:"",home:"",level:"",raiment:"",stock:"",classValue:"",belief:"",creed:"",goal:"",instinct:"",epithet:""},circles:{friends:[],enemies:[]},conditions:{shown:!0,fresh:!1,hungry:!1,angry:!1,afraid:!1,exhausted:!1,injured:!1,sick:!1,dead:!1},inventory:[Hn({name:"Armament",size:5,format:"pockets"}),Hn({name:"Protection",size:2,format:"static"}),Hn({name:"Pack",size:1,format:"pockets"}),Hn({name:"Combat Webbing",size:1,format:"pockets"})],mod:"colonialMarines",notes:[],skills:{compact:!1,skills:[jn({name:"Admin",bluck:"Will",special:!0}),jn({name:"Armorer",bluck:"Health",special:!0}),jn({name:"Broker",bluck:"Will",special:!0}),jn({name:"Criminal",bluck:"Will",special:!0}),jn({name:"Executive",bluck:"Will",special:!0}),jn({name:"Gunner",bluck:"Health",special:!0}),jn({name:"Instructor",bluck:"Health",special:!0}),jn({name:"Leader",bluck:"Health",special:!0}),jn({name:"Manipulator",bluck:"Will",special:!0}),jn({name:"Medic",bluck:"Will",special:!0}),jn({name:"Operator",bluck:"Health",special:!0}),jn({name:"Persuader",bluck:"Will",special:!0}),jn({name:"Pilot",bluck:"Health",special:!0}),jn({name:"Programmer",bluck:"Will",special:!0}),jn({name:"Scavenger",bluck:"Will",special:!0}),jn({name:"Scientist",bluck:"Will",special:!0}),jn({name:"Scout",bluck:"Will",special:!0}),jn({name:"Soldier",bluck:"Health",special:!1}),jn({name:"Survivalist",bluck:"Health",special:!0}),jn({name:"Technician",bluck:"Health",special:!0})]},spells:{burden:0,urdr:0,memory:0,spells:[]},traits:[],wises:[]}),torchbearer:Mn},rr=(e,t)=>{for(let n in t)e[n]||(e[n]=t[n]),"object"==typeof e[n]&&rr(e[n],t[n])};var ar={delete:e=>{if(confirm(`Delete ${e.bio.name}?`))return localStorage.removeItem(e.bio.name),{success:`${e.bio.name} deleted from character storage`}},deleteAll:()=>{if(confirm("Delete all saved characters?"))return localStorage.clear(),{success:"All characters deleted from character storage"}},export:e=>{let t=URL.createObjectURL(new Blob([JSON.stringify(e)])),n=document.createElement("a");n.href=t,n.download=`${e.bio.name}.tb2e`,n.click()},import:e=>{let t=document.createElement("input");t.type="file",t.accept=".tb2e",t.onchange=t=>{t.target.files[0].text().then((t=>{let n=JSON.parse(t).bio.name;localStorage.setItem(n,t),e(`${n} added to character storage`)}))},t.click()},load:(e,t)=>{let n=t;if(n==`${e.bio.name}.tb2e`)return{model:e};let l="";return e.bio.name&&confirm(`Save ${e.bio.name} before changing characters?`)&&(localStorage.setItem(e.bio.name,JSON.stringify(e)),l+=`${e.bio.name} saved, `),(e=JSON.parse(localStorage.getItem(n))).mod||(e.mod="torchbearer"),rr(e,lr[e.mod]()),{model:e,alert:{success:`${l}${e.bio.name} opened`}}},loadList:()=>{let e=[...new Array(window.localStorage.length)].map(((e,t)=>window.localStorage.key(t)));return e=e.filter((e=>e.endsWith(".tb2e"))),e.sort(((e,t)=>e.localeCompare(t))),e},loadMod:(e,t)=>{let n="";return e.bio.name&&confirm(`Save ${e.bio.name} before changing characters?`)&&(localStorage.setItem(e.bio.name,JSON.stringify(e)),n+=`${e.bio.name} saved, `),{model:e=lr[t](),alert:{success:`${n}${t} loaded`}}},save:e=>e.bio.name?(localStorage.setItem(`${e.bio.name}.tb2e`,JSON.stringify(e)),{success:`${e.bio.name} saved`}):{error:"Cannot save an unnamed character"}};const ir=new URLSearchParams(window.location.search).get("theme")??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");var sr=ln('<button class="dropdown-item"> </button>'),or=ln('<button class="alert alert-static alert-success btn text-center w-100"><strong> </strong></button>'),cr=ln('<button class="alert alert-static alert-danger btn text-center w-100"><strong> </strong></button>'),dr=ln('<nav class="navbar navbar-expand-md navbar-light bg-light"><button class="navbar-toggler" type="button"><span class="navbar-toggler-icon"></span></button> <div class="collapse navbar-collapse"><ul class="navbar-nav mr-auto"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <li class="nav-item dropdown"><a href="#">Characters</a> <div class="dropdown-menu"></div></li> <li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle">Mods</a> <div class="dropdown-menu"><button class="dropdown-item">Colonial Marines</button> <button class="dropdown-item">Torchbearer</button></div></li></ul> <div class="navbar-nav"><div class="nav-item dropdown"><button href="#" class="dropdown-toggle btn btn-light border border-dark">Options</button> <div class="dropdown-menu"><button class="dropdown-item">Save</button> <button class="dropdown-item">Export</button> <button class="dropdown-item">Import</button> <button class="dropdown-item">Delete</button> <button class="dropdown-item">Delete all</button> <button class="dropdown-item"></button></div></div></div></div></nav> <!>',1);function ur(e,t){qt(t,!1);let n=Nn(t,"model",28,Mn),l=Nn(t,"tab",12,"bio");let r=Ht("none"),a=Ht(""),i=Ht([]),s=Ht(),o=Ht();function c(e){let t=ar.loadMod(n(),e);n(t.model),jt(s,t.alert),f()}function d(e){e.relatedTarget?.className.includes("dropdown-item")||jt(a,"")}function u(){jt(i,ar.loadList())}function v(e){jt(a,e)}function f(){jt(r,"none"==Dt(r)?"block":"none")}u();let b=window.setInterval((()=>{console.log(`Autosave (${n().bio.name})`),null!=Dt(i).find((e=>e==n().bio.name))&&ar.save(n())}),1e4);var m,p;m=()=>{clearInterval(b)},p=qn,(p.d??=[]).push(m),Tn();var h=dr(),g=ue(h),k=de(g),y=ve(k,2);let w;var $=de(y),x=de($);nr(x,{tabValue:"abilities",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Abilities"))},$$slots:{default:!0},$$legacy:!0});var _=ve(x,2);nr(_,{tabValue:"advancement",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Advancement"))},$$slots:{default:!0},$$legacy:!0});var S=ve(_,2);nr(S,{tabValue:"bio",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Bio"))},$$slots:{default:!0},$$legacy:!0});var E=ve(S,2);nr(E,{tabValue:"circles",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Circles"))},$$slots:{default:!0},$$legacy:!0});var D=ve(E,2);nr(D,{tabValue:"inventory",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Inventory"))},$$slots:{default:!0},$$legacy:!0});var z=ve(D,2);nr(z,{tabValue:"notes",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Notes"))},$$slots:{default:!0},$$legacy:!0});var A=ve(z,2);nr(A,{tabValue:"skills",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Skills"))},$$slots:{default:!0},$$legacy:!0});var O=ve(A,2);nr(O,{tabValue:"spells",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Spells"))},$$slots:{default:!0},$$legacy:!0});var C=ve(O,2);nr(C,{tabValue:"traits",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Traits"))},$$slots:{default:!0},$$legacy:!0});var T=ve(C,2);nr(T,{tabValue:"wises",get tab(){return l()},set tab(e){l(e)},$$events:{setTab:f},children:(e,t)=>{sn(e,rn("Wises"))},$$slots:{default:!0},$$legacy:!0});var W=ve(T,2),U=de(W);let P;var N=ve(U,2);un(N,5,(()=>Dt(i)),dn,((e,t,l,r)=>{var a=sr(),i=de(a);Ae((()=>on(i,Dt(t)))),en("blur",a,d),en("click",a,(()=>function(e){let t=ar.load(n(),e);n(t.model),jt(s,t.alert),f()}(Dt(t)))),sn(e,a)}));var I=de(ve(W,2)),L=ve(I,2),H=de(L),j=ve(H,2),M=de(ve($,2)),F=de(M),R=ve(F,2),V=de(R),K=ve(V,2),B=ve(K,2),q=ve(B,2),J=ve(q,2),G=ve(J,2);G.textContent=("dark"==ir?"Light":"Dark")+" mode";var Z=ve(g,2),Q=e=>{var t=or(),n=de(t),l=de(n);Cn(t,(e=>jt(o,e)),(()=>Dt(o))),Ae((()=>on(l,Dt(s).success))),en("blur",t,(()=>jt(s,null))),en("click",t,(()=>jt(s,null))),sn(e,t)},Y=(e,t)=>{var n=e=>{var t=cr(),n=de(t),l=de(n);Cn(t,(e=>jt(o,e)),(()=>Dt(o))),Ae((()=>on(l,Dt(s).error))),en("blur",t,(()=>jt(s,null))),en("click",t,(()=>jt(s,null))),sn(e,t)};cn(e,(e=>{Dt(s)?.error&&e(n)}),t)};cn(Z,(e=>{Dt(s)?.success?e(Q):e(Y,!1)})),Ae((e=>{w=$n(y,"",w,{display:Dt(r)}),P=yn(U,1,"nav-link dropdown-toggle",null,P,e),$n(N,"display: "+("characters"==Dt(a)?"block":"none")),$n(L,"display: "+("mods"==Dt(a)?"block":"none")),$n(R,"display: "+("options"==Dt(a)?"block":"none"))}),[()=>({disabled:!Dt(i).length})],pe),en("click",k,f),en("blur",U,d),en("click",U,(()=>v("characters"))),en("blur",I,d),en("click",I,(()=>v("mods"))),en("blur",H,d),en("click",H,(()=>c("colonialMarines"))),en("blur",j,d),en("click",j,(()=>c("torchbearer"))),en("blur",F,d),en("click",F,(()=>v("options"))),en("click",V,(function(){jt(s,ar.save(n())),jt(i,ar.loadList()),f()})),en("blur",V,d),en("click",K,(function(){ar.export(n()),f()})),en("blur",K,d),en("click",B,(function(){ar.import((e=>{jt(s,{success:e}),jt(i,ar.loadList())})),f()})),en("blur",B,d),en("click",q,(function(){jt(s,ar.delete(n())),u(),f()})),en("blur",q,d),en("click",J,(function(){jt(s,ar.deleteAll()),u(),f()})),en("blur",J,d),en("click",G,(()=>{return e="dark"==ir?"light":"dark",void(window.location.search=`theme=${e}`);var e})),sn(e,h),Jt()}var vr={shortDate:(e=new Date)=>{let t=e.getDate().toString();1==t.length&&(t=`0${t}`);let n=(e.getMonth()+1).toString();1==n.length&&(n=`0${n}`);let l=e.getFullYear();for(;l.length<4;)l=`0${l}`;return`${l}-${n}-${t}`}},fr=ln('<div class="col-12 d-flex"><h4 class="flex-grow-1 m-0"><button class="badge btn btn-light w-100 text-left" style="min-height: 2.2em;"> </button></h4> <button class="badge btn btn-light border ml-1 p-2"> </button></div>'),br=ln('<input class="form-control">'),mr=ln('<button class="btn btn-light w-100 text-left font-weight-bold" style="min-height: 2.2em;"> </button>'),pr=ln('<div class="col-12"><div class="card"><div class="card-body"><div class="d-flex"><!> <button class="badge btn btn-light border ml-1 p-2">hide</button> <button class="badge btn btn-light border ml-1 p-2">delete</button></div> <div class="d-flex"><!></div></div></div></div>');var hr=ln('<div class="container-fluid"><div class="row"><div class="col"><div class="card"><div class="card-body"><div class="d-flex"><button class="btn btn-light border mb-1 mr-1">Add note</button> <div class="dropdown"><button class="dropdown-toggle btn btn-light border mb-1">Sort</button> <div class="dropdown-menu"><button class="dropdown-item">Newest</button> <button class="dropdown-item">Oldest</button> <button class="dropdown-item">A &rarr; Z</button> <button class="dropdown-item">Z &rarr; A</button></div></div></div> <div class="d-flex"><input class="form-control" placeholder="filter"></div> <div class="row mt-2"></div></div></div></div></div></div>');function gr(e,t){qt(t,!1);const n=Ht();let l=Nn(t,"notes",12);const r={delete:e=>{if(!confirm(`Delete ${e.title}?`))return;let t=l().indexOf(e);l().splice(t,1),l(l())}};let a=Ht(""),i=Ht("");function s(e){e.relatedTarget?.className.includes("dropdown-item")||jt(i,"")}function o(e){"alpha"==e?l().sort(((e,t)=>e.title.localeCompare(t.title))):"ralpha"==e?l().sort(((e,t)=>t.title.localeCompare(e.title))):"oldest"==e?l().sort(((e,t)=>e.date>t.date)):"newest"==e&&l().sort(((e,t)=>e.date<t.date)),l(l())}Ee((()=>(Tt(l()),Dt(a))),(()=>{jt(n,l().filter((e=>!Dt(a)||e.title.toLowerCase().includes(Dt(a).toLowerCase())||e.content.toLowerCase().includes(Dt(a).toLowerCase()))))})),Ee((()=>Tt(l())),(()=>{l().forEach((e=>{e.id||(e.id=crypto.randomUUID())}))})),De(),Tn();var c=hr(),d=de(c),u=de(d),v=de(u),f=de(v),b=de(f),m=de(b),p=de(ve(m,2)),h=ve(p,2),g=de(h),k=ve(g,2),y=ve(k,2),w=ve(y,2),$=ve(b,2),x=de($);un(ve($,2),5,(()=>Dt(n)),(e=>e.id),((e,t)=>{!function(e,t){qt(t,!1);const n=Ht(),l=Ht();let r=Nn(t,"actions",8),a=Nn(t,"note",12),i=Nn(t,"highlight",8),s=Ht(!1),o=Ht();Ee((()=>Tt(i())),(()=>{jt(n,""==i())})),Ee((()=>Tt(a())),(()=>{jt(l,new Date(a().date))})),De(),Tn();var c=an(),d=ue(c),u=e=>{var t=fr(),r=de(t),i=de(r),s=de(i),o=ve(r,2),c=de(o);Ae((e=>{on(s,a().title),on(c,e)}),[()=>vr.shortDate(Dt(l))],pe),en("click",i,(()=>jt(n,!1))),en("click",o,(()=>jt(n,!1))),sn(e,t)},v=e=>{var t=pr(),l=de(t),c=de(l),d=de(c),u=de(d),v=e=>{var t=br();Cn(t,(e=>jt(o,e)),(()=>Dt(o))),en("blur",t,(()=>jt(s,!1))),Dn(t,(()=>a().title),(e=>a(a().title=e,!0))),sn(e,t)},f=e=>{var t=mr(),n=de(t);Ae((()=>on(n,a().title))),en("click",t,(()=>jt(s,!0))),sn(e,t)};cn(u,(e=>{Dt(s)?e(v):e(f,!1)}));var b=ve(u,2),m=ve(b,2);bl(de(ve(d,2)),{get highlight(){return i()},get content(){return a().content},set content(e){a(a().content=e,!0)},$$legacy:!0}),en("click",b,(()=>jt(n,!0))),en("click",m,(()=>r().delete(a()))),sn(e,t)};cn(d,(e=>{Dt(n)?e(u):e(v,!1)})),sn(e,c),Jt()}(e,{get note(){return Dt(t)},actions:r,get highlight(){return Dt(a)}})})),Ae((()=>$n(h,"display: "+("sort"==Dt(i)?"block":"none")))),en("click",m,(function(){l().splice(0,0,{id:crypto.randomUUID(),title:"New note",date:(new Date).toISOString(),content:"Enter your notes here"}),l(l())})),en("blur",p,s),en("click",p,(()=>jt(i,"sort"))),en("blur",g,s),en("click",g,(()=>o("newest"))),en("blur",k,s),en("click",k,(()=>o("oldest"))),en("blur",y,s),en("click",y,(()=>o("alpha"))),en("blur",w,s),en("click",w,(()=>o("ralpha"))),Dn(x,(()=>Dt(a)),(e=>jt(a,e))),sn(e,c),Jt()}var kr=ln('<button class="badge btn btn-light ml-auto">Specialty</button>'),yr=ln("<span> </span>"),wr=ln('<button>Delete</button> <button class="badge btn badge-dark ml-1"> </button>',1),$r=ln('<input class="form-control mb-1 mr-1">'),xr=ln("<u> </u>"),_r=ln('<div class="flex-grow-1"><button style="min-height: 2.2em;"><!></button></div>'),Sr=ln('<div class="d-flex"><!></div>'),Er=ln('<div class="d-flex"><!></div>'),Dr=ln('<div class="d-flex"><!></div>'),zr=ln('<div class="col-lg-4 col-md-6"><div class="card"><div class="card-body pt-1"><div class="d-flex"><!> <!></div> <div class="d-flex"><!> <h4><button class="badge btn btn-dark"> </button></h4></div> <!> <!> <!></div></div></div>');var Ar=ln('<div class="container-fluid"><div class="row"><div class="col"><div class="card"><div class="card-body"><div class="d-flex"><button class="btn btn-light border mb-1 mr-1">Add skill</button> <div class="dropdown"><button class="dropdown-toggle btn btn-light border mb-1 mr-1">Show skills</button> <div class="dropdown-menu"><button>All</button> <button>Known and learning</button> <button>Known</button></div></div> <button>Lock specialty</button></div> <div class="row mt-2"></div></div></div></div></div></div>');function Or(e,t){qt(t,!1);const n=Ht();let l=Nn(t,"skills",12),r=Nn(t,"bluckTries",8);const a="bg-dark text-light",i={delete:e=>{if(!confirm(`Delete ${e.name}?`))return;let t=l().skills.indexOf(e);l().skills.splice(t,1),l(l().skills=l().skills,!0)},setSpecial:e=>{l().skills.forEach((e=>e.specialty=!1)),e.specialty=!0,l(l().skills=l().skills,!0)}};let s=Ht();function o(e){e.relatedTarget?.className.includes("dropdown-item")||jt(s,"")}Ee((()=>Tt(l())),(()=>{jt(n,l().skills.filter((e=>"all"==l().show||"bluck"==l().show&&(e.rating>0||e.pass>0)||"zero"==l().show&&e.rating>0)))})),Ee((()=>Tt(l())),(()=>{l().skills.forEach((e=>{e.id||(e.id=crypto.randomUUID())}))})),De(),Tn();var c=Ar(),d=de(c),u=de(d),v=de(u),f=de(v),b=de(f),m=de(b),p=ve(m,2),h=de(p),g=ve(h,2);let k;var y=de(g),w=ve(y,2),$=ve(w,2),x=ve(p,2);un(ve(b,2),5,(()=>Dt(n)),(e=>e.id),((e,t,n,a)=>{!function(e,t){qt(t,!1);const n=Ht(),l=Ht(),r=Ht(),a=Ht();let i=Nn(t,"actions",8),s=Nn(t,"skill",12),o=Nn(t,"bluckTries",8),c=Nn(t,"lockspecial",8),d=Ht(!1),u=Ht();function v(){c()||i().setSpecial(s())}function f(){s(s().bluck="Health"==s().bluck?"Will":"Health",!0)}Ee((()=>Tt(c())),(()=>{jt(n,c()?"ml-auto":"ml-1")})),Ee((()=>Tt(s())),(()=>{jt(l,s().rating>=1&&s().rating<s().cap)})),Ee((()=>Tt(s())),(()=>{jt(r,s().rating>=2&&s().rating<s().cap)})),Ee((()=>Tt(s())),(()=>{jt(a,0==s().rating)})),De(),Tn();var b=zr(),m=de(b),p=de(m),h=de(p),g=de(h),k=e=>{var t=kr();en("click",t,v),sn(e,t)};cn(g,(e=>{c()||e(k)}));var y=ve(g,2),w=e=>{var t=yr(),l=de(t);Ae((()=>{yn(t,1,`badge badge-light border border-dark ${Dt(n)??""}`),on(l,s().bluck)})),sn(e,t)},$=e=>{var t=wr(),l=ue(t),r=ve(l,2),a=de(r);Ae((()=>{yn(l,1,`badge btn btn-light ${Dt(n)??""}`),on(a,s().bluck)})),en("click",l,(()=>i().delete(s()))),en("click",r,f),sn(e,t)};cn(y,(e=>{s().readonly?e(w):e($,!1)}));var x=ve(h,2),_=de(x),S=e=>{var t=$r();Cn(t,(e=>jt(u,e)),(()=>Dt(u))),en("blur",t,(()=>jt(d,!1))),Dn(t,(()=>s().name),(e=>s(s().name=e,!0))),sn(e,t)},E=e=>{var t=_r(),n=de(t);yn(n,1,"btn btn-light w-100 text-left font-weight-bold pl-2");var l=de(n),r=e=>{var t=xr(),n=de(t);Ae((()=>on(n,s().name))),sn(e,t)},a=e=>{var t=rn();Ae((()=>on(t,s().name))),sn(e,t)};cn(l,(e=>{s().specialty?e(r):e(a,!1)})),en("click",n,(()=>jt(d,!s().readonly))),sn(e,t)};cn(_,(e=>{Dt(d)?e(S):e(E,!1)}));var D=de(ve(_,2)),z=de(D),A=ve(x,2),O=e=>{var t=Sr();Vn(de(t),{get count(){return s().rating},get value(){return s().pass},set value(e){s(s().pass=e,!0)},children:(e,t)=>{sn(e,rn("Pass"))},$$slots:{default:!0},$$legacy:!0}),sn(e,t)};cn(A,(e=>{Dt(l)&&e(O)}));var C=ve(A,2),T=e=>{var t=Er(),n=de(t);const l=pe((()=>s().rating-1));Vn(n,{get count(){return Dt(l)},get value(){return s().fail},set value(e){s(s().fail=e,!0)},children:(e,t)=>{sn(e,rn("Fail"))},$$slots:{default:!0},$$legacy:!0}),sn(e,t)};cn(C,(e=>{Dt(r)&&e(T)}));var W=ve(C,2),U=e=>{var t=Dr();Vn(de(t),{get count(){return o()},get value(){return s().pass},set value(e){s(s().pass=e,!0)},children:(e,t)=>{sn(e,rn("BL"))},$$slots:{default:!0},$$legacy:!0}),sn(e,t)};cn(W,(e=>{Dt(a)&&e(U)})),Ae((()=>on(z,s().rating))),en("click",D,(function(e){s(s().rating+=e.shiftKey?-1:1,!0),s().rating<0?s(s().rating=s().cap,!0):s().rating>s().cap&&s(s().rating=0,!0)})),sn(e,b),Jt()}(e,{actions:i,get skill(){return Dt(t)},get bluckTries(){return r()},get lockspecial(){return l().lockspecial}})})),Ae((()=>{k=$n(g,"",k,{display:"filter"==Dt(s)?"block":"none"}),yn(y,1,`dropdown-item ${"all"==l().show?a:""}`),yn(w,1,`dropdown-item ${"bluck"==l().show?a:""}`),yn($,1,`dropdown-item ${"zero"==l().show?a:""}`),yn(x,1,"btn border mb-1 "+(l().lockspecial?"btn-dark":"btn-light"))})),en("click",m,(function(){l().skills.push(jn({name:"New Skill",readonly:!1})),l(l().skills=l().skills,!0)})),en("blur",h,o),en("click",h,(()=>jt(s,"filter"))),en("blur",y,o),en("click",y,(()=>l(l().show="all",!0))),en("blur",w,o),en("click",w,(()=>l(l().show="bluck",!0))),en("blur",$,o),en("click",$,(()=>l(l().show="zero",!0))),en("click",x,(()=>(l(l().lockspecial=!l().lockspecial,!0),void l(l().skills=l().skills,!0)))),sn(e,c),Jt()}var Cr=ln('<input class="flex-grow-1 form-control">'),Tr=ln('<h4 class="flex-grow-1"><button class="badge btn btn-light w-100 text-left"> </button></h4>'),Wr=ln('<div class="d-flex ml-auto"><button>Spellbook</button> <button>Scroll</button> <button>Memorized</button></div>'),Ur=ln("<button>Relic</button>"),Pr=ln('<div class="col-md-6"><div class="card"><div class="card-body"><div class="d-flex"><!> <button class="badge btn btn-light">Delete</button></div> <div class="d-flex mt-1 flex-wrap"><h5><button class="badge btn btn-dark w-100 text-left"> </button></h5> <!></div> <div class="d-flex mt-1"></div> <div class="d-flex mt-1"><!></div></div></div></div>');var Nr=ln('<div class="d-flex col-md-6"><h3><span class="align-self-center font-weight-bold mr-1">Memory palace</span></h3> <span> </span> <span class="align-self-center mx-1">/</span> <button class="align-self-center btn btn-dark"> </button></div>'),Ir=ln('<div class="d-flex col-md-6"><h3 style="width: 5em;"><span class="align-self-center font-weight-bold">Burden</span></h3> <button class="align-self-center btn btn-light border border-dark ml-auto">&darr;</button> <button> </button></div>'),Lr=ln('<div class="d-flex col-md-6"><h3><span class="align-self-center font-weight-bold">Urdr</span></h3> <button class="align-self-center btn btn-dark ml-auto"> </button></div>'),Hr=ln('<div class="d-flex col-md-6"><h3><span class="align-self-center font-weight-bold">In Spellbook</span></h3> <span class="align-self-center btn badge-light border ml-auto"> </span></div>'),jr=ln("<button> </button>"),Mr=ln('<div class="container-fluid"><div class="row"><div class="col-12"><div class="card"><div class="card-body"><div class="row"><!> <!> <!> <!></div> <div class="d-flex mt-2"><div class="dropdown"><button class="dropdown-toggle btn btn-light border mb-1 mr-1">Show</button> <div class="dropdown-menu"></div></div> <button class="btn btn-light border mb-1 mr-1">Add spell</button></div> <div class="row mt-2"></div></div></div></div></div></div>');function Fr(e,t){qt(t,!1);const n=Ht(),l=Ht(),r=Ht(),a=Ht(),i=Ht();let s=Nn(t,"spells",12);const o={delete:e=>{if(!confirm(`Delete ${e.name}?`))return;let t=s().spells.indexOf(e);s().spells.splice(t,1),b()},refresh:b};let c=Ht("");function d(e){s(s().burden+=e.shiftKey?-1:1,!0),s().burden<0&&s(s().burden=0,!0)}function u(){s().burden>0&&s(s().burden--,!0)}function v(e){e.relatedTarget?.className.includes("dropdown-item")||jt(c,"")}function f(e){s(s().memory+=e.shiftKey?-1:1,!0),s().memory<0?s(s().memory=9,!0):s().memory>9&&s(s().memory=0,!0)}function b(){s(s().spells=s().spells,!0),s().spells.sort(((e,t)=>e.circle==t.circle?e.name.localeCompare(t.name):e.circle-t.circle))}function m(e){s(s().urdr+=e.shiftKey?-1:1,!0),s().urdr<0?s(s().urdr=9,!0):s().urdr>9&&s(s().urdr=0,!0)}s().spells.forEach((e=>{e.id||(e.id=crypto.randomUUID())})),Ee((()=>Tt(s())),(()=>{jt(n,s().spells.reduce(((e,t)=>e+(t.inventory?t.circle:0)),0))})),Ee((()=>Tt(s())),(()=>{jt(l,s().memory-s().spells.reduce(((e,t)=>e+(t.memorized?t.circle:0)),0))})),Ee((()=>Tt(s())),(()=>{jt(r,s().memory>0?"magician":"theurge")})),Ee((()=>Tt(s())),(()=>{jt(a,(()=>{let e=[{val:"all",text:"All"}];return s().memory>0?e=e.concat([{val:"capacity",text:"Can memorize"},{val:"inventoryScroll",text:"Inventory"},{val:"memory",text:"Memorized"},{val:"scroll",text:"Scrolls"},{val:"inventory",text:"Spellbook"}]):s().urdr>0&&(e=e.concat([{val:"inventory",text:"Relic"},{val:"burden",text:"Within burden"}])),e}))})),Ee((()=>(Tt(s()),Dt(l))),(()=>{jt(i,s().spells.filter((e=>!s().show||"all"==s().show||("burden"==s().show?e.circle<=s().urdr-s().burden:"capacity"==s().show?Dt(l)>=e.circle||e.memorized:"inventory"==s().show?e.inventory:"inventory&scroll"==s().show?e.inventory||e.scroll:"memory"==s().show?e.memorized:"scroll"==s().show?e.scroll:void 0))))})),De(),Tn();var p=Mr(),h=de(p),g=de(h),k=de(g),y=de(k),w=de(y),$=de(w),x=e=>{var t=Nr(),n=ve(de(t),2);let r;var a=de(n),i=ve(n,4),o=de(i);Ae((e=>{r=yn(n,1,"align-self-center btn badge-light border ml-auto",null,r,e),on(a,Dt(l)),on(o,s().memory)}),[()=>({"bg-danger":Dt(l)<0})],pe),en("click",i,f),sn(e,t)};cn($,(e=>{0==s().urdr&&e(x)}));var _=ve($,2),S=e=>{var t=Ir(),n=ve(de(t),2),l=ve(n,2);let r;var a=de(l);Ae((e=>{r=yn(l,1,"align-self-center btn btn-dark",null,r,e),on(a,s().burden)}),[()=>({"bg-danger":s().burden>s().urdr})],pe),en("click",n,u),en("click",l,d),sn(e,t)};cn(_,(e=>{s().urdr>0&&e(S)}));var E=ve(_,2),D=e=>{var t=Lr(),n=ve(de(t),2),l=de(n);Ae((()=>on(l,s().urdr))),en("click",n,m),sn(e,t)};cn(E,(e=>{0==s().memory&&e(D)}));var z=ve(E,2),A=e=>{var t=Hr(),l=ve(de(t),2),r=de(l);Ae((()=>on(r,Dt(n)))),sn(e,t)};cn(z,(e=>{s().memory>0&&e(A)}));var O=ve(w,2),C=de(O),T=de(C),W=ve(T,2);let U;un(W,5,(()=>Dt(a)()),dn,((e,t)=>{var n=jr(),l=de(n);Ae((()=>{yn(n,1,"dropdown-item "+(s().show==Dt(t).val?"bg-dark text-light":"")),on(l,Dt(t).text)})),en("blur",n,v),en("click",n,(()=>s(s().show=Dt(t).val,!0))),sn(e,n)}));var P=ve(C,2);un(ve(O,2),5,(()=>Dt(i)),(e=>e.id),((e,t)=>{!function(e,t){qt(t,!1);const n=Ht(),l=Ht(),r=Ht();let a=Nn(t,"actions",8),i=Nn(t,"spell",12),s=Nn(t,"caster",8);const o=["1st Circle","2nd Circle","3rd Circle","4th Circle","5th Circle"];let c=Ht(),d=Ht(!1);function u(){i(i().inventory=!i().inventory,!0),a().refresh()}function v(){i(i().memorized=!i().memorized,!0),a().refresh()}Ee((()=>Tt(i())),(()=>{jt(n,i().inventory?"btn-dark":"btn-light border")})),Ee((()=>Tt(i())),(()=>{jt(l,i().scroll?"btn-dark":"btn-light border")})),Ee((()=>Tt(i())),(()=>{jt(r,i().memorized?"btn-dark":"btn-light border")})),De(),Tn();var f=Pr(),b=de(f),m=de(b),p=de(m),h=de(p),g=e=>{var t=Cr();Cn(t,(e=>jt(c,e)),(()=>Dt(c))),en("blur",t,(()=>jt(d,!1))),Dn(t,(()=>i().name),(e=>i(i().name=e,!0))),sn(e,t)},k=e=>{var t=Tr(),n=de(t),l=de(n);Ae((()=>on(l,i().name))),en("click",n,(()=>jt(d,!0))),sn(e,t)};cn(h,(e=>{Dt(d)?e(g):e(k,!1)}));var y=ve(h,2),w=ve(p,2),$=de(w),x=de($),_=de(x),S=ve($,2),E=e=>{var t=Wr(),a=de(t),s=ve(a,2),o=ve(s,2);Ae((()=>{yn(a,1,`btn ${Dt(n)??""} mr-1`),yn(s,1,`btn ${Dt(l)??""} mr-1`),yn(o,1,`btn ${Dt(r)??""} mr-1`)})),en("click",a,u),en("click",s,(()=>i(i().scroll=!i().scroll,!0))),en("click",o,v),sn(e,t)},D=(e,t)=>{var l=e=>{var t=Ur();Ae((()=>yn(t,1,`btn ${Dt(n)??""} ml-auto mr-1`))),en("click",t,(()=>i(i().inventory=!i().inventory,!0))),sn(e,t)};cn(e,(e=>{"theurge"==s()&&e(l)}),t)};cn(S,(e=>{"magician"==s()?e(E):e(D,!1)})),bl(de(ve(w,4)),{get content(){return i().description},set content(e){i(i().description=e,!0)},$$legacy:!0}),Ae((()=>on(_,o[i().circle-1]))),en("click",y,(()=>a().delete(i()))),en("click",x,(function(e){i(i().circle+=e.shiftKey?-1:1,!0),i().circle>5?i(i().circle=1,!0):i().circle<1&&i(i().circle=5,!0),a().refresh()})),sn(e,f),Jt()}(e,{get spell(){return Dt(t)},get caster(){return Dt(r)},actions:o})})),Ae((()=>U=$n(W,"",U,{display:"filters"==Dt(c)?"block":"none"}))),en("blur",T,v),en("click",T,(()=>jt(c,"filters"))),en("click",P,(function(){s().spells.push({id:crypto.randomUUID(),name:"~new spell",circle:1,memorized:!1,inventory:!1,scroll:!1,description:"Enter a description"}),b()})),sn(e,p),Jt()}var Rr=ln('<input class="form-control mb-1 mr-1">'),Vr=ln('<button class="btn btn-light w-100 text-left font-weight-bold flex-grow-1"> </button>'),Kr=ln("<button>+1D</button>"),Br=ln("<button>+1D</button>"),qr=ln('<div class="col-md-6"><div class="card"><div class="card-body"><div class="d-flex mb-1"><!> <button tabindex="0" class="btn btn-dark"> </button></div> <div class="d-flex"><div class="btn-group"><!> <!></div> <div class="btn-group ml-1"><button>&check;</button> <button>&check;</button> <button>Used</button></div> <button class="btn btn-light border border-dark ml-auto">Delete</button></div></div></div></div>');var Jr=ln('<div class="row"><div class="col-md-12"><button class="btn btn-light border mb-1">Add trait</button></div></div>'),Gr=ln('<div class="card-body"><div class="btn-group position-topright"><button class="btn badge btn-light border border-dark">?</button></div> <!> <div class="row"></div></div>'),Zr=ln('<div class="card-header"><h5 class="card-title">Traits</h5> <button class="close position-topright" type="button">&cross;</button></div> <div class="card-body"><p>Traits grant bonuses by level:</p> <ul><li>Level 1 traits grant +1D to a relevent test once per session</li> <li>Level 2 traits grant +1D to a relevent test twice per session</li> <li>Level 3 traits grant +1s to all relevent tests</li></ul> <p>Each trait can be used once per session to generate up to two checks.</p> <ul><li>One check is generated when used to apply a -1D penalty to an independent or versus test</li> <li>Two checks are generated when used to grant an opponent a +2D advantage in a versus test</li> <li>Two checks are generated when used to break a tie in an opponent\'s favor in a versus test</li></ul></div>',1),Qr=ln('<div class="container-fluid"><div class="card"><!></div></div>');function Yr(e,t){qt(t,!1);let n=Nn(t,"traits",12);const l={delete:e=>{if(!confirm(`Delete ${e.name}?`))return;let t=n().indexOf(e);n().splice(t,1),n(n())}};let r=Ht(!1);function a(){n().push({id:crypto.randomUUID(),name:"New trait",level:1,used:0,usedAgainst:!1,checks:0}),n(n())}Ee((()=>Tt(n())),(()=>{n().forEach((e=>{e.id||(e.id=crypto.randomUUID())}))})),De(),Tn();var i=Qr(),s=de(i),o=de(s),c=e=>{var t=Gr(),i=de(t),s=de(i),o=ve(i,2),c=e=>{var t=Jr(),n=de(t);en("click",de(n),a),sn(e,t)};cn(o,(e=>{n().length<4&&e(c)})),un(ve(o,2),5,n,(e=>e.id),((e,t)=>{!function(e,t){qt(t,!1);let n=Nn(t,"actions",8),l=Nn(t,"trait",12),r=Ht(!1),a=Ht();function i(e){l().checks==e?l(l().checks--,!0):l(l().checks=e,!0)}function s(e){l().used==e?l(l().used--,!0):l(l().used=e,!0)}Tn();var o=qr(),c=de(o),d=de(c),u=de(d),v=de(u),f=e=>{var t=Rr();Cn(t,(e=>jt(a,e)),(()=>Dt(a))),en("blur",t,(()=>jt(r,!1))),Dn(t,(()=>l().name),(e=>l(l().name=e,!0))),sn(e,t)},b=e=>{var t=Vr(),n=de(t);Ae((()=>on(n,l().name))),en("click",t,(()=>jt(r,!0))),sn(e,t)};cn(v,(e=>{Dt(r)?e(f):e(b,!1)}));var m=ve(v,2),p=de(m),h=de(ve(u,2)),g=de(h),k=e=>{var t=Kr();Ae((()=>yn(t,1,"border border-dark btn "+(l().used>=1?"btn-dark":"btn-light")))),en("click",t,(()=>s(1))),sn(e,t)};cn(g,(e=>{l().level<3&&e(k)}));var y=ve(g,2),w=e=>{var t=Br();Ae((()=>yn(t,1,"border border-dark btn "+(l().used>=2?"btn-dark":"btn-light")))),en("click",t,(()=>s(2))),sn(e,t)};cn(y,(e=>{2==l().level&&e(w)}));var $=ve(h,2),x=de($),_=ve(x,2),S=ve(_,2),E=ve($,2);Ae((()=>{on(p,l().level),yn(x,1,"border border-dark btn "+(l().checks>=1?"btn-dark":"btn-light")),yn(_,1,"border border-dark btn "+(l().checks>=2?"btn-dark":"btn-light")),yn(S,1,`btn ${l().usedAgainst?"btn-dark":"btn-light"} border border-dark`)})),en("click",m,(function(e){l(l().level+=e.shiftKey?-1:1,!0),l().level>3?l(l().level=1,!0):l().level<1&&l(l().level=3,!0)})),en("click",x,(()=>i(1))),en("click",_,(()=>i(2))),en("click",S,(()=>l(l().usedAgainst=!l().usedAgainst,!0))),en("click",E,(()=>n().delete(l()))),sn(e,o),Jt()}(e,{get trait(){return Dt(t)},actions:l})})),en("click",s,(()=>jt(r,!0))),sn(e,t)},d=e=>{var t=Zr();en("click",ve(de(ue(t)),2),(()=>jt(r,!1))),sn(e,t)};cn(o,(e=>{Dt(r)?e(d,!1):e(c)})),sn(e,i),Jt()}var Xr=ln('<input class="form-control mb-1 mr-1">'),ea=ln('<button class="btn btn-light border mb-1 mr-1 w-100 text-left"> </button>'),ta=ln('<div class="d-flex"><!> <button class="btn btn-light border ml-auto mb-1">Delete</button></div>'),na=ln('<input class="form-control mb-1">'),la=ln('<button class="btn btn-light w-100 text-left font-weight-bold" style="min-height: 2.2em;"> </button>'),ra=ln('<div class="col-md-6"><div class="card"><div class="card-body"><div class="d-flex mb-1"><!></div> <div class="d-flex"><div class="btn-group"><button>Pass</button> <button>Fail</button> <button>Fate</button> <button>Persona</button></div> <button class="btn btn-light border ml-auto">Forget</button></div></div></div></div>');function aa(e,t){qt(t,!1);let n=Nn(t,"actions",8),l=Nn(t,"wise",12),r=Ht(),a=Ht(!1);Tn();var i=an(),s=ue(i),o=e=>{var t=ta(),i=de(t),s=e=>{var t=Xr();Cn(t,(e=>jt(r,e)),(()=>Dt(r))),en("blur",t,(()=>jt(a,!1))),Dn(t,(()=>l().name),(e=>l(l().name=e,!0))),sn(e,t)},o=e=>{var t=ea(),n=de(t);Ae((()=>on(n,l().name))),en("click",t,(()=>jt(a,!0))),sn(e,t)};cn(i,(e=>{Dt(a)?e(s):e(o,!1)})),en("click",ve(i,2),(()=>n().delete(l()))),sn(e,t)},c=e=>{var t=ra(),i=de(t),s=de(i),o=de(s),c=de(o),d=e=>{var t=na();Cn(t,(e=>jt(r,e)),(()=>Dt(r))),en("blur",t,(()=>jt(a,!1))),Dn(t,(()=>l().name),(e=>l(l().name=e,!0))),sn(e,t)},u=e=>{var t=la(),n=de(t);Ae((()=>on(n,l().name))),en("click",t,(()=>jt(a,!0))),sn(e,t)};cn(c,(e=>{Dt(a)?e(d):e(u,!1)}));var v=de(ve(o,2)),f=de(v),b=ve(f,2),m=ve(b,2),p=ve(m,2),h=ve(v,2);Ae((()=>{yn(f,1,`btn ${l().pass?"btn-dark":"btn-light"} border border-dark`),yn(b,1,`btn ${l().fail?"btn-dark":"btn-light"} border border-dark`),yn(m,1,`btn ${l().fate?"btn-dark":"btn-light"} border border-dark`),yn(p,1,`btn ${l().persona?"btn-dark":"btn-light"} border border-dark`)})),en("click",f,(()=>l(l().pass=!l().pass,!0))),en("click",b,(()=>l(l().fail=!l().fail,!0))),en("click",m,(()=>l(l().fate=!l().fate,!0))),en("click",p,(()=>l(l().persona=!l().persona,!0))),en("click",h,(()=>{l(l().old=!0,!0),n().refresh()})),sn(e,t)};cn(s,(e=>{l().old?e(o):e(c,!1)})),sn(e,i),Jt()}var ia=ln('<div class="row"><div class="col-md-12"><button class="btn btn-light border mb-1">Add wise</button></div></div>'),sa=ln('<div class="card-body"><div class="btn-group position-topright"><button class="btn badge btn-light border border-dark">?</button></div> <!> <div class="row"></div></div>'),oa=ln('<div class="card-header"><h5 class="card-title">Wises</h5> <button class="close position-topright" type="button">&cross;</button></div> <div class="card-body"><p>Wises can be used to help others in place of a relevent skill. Doing so isolates the helping character from receiving conditions from the test.</p> <p>Wises can be used to salvage a failed roll:</p> <ul><li><strong>Deeper understanding</strong> Spend a point of fate to reroll a single failed die</li> <li><strong>Of course!</strong> Spend a point of persona to reroll all failed dice</li></ul> <p>Once a wise has been used to help another in a failed and successful test, as well as <strong>deeper understanding</strong> and <strong>of course!</strong>, the wise may be replaced with another, or a test for advancement may be marked for a skill related\n                to the wise.</p></div>',1),ca=ln('<div class="card"><div class="card-body"><h4>Previous Wises</h4> <div class="d-flex flex-column"></div></div></div>'),da=ln('<div class="container-fluid"><div class="card"><!></div> <!></div>');var ua=ln('<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/vinorodrigues/bootstrap-dark@0.6.1/dist/bootstrap-dark.min.css">'),va=ln('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">'),fa=ln('<main id="app"><!> <!> <!></main>');const ba=new function(e,t){qt(t,!1);let n=Ht(Mn()),l=Ht("bio");Tn();var r=fa();!function(e){var t;t=document.head.appendChild(se());try{Oe((()=>e(t)),q)}finally{}}((e=>{var t=an(),n=ue(t),l=e=>{sn(e,ua())},r=e=>{sn(e,va())};cn(n,(e=>{"dark"==ir?e(l):e(r,!1)})),sn(e,t)}));var a=de(r);ur(a,{get model(){return Dt(n)},set model(e){jt(n,e)},get tab(){return Dt(l)},set tab(e){jt(l,e)},$$legacy:!0});var i=ve(a,2);!function(e,t){qt(t,!1);let n=Nn(t,"model",28,Mn),l=Ht(!0),r=Ht(!1);const a=[{title:"Fresh",text:"+1D to all tests (except circles and resources) until other condition."},{title:"Hungry and Thirsty",text:"-1 disposition to any conflict."},{title:"Angry (Ob 2 Will)",text:"Can't use wises or beneficial traits."},{title:"Afraid (Ob 3 Will)",text:"Can't help or use Beginner's Luck."},{title:"Exhausted (Ob 3 Health)",text:"-1 disposition to any conflict. Instinct takes a turn and carries a -1s penalty."},{title:"Injured (Ob 4 Health)",text:"-1D to skills, Nature, Will, and Health (but not recovery)."},{title:"Sick (Ob 3 Will)",text:"-1D to skills, Nature, Will, and Health (but not recovery). Can't practice, learn, or advance."},{title:"Dead",text:"May not use wises, test, or help."}];Tn();var i=an(),s=ue(i),o=e=>{var t=Ll(),i=de(t),s=de(i),o=e=>{var t=Pl(),a=ue(t),i=de(a);Ul(i,{get selected(){return n().conditions.fresh},set selected(e){n(n().conditions.fresh=e,!0)},children:(e,t)=>{sn(e,rn("Fresh"))},$$slots:{default:!0},$$legacy:!0});var s=ve(i,2);Ul(s,{get selected(){return n().conditions.hungry},set selected(e){n(n().conditions.hungry=e,!0)},children:(e,t)=>{sn(e,rn("Hungry and Thirsty"))},$$slots:{default:!0},$$legacy:!0});var o=ve(s,2);Ul(o,{get selected(){return n().conditions.angry},set selected(e){n(n().conditions.angry=e,!0)},children:(e,t)=>{sn(e,rn("Angry"))},$$slots:{default:!0},$$legacy:!0});var c=ve(o,2);Ul(c,{get selected(){return n().conditions.afraid},set selected(e){n(n().conditions.afraid=e,!0)},children:(e,t)=>{sn(e,rn("Afraid"))},$$slots:{default:!0},$$legacy:!0});var d=ve(c,2);Ul(d,{get selected(){return n().conditions.exhausted},set selected(e){n(n().conditions.exhausted=e,!0)},children:(e,t)=>{sn(e,rn("Exhausted"))},$$slots:{default:!0},$$legacy:!0});var u=ve(d,2);Ul(u,{get selected(){return n().conditions.injured},set selected(e){n(n().conditions.injured=e,!0)},children:(e,t)=>{sn(e,rn("Injured"))},$$slots:{default:!0},$$legacy:!0});var v=ve(u,2);Ul(v,{get selected(){return n().conditions.sick},set selected(e){n(n().conditions.sick=e,!0)},children:(e,t)=>{sn(e,rn("Sick"))},$$slots:{default:!0},$$legacy:!0}),Ul(ve(v,2),{get selected(){return n().conditions.dead},set selected(e){n(n().conditions.dead=e,!0)},children:(e,t)=>{sn(e,rn("Dead"))},$$slots:{default:!0},$$legacy:!0});var f=de(ve(a,2)),b=ve(f,2);en("click",f,(()=>jt(r,!0))),en("click",b,(()=>jt(l,!1))),sn(e,t)},c=e=>{var t=Il(),n=ue(t),l=ve(de(n),2);un(ve(n,2),5,(()=>a),dn,((e,t)=>{var n=Nl(),l=ue(n),r=de(l),a=de(ve(l,2));Ae((()=>{on(r,Dt(t).title),on(a,Dt(t).text)})),sn(e,n)})),en("click",l,(()=>jt(r,!1))),sn(e,t)};cn(s,(e=>{Dt(r)?e(c,!1):e(o)})),sn(e,t)},c=e=>{var t=Hl();en("click",de(t),(()=>jt(l,!0))),sn(e,t)};cn(s,(e=>{Dt(l)?e(o):e(c,!1)})),sn(e,i),Jt()}(i,{get model(){return Dt(n)}});var s=ve(i,2),o=e=>{!function(e,t){qt(t,!1);let n=Nn(t,"model",12);function l(e,t){let l=n().abilities[t.ability]+(e.shiftKey?-1:1);l<0&&(l=t.max),l>t.max&&(l=0),n(n().abilities[t.ability]=l,!0)}Tn();var r=rl(),a=de(r),i=de(a),s=de(i);Bn(s,{get ability(){return n().abilities.will}});var o=ve(s,2);Bn(o,{get ability(){return n().abilities.health}}),ll(ve(o,2),{get nature(){return n().abilities.nature}});var c=de(ve(i,2));Bn(c,{get ability(){return n().abilities.resources}});var d=ve(c,2);Bn(d,{get ability(){return n().abilities.circles}});var u=ve(d,2),v=de(u),f=ve(de(v),2),b=de(f),m=de(ve(f,2)),p=de(m),h=ve(u,2),g=de(h),k=ve(de(g),2),y=de(k),w=de(y),$=de(ve(h,2)),x=ve(de($),2),_=de(x),S=de(_);Ae((()=>{Sn(r,"id",`$${this.id??""}`),on(p,n().abilities.lifestyle),on(w,n().abilities.might),on(S,n().abilities.precedence)})),en("click",b,(()=>n(n().abilities.lifestyle=0,!0))),en("click",m,(e=>l(e,{max:99,ability:"lifestyle"}))),en("click",y,(e=>l(e,{max:8,ability:"might"}))),en("click",_,(e=>l(e,{max:7,ability:"precedence"}))),sn(e,r),Jt()}(e,{get model(){return Dt(n)}})},c=(e,t)=>{var r=e=>{dl(e,{get model(){return Dt(n)}})},a=(e,t)=>{var r=e=>{!function(e,t){qt(t,!1);let n=Nn(t,"model",12);Tn();var l=gl(),r=de(l),a=de(r),i=de(a),s=de(i);hl(s,{get content(){return n().bio.name},set content(e){n(n().bio.name=e,!0)},children:(e,t)=>{sn(e,rn("Name"))},$$slots:{default:!0},$$legacy:!0});var o=ve(s,2);hl(o,{get content(){return n().bio.stock},set content(e){n(n().bio.stock=e,!0)},children:(e,t)=>{sn(e,rn("Stock"))},$$slots:{default:!0},$$legacy:!0});var c=ve(o,2);hl(c,{get content(){return n().bio.classValue},set content(e){n(n().bio.classValue=e,!0)},children:(e,t)=>{sn(e,rn("Class"))},$$slots:{default:!0},$$legacy:!0});var d=ve(c,2);hl(d,{get content(){return n().bio.home},set content(e){n(n().bio.home=e,!0)},children:(e,t)=>{sn(e,rn("Home"))},$$slots:{default:!0},$$legacy:!0});var u=ve(d,2);hl(u,{get content(){return n().bio.raiment},set content(e){n(n().bio.raiment=e,!0)},children:(e,t)=>{sn(e,rn("Raiment"))},$$slots:{default:!0},$$legacy:!0});var v=ve(u,2);hl(v,{get content(){return n().bio.epithet},set content(e){n(n().bio.epithet=e,!0)},children:(e,t)=>{sn(e,rn("Epithet"))},$$slots:{default:!0},$$legacy:!0});var f=ve(v,2);hl(f,{get content(){return n().bio.parents},set content(e){n(n().bio.parents=e,!0)},children:(e,t)=>{sn(e,rn("Parents"))},$$slots:{default:!0},$$legacy:!0});var b=ve(f,2);hl(b,{get content(){return n().bio.mentor},set content(e){n(n().bio.mentor=e,!0)},children:(e,t)=>{sn(e,rn("Mentor"))},$$slots:{default:!0},$$legacy:!0});var m=ve(b,2);hl(m,{get content(){return n().bio.age},set content(e){n(n().bio.age=e,!0)},children:(e,t)=>{sn(e,rn("Age"))},$$slots:{default:!0},$$legacy:!0}),hl(ve(m,2),{get content(){return n().bio.level},set content(e){n(n().bio.level=e,!0)},children:(e,t)=>{sn(e,rn("Level"))},$$slots:{default:!0},$$legacy:!0});var p=de(ve(r,2)),h=de(p),g=de(h);bl(de(g),{get content(){return n().bio.belief},set content(e){n(n().bio.belief=e,!0)},children:(e,t)=>{sn(e,rn("Belief"))},$$slots:{default:!0},$$legacy:!0});var k=ve(g,2);bl(de(k),{get content(){return n().bio.creed},set content(e){n(n().bio.creed=e,!0)},children:(e,t)=>{sn(e,rn("Creed"))},$$slots:{default:!0},$$legacy:!0});var y=ve(k,2);bl(de(y),{get content(){return n().bio.goal},set content(e){n(n().bio.goal=e,!0)},children:(e,t)=>{sn(e,rn("Goal"))},$$slots:{default:!0},$$legacy:!0}),bl(de(ve(y,2)),{get content(){return n().bio.instinct},set content(e){n(n().bio.instinct=e,!0)},children:(e,t)=>{sn(e,rn("Instinct"))},$$slots:{default:!0},$$legacy:!0}),Ae((()=>Sn(l,"id",`$${this.id??""}`))),sn(e,l),Jt()}(e,{get model(){return Dt(n)}})},a=(e,t)=>{var r=e=>{!function(e,t){qt(t,!1);let n=Nn(t,"circles",12);n().followers||n(n().followers=[],!0),Tn();var l=Tl(),r=de(l);Cl(r,{get followers(){return n().followers}});var a=de(ve(r,2));$l(de(a),{get items(){return n().friends},children:(e,t)=>{sn(e,rn("Friends"))},$$slots:{default:!0}}),$l(de(ve(a,2)),{get items(){return n().enemies},children:(e,t)=>{sn(e,rn("Enemies"))},$$slots:{default:!0}}),sn(e,l),Jt()}(e,{get circles(){return Dt(n).circles}})},a=(e,t)=>{var r=e=>{!function(e,t){qt(t,!1);let n,l=Nn(t,"inventory",12),r=Ht(),a=Ht();const i={delete:e=>{if(!confirm(`Delete ${e.name} permanently?`))return;let t=l().indexOf(e);l().splice(t,1),l(l())},dragEnd:e=>{if(e){let t=n.items.indexOf(Dt(r));n.items.splice(t,1),e.items.push(Dt(r))}jt(r,null),n=null,jt(a,null),l(l())},dragStart:(e,t)=>{n=e,jt(r,t),l(l())},hide:e=>{e.hide=!0,l(l())},select:(e,t)=>{n=e,jt(a,Dt(a)==t?null:t),l(l())},selectEnd:e=>{let t=n.items.indexOf(Dt(a));n.items.splice(t,1),e.items.push(Dt(a)),jt(a,null),n=null,l(l())}};Ee((()=>Tt(l())),(()=>{l().forEach((e=>{e.id||(e.id=crypto.randomUUID())}))})),De(),Tn();var s=er(),o=de(s),c=de(o),d=de(c),u=ve(de(d),2),v=de(u);un(ve(v,2),5,l,dn,((e,t,n,l)=>{var r=an(),a=ue(r),i=e=>{var n=Xl(),r=de(n);Ae((()=>on(r,Dt(t).name))),en("click",n,(()=>(Dt(t).hide=!1,zt((()=>l()))))),sn(e,n)};cn(a,(e=>{Dt(t).hide&&e(i)})),sn(e,r)})),un(ve(c,2),1,l,(e=>e.id),((e,t,n,l)=>{var s=an(),o=ue(s),c=e=>{Yl(e,{get container(){return Dt(t)},get dragItem(){return Dt(r)},actions:i,get selected(){return Dt(a)}})};cn(o,(e=>{Dt(t).hide||e(c)})),sn(e,s)})),en("click",v,(function(){let e=Hn({name:"new container",size:1,format:"custom"});l().push(e),l(l())})),sn(e,s),Jt()}(e,{get inventory(){return Dt(n).inventory}})},a=(e,t)=>{var r=e=>{gr(e,{get notes(){return Dt(n).notes}})},a=(e,t)=>{var r=e=>{Or(e,{get skills(){return Dt(n).skills},get bluckTries(){return Dt(n).abilities.nature.maximum}})},a=(e,t)=>{var r=e=>{Fr(e,{get spells(){return Dt(n).spells}})},a=(e,t)=>{var r=e=>{Yr(e,{get traits(){return Dt(n).traits}})},a=(e,t)=>{var r=e=>{!function(e,t){qt(t,!1);const n=Ht(),l=Ht();let r=Nn(t,"wises",12);const a={delete:e=>{if(!confirm(`Delete ${e.name}?`))return;let t=r().indexOf(e);r().splice(t,1),o()},refresh:o};let i=Ht(!1);function s(){r().push({id:crypto.randomUUID(),name:"New wise",pass:!1,fail:!1,fate:!1,persona:!1}),o()}function o(){r(r())}Ee((()=>Tt(r())),(()=>{jt(n,r().filter((e=>!e.old)))})),Ee((()=>Tt(r())),(()=>{jt(l,r().filter((e=>e.old)))})),Ee((()=>Tt(r())),(()=>{r().forEach((e=>{e.id||(e.id=crypto.randomUUID())}))})),De(),Tn();var c=da(),d=de(c),u=de(d),v=e=>{var t=sa(),l=de(t),r=de(l),o=ve(l,2),c=e=>{var t=ia(),n=de(t);en("click",de(n),s),sn(e,t)};cn(o,(e=>{Dt(n).length<4&&e(c)})),un(ve(o,2),5,(()=>Dt(n)),(e=>e.id),((e,t)=>{aa(e,{get wise(){return Dt(t)},actions:a})})),en("click",r,(()=>jt(i,!0))),sn(e,t)},f=e=>{var t=oa();en("click",ve(de(ue(t)),2),(()=>jt(i,!1))),sn(e,t)};cn(u,(e=>{Dt(i)?e(f,!1):e(v)}));var b=ve(d,2),m=e=>{var t=ca(),n=de(t);un(ve(de(n),2),5,(()=>Dt(l)),(e=>e.id),((e,t)=>{aa(e,{get wise(){return Dt(t)},actions:a})})),sn(e,t)};cn(b,(e=>{Dt(l).length>0&&e(m)})),sn(e,c),Jt()}(e,{get wises(){return Dt(n).wises}})};cn(e,(e=>{"wises"==Dt(l)&&e(r)}),t)};cn(e,(e=>{"traits"==Dt(l)?e(r):e(a,!1)}),t)};cn(e,(e=>{"spells"==Dt(l)?e(r):e(a,!1)}),t)};cn(e,(e=>{"skills"==Dt(l)?e(r):e(a,!1)}),t)};cn(e,(e=>{"notes"==Dt(l)?e(r):e(a,!1)}),t)};cn(e,(e=>{"inventory"==Dt(l)?e(r):e(a,!1)}),t)};cn(e,(e=>{"circles"==Dt(l)?e(r):e(a,!1)}),t)};cn(e,(e=>{"bio"==Dt(l)?e(r):e(a,!1)}),t)};cn(e,(e=>{"advancement"==Dt(l)?e(r):e(a,!1)}),t)};cn(s,(e=>{"abilities"==Dt(l)?e(o):e(c,!1)})),sn(e,r),Jt()}({target:document.body,props:{}});return ba}();
//# sourceMappingURL=bundle.js.map
