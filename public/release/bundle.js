var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function c(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e,n,l){if(t){const c=r(t,e,n,l);return t[0](c)}}function r(t,e,n,l){return t[1]&&l?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](l(e))):n.ctx}function i(t,e,n,l){if(t[2]&&l){const c=t[2](l(n));if(void 0===e.dirty)return c;if("object"==typeof c){const t=[],n=Math.max(e.dirty.length,c.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|c[l];return t}return e.dirty|c}return e.dirty}function a(t,e,n,l,c,o){if(c){const s=r(e,n,l,o);t.p(s,c)}}function u(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function d(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function b(t){return document.createTextNode(t)}function g(){return b(" ")}function h(){return b("")}function v(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function w(t,e,n,l){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function C(t,e,n){t.classList[n?"add":"remove"](e)}let S;function z(t){S=t}function D(){if(!S)throw new Error("Function called outside component initialization");return S}function _(t){D().$$.after_update.push(t)}function T(){const t=D();return(e,n,{cancelable:l=!1}={})=>{const c=t.$$.callbacks[e];if(c){const o=function(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(t,n,l,e),c}(e,n,{cancelable:l});return c.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}const H=[],M=[];let E=[];const W=[],L=Promise.resolve();let A=!1;function q(t){E.push(t)}function I(t){W.push(t)}const N=new Set;let U=0;function O(){if(0!==U)return;const t=S;do{try{for(;U<H.length;){const t=H[U];U++,z(t),P(t.$$)}}catch(t){throw H.length=0,U=0,t}for(z(null),H.length=0,U=0;M.length;)M.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];N.has(e)||(N.add(e),e())}E.length=0}while(H.length);for(;W.length;)W.pop()();A=!1,N.clear(),z(t)}function P(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const F=new Set;let V;function j(){V={r:0,c:[],p:V}}function B(){V.r||l(V.c),V=V.p}function K(t,e){t&&t.i&&(F.delete(t),t.i(e))}function R(t,e,n,l){if(t&&t.o){if(F.has(t))return;F.add(t),V.c.push((()=>{F.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}else l&&l()}function J(t,e){R(t,1,1,(()=>{e.delete(t.key)}))}function G(t,e,n,c,o,s,r,i,a,u,d,f){let m=t.length,p=s.length,$=m;const b={};for(;$--;)b[t[$].key]=$;const g=[],h=new Map,v=new Map,k=[];for($=p;$--;){const t=f(o,s,$),l=n(t);let i=r.get(l);i?c&&k.push((()=>i.p(t,e))):(i=u(l,t),i.c()),h.set(l,g[$]=i),l in b&&v.set(l,Math.abs($-b[l]))}const x=new Set,y=new Set;function w(t){K(t,1),t.m(i,d),r.set(t.key,t),d=t.first,p--}for(;m&&p;){const e=g[p-1],n=t[m-1],l=e.key,c=n.key;e===n?(d=e.first,m--,p--):h.has(c)?!r.has(l)||x.has(l)?w(e):y.has(c)?m--:v.get(l)>v.get(c)?(y.add(l),w(e)):(x.add(c),m--):(a(n,r),m--)}for(;m--;){const e=t[m];h.has(e.key)||a(e,r)}for(;p;)w(g[p-1]);return l(k),g}function Z(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function Q(t){t&&t.c()}function Y(t,n,o,s){const{fragment:r,after_update:i}=t.$$;r&&r.m(n,o),s||q((()=>{const n=t.$$.on_mount.map(e).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...n):l(n),t.$$.on_mount=[]})),i.forEach(q)}function X(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];E.forEach((l=>-1===t.indexOf(l)?e.push(l):n.push(l))),n.forEach((t=>t())),E=e}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(t,e){-1===t.$$.dirty[0]&&(H.push(t),A||(A=!0,L.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function et(e,c,o,s,r,i,a,u=[-1]){const d=S;z(e);const f=e.$$={fragment:null,ctx:[],props:i,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:c.target||d.$$.root};a&&a(f.root);let p=!1;if(f.ctx=o?o(e,c.props||{},((t,n,...l)=>{const c=l.length?l[0]:n;return f.ctx&&r(f.ctx[t],f.ctx[t]=c)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](c),p&&tt(e,t)),n})):[],f.update(),p=!0,l(f.before_update),f.fragment=!!s&&s(f.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);f.fragment&&f.fragment.l(t),t.forEach(m)}else f.fragment&&f.fragment.c();c.intro&&K(e.$$.fragment),Y(e,c.target,c.anchor,c.customElement),O()}z(d)}class nt{$destroy(){X(this,1),this.$destroy=t}$on(e,n){if(!c(n))return t;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const t=l.indexOf(n);-1!==t&&l.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const lt=({name:t,cap:e})=>({name:t,cap:e,rating:0,pass:0,fail:0}),ct=()=>({health:lt({name:"Health",cap:7}),will:lt({name:"Will",cap:7}),nature:{current:3,maximum:3,pass:0,fail:0,descriptors:[]},resources:lt({name:"Resources",cap:10}),circles:lt({name:"Circles",cap:10}),lifestyle:0,might:3,precedence:0}),ot=({name:t,size:e,format:n})=>({id:crypto.randomUUID(),name:t,size:e,format:n,items:[]}),st=({name:t="",bluck:e="Health",readonly:n=!0,special:l=!1})=>({id:crypto.randomUUID(),name:t,bluck:e,readonly:n,special:l,cap:7,rating:0,pass:0,fail:0}),rt=()=>({navbar:{tab:"bio"},abilities:ct(),advancement:{currentFate:0,currentPersona:0,spentFate:0,spentPersona:0,levelBenefits:[]},bio:{name:"",parents:"",mentor:"",age:"",home:"",level:"",raiment:"",stock:"",classValue:"",belief:"",creed:"",goal:"",instinct:"",epithet:""},circles:{friends:[],enemies:[]},conditions:{shown:!0,fresh:!1,hungry:!1,angry:!1,afraid:!1,exhausted:!1,injured:!1,sick:!1,dead:!1},inventory:[ot({name:"Head",size:1,format:"static"}),ot({name:"Neck",size:1,format:"static"}),ot({name:"Hands (worn)",size:2,format:"static"}),ot({name:"Hands (carried)",size:2,format:"static"}),ot({name:"Feet",size:1,format:"static"}),ot({name:"Torso",size:3,format:"static"}),ot({name:"Belt",size:3,format:"static"}),ot({name:"Pockets",size:1,format:"pockets"}),ot({name:"Backpack",size:6,format:"pack"}),ot({name:"Ground",size:1,format:"pockets"}),ot({name:"Stash",size:12,format:"stash"})],mod:"torchbearer",notes:[],skills:{show:"all",lockSpecialty:!1,skills:[st({name:"Alchemist",bluck:"Will"}),st({name:"Arcanist",bluck:"Will"}),st({name:"Armorer",bluck:"Health"}),st({name:"Cartographer",bluck:"Will",special:!0}),st({name:"Commander",bluck:"Will"}),st({name:"Cook",bluck:"Will",special:!0}),st({name:"Criminal",bluck:"Health",special:!0}),st({name:"Dungeoneer",bluck:"Health",special:!0}),st({name:"Fighter",bluck:"Health"}),st({name:"Haggler",bluck:"Will",special:!0}),st({name:"Healer",bluck:"Will",special:!0}),st({name:"Hunter",bluck:"Health",special:!0}),st({name:"Lore Master",bluck:"Will"}),st({name:"Manipulator",bluck:"Will",special:!0}),st({name:"Mentor",bluck:"Will"}),st({name:"Orator",bluck:"Will",special:!0}),st({name:"Pathfinder",bluck:"Health",special:!0}),st({name:"Persuader",bluck:"Will",special:!0}),st({name:"Rider",bluck:"Health",special:!0}),st({name:"Ritualist",bluck:"Will"}),st({name:"Sapper",bluck:"Health",special:!0}),st({name:"Scavenger",bluck:"Health",special:!0}),st({name:"Scholar",bluck:"Will"}),st({name:"Scout",bluck:"Will",special:!0}),st({name:"Survivalist",bluck:"Health",special:!0}),st({name:"Theologian",bluck:"Will"})]},spells:{burden:0,urdr:0,memory:0,spells:[]},traits:[],wises:[]});function it(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function at(t){let e,n,l;function c(){return t[6](t[9])}return{c(){e=$("button"),k(e,"class","bubble btn border border-dark"),C(e,"btn-dark",t[0]>t[9]),C(e,"btn-light",t[0]<=t[9])},m(t,o){f(t,e,o),n||(l=v(e,"click",c),n=!0)},p(n,l){t=n,1&l&&C(e,"btn-dark",t[0]>t[9]),1&l&&C(e,"btn-light",t[0]<=t[9])},d(t){t&&m(e),n=!1,l()}}}function ut(t){let e,n,l,c,o;const r=t[5].default,b=s(r,t,t[4],null);let h=t[1],v=[];for(let e=0;e<h.length;e+=1)v[e]=at(it(t,h,e));return{c(){e=$("div"),n=$("small"),b&&b.c(),l=g(),c=$("div");for(let t=0;t<v.length;t+=1)v[t].c();k(n,"class","align-self-center"),w(n,"width","3em"),k(e,"class","d-flex w-100")},m(t,s){f(t,e,s),d(e,n),b&&b.m(n,null),d(e,l),d(e,c);for(let t=0;t<v.length;t+=1)v[t]&&v[t].m(c,null);o=!0},p(t,[e]){if(b&&b.p&&(!o||16&e)&&a(b,r,t,t[4],o?i(r,t[4],e,null):u(t[4]),null),7&e){let n;for(h=t[1],n=0;n<h.length;n+=1){const l=it(t,h,n);v[n]?v[n].p(l,e):(v[n]=at(l),v[n].c(),v[n].m(c,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=h.length}},i(t){o||(K(b,t),o=!0)},o(t){R(b,t),o=!1},d(t){t&&m(e),b&&b.d(t),p(v,t)}}}function dt(t,e,n){let l,{$$slots:c={},$$scope:o}=e,{count:s=6}=e,{value:r=0}=e;function i(t){n(0,r=r==t+1?t:t+1)}return t.$$set=t=>{"count"in t&&n(3,s=t.count),"value"in t&&n(0,r=t.value),"$$scope"in t&&n(4,o=t.$$scope)},t.$$.update=()=>{8&t.$$.dirty&&n(1,l=[...new Array(s)])},[r,l,i,s,o,c,t=>i(t)]}class ft extends nt{constructor(t){super(),et(this,t,dt,ut,o,{count:3,value:0})}}function mt(t){let e,n,l;function c(e){t[4](e)}let o={count:t[1],$$slots:{default:[pt]},$$scope:{ctx:t}};return void 0!==t[0].pass&&(o.value=t[0].pass),e=new ft({props:o}),M.push((()=>Z(e,"value",c))),{c(){Q(e.$$.fragment)},m(t,n){Y(e,t,n),l=!0},p(t,l){const c={};2&l&&(c.count=t[1]),64&l&&(c.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,c.value=t[0].pass,I((()=>n=!1))),e.$set(c)},i(t){l||(K(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function pt(t){let e;return{c(){e=b("Pass")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function $t(t){let e,n,l;function c(e){t[5](e)}let o={count:t[2],$$slots:{default:[bt]},$$scope:{ctx:t}};return void 0!==t[0].fail&&(o.value=t[0].fail),e=new ft({props:o}),M.push((()=>Z(e,"value",c))),{c(){Q(e.$$.fragment)},m(t,n){Y(e,t,n),l=!0},p(t,l){const c={};4&l&&(c.count=t[2]),64&l&&(c.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,c.value=t[0].fail,I((()=>n=!1))),e.$set(c)},i(t){l||(K(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function bt(t){let e;return{c(){e=b("Fail")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function gt(t){let e,n,l,c,o,s,r,i,a,u,p,h,y,w,C=t[0].name+"",S=t[0].rating+"",z=t[0].rating<t[0].cap&&mt(t),D=t[2]>0&&t[0].rating<t[0].cap&&$t(t);return{c(){e=$("div"),n=$("div"),l=$("div"),c=$("h2"),o=b(C),s=g(),r=$("h2"),i=$("button"),a=b(S),u=g(),z&&z.c(),p=g(),D&&D.c(),k(c,"class","mr-auto"),k(i,"class","badge btn btn-dark"),k(l,"class","d-flex"),k(n,"class","card-body"),k(e,"class","card text-nowrap")},m(m,$){f(m,e,$),d(e,n),d(n,l),d(l,c),d(c,o),d(l,s),d(l,r),d(r,i),d(i,a),d(n,u),z&&z.m(n,null),d(n,p),D&&D.m(n,null),h=!0,y||(w=v(i,"click",t[3]),y=!0)},p(t,[e]){(!h||1&e)&&C!==(C=t[0].name+"")&&x(o,C),(!h||1&e)&&S!==(S=t[0].rating+"")&&x(a,S),t[0].rating<t[0].cap?z?(z.p(t,e),1&e&&K(z,1)):(z=mt(t),z.c(),K(z,1),z.m(n,p)):z&&(j(),R(z,1,1,(()=>{z=null})),B()),t[2]>0&&t[0].rating<t[0].cap?D?(D.p(t,e),5&e&&K(D,1)):(D=$t(t),D.c(),K(D,1),D.m(n,null)):D&&(j(),R(D,1,1,(()=>{D=null})),B())},i(t){h||(K(z),K(D),h=!0)},o(t){R(z),R(D),h=!1},d(t){t&&m(e),z&&z.d(),D&&D.d(),y=!1,w()}}}function ht(t,e,n){let l,c,{ability:o}=e;return t.$$set=t=>{"ability"in t&&n(0,o=t.ability)},t.$$.update=()=>{1&t.$$.dirty&&n(2,l=o.rating<2?0:o.rating-1),1&t.$$.dirty&&n(1,c=o.rating<1?1:o.rating)},[o,c,l,function(t){n(0,o.rating+=t.shiftKey?-1:1,o),o.rating<0&&n(0,o.rating=o.cap,o),o.rating>o.cap&&n(0,o.rating=0,o)},function(e){t.$$.not_equal(o.pass,e)&&(o.pass=e,n(0,o))},function(e){t.$$.not_equal(o.fail,e)&&(o.fail=e,n(0,o))}]}class vt extends nt{constructor(t){super(),et(this,t,ht,gt,o,{ability:0})}}function kt(t,e,n){const l=t.slice();return l[9]=e[n],l[11]=n,l}function xt(t){let e,n,l,c,o=t[9]+"";function s(){return t[6](t[11])}return{c(){e=$("button"),n=b(o),k(e,"class","btn badge badge-dark p-2 my-1 mr-1")},m(t,o){f(t,e,o),d(e,n),l||(c=v(e,"click",s),l=!0)},p(e,l){t=e,1&l&&o!==(o=t[9]+"")&&x(n,o)},d(t){t&&m(e),l=!1,c()}}}function yt(t){let e,n,l=t[9]+"";return{c(){e=$("span"),n=b(l),k(e,"class","btn badge badge-light border border-dark p-2 my-1 mr-1")},m(t,l){f(t,e,l),d(e,n)},p(t,e){1&e&&l!==(l=t[9]+"")&&x(n,l)},d(t){t&&m(e)}}}function wt(t){let e;function n(t,e){return t[11]==t[2]?yt:xt}let l=n(t),c=l(t);return{c(){c.c(),e=h()},m(t,n){c.m(t,n),f(t,e,n)},p(t,o){l===(l=n(t))&&c?c.p(t,o):(c.d(1),c=l(t),c&&(c.c(),c.m(e.parentNode,e)))},d(t){c.d(t),t&&m(e)}}}function Ct(e){let n,l,c;return{c(){n=$("button"),n.textContent="add",k(n,"class","btn badge badge-light border border-dark p-2 ml-0 mt-1 mb-1")},m(t,o){f(t,n,o),l||(c=v(n,"click",e[4]),l=!0)},p:t,d(t){t&&m(n),l=!1,c()}}}function St(t){let e,n,c;return{c(){e=$("input"),k(e,"class","form-control")},m(l,o){f(l,e,o),t[7](e),y(e,t[0][t[2]]),n||(c=[v(e,"input",t[8]),v(e,"blur",t[5])],n=!0)},p(t,n){5&n&&e.value!==t[0][t[2]]&&y(e,t[0][t[2]])},d(o){o&&m(e),t[7](null),n=!1,l(c)}}}function zt(e){let n,l,c,o,s=e[0],r=[];for(let t=0;t<s.length;t+=1)r[t]=wt(kt(e,s,t));let i=!e[1]&&Ct(e),a=e[1]&&St(e);return{c(){n=$("div"),l=$("div");for(let t=0;t<r.length;t+=1)r[t].c();c=g(),i&&i.c(),o=g(),a&&a.c(),k(l,"class","d-flex flex-wrap")},m(t,e){f(t,n,e),d(n,l);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(l,null);d(l,c),i&&i.m(l,null),d(n,o),a&&a.m(n,null)},p(t,[e]){if(7&e){let n;for(s=t[0],n=0;n<s.length;n+=1){const o=kt(t,s,n);r[n]?r[n].p(o,e):(r[n]=wt(o),r[n].c(),r[n].m(l,c))}for(;n<r.length;n+=1)r[n].d(1);r.length=s.length}t[1]?i&&(i.d(1),i=null):i?i.p(t,e):(i=Ct(t),i.c(),i.m(l,null)),t[1]?a?a.p(t,e):(a=St(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:t,o:t,d(t){t&&m(n),p(r,t),i&&i.d(),a&&a.d()}}}function Dt(t,e,n){let l,{items:c=[]}=e,o=!1,s=-1;_((()=>{l&&l.focus()}));return t.$$set=t=>{"items"in t&&n(0,c=t.items)},[c,o,s,l,function(){c.push(""),n(2,s=c.length-1),n(1,o=!0),n(0,c)},function(){c[s]||c.splice(s,1),n(1,o=!1),n(2,s=-1),n(0,c)},t=>{n(1,o=!0),n(2,s=t)},function(t){M[t?"unshift":"push"]((()=>{l=t,n(3,l)}))},function(){c[s]=this.value,n(0,c)}]}class _t extends nt{constructor(t){super(),et(this,t,Dt,zt,o,{items:0})}}function Tt(t){let e,n,l,c;function o(e){t[5](e)}let s={count:t[1],$$slots:{default:[Ht]},$$scope:{ctx:t}};return void 0!==t[0].pass&&(s.value=t[0].pass),n=new ft({props:s}),M.push((()=>Z(n,"value",o))),{c(){e=$("div"),Q(n.$$.fragment),k(e,"class","d-flex")},m(t,l){f(t,e,l),Y(n,e,null),c=!0},p(t,e){const c={};2&e&&(c.count=t[1]),256&e&&(c.$$scope={dirty:e,ctx:t}),!l&&1&e&&(l=!0,c.value=t[0].pass,I((()=>l=!1))),n.$set(c)},i(t){c||(K(n.$$.fragment,t),c=!0)},o(t){R(n.$$.fragment,t),c=!1},d(t){t&&m(e),X(n)}}}function Ht(t){let e;return{c(){e=b("pass")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Mt(t){let e,n,l,c;function o(e){t[6](e)}let s={count:t[2],$$slots:{default:[Et]},$$scope:{ctx:t}};return void 0!==t[0].fail&&(s.value=t[0].fail),n=new ft({props:s}),M.push((()=>Z(n,"value",o))),{c(){e=$("div"),Q(n.$$.fragment),k(e,"class","d-flex")},m(t,l){f(t,e,l),Y(n,e,null),c=!0},p(t,e){const c={};4&e&&(c.count=t[2]),256&e&&(c.$$scope={dirty:e,ctx:t}),!l&&1&e&&(l=!0,c.value=t[0].fail,I((()=>l=!1))),n.$set(c)},i(t){c||(K(n.$$.fragment,t),c=!0)},o(t){R(n.$$.fragment,t),c=!1},d(t){t&&m(e),X(n)}}}function Et(t){let e;return{c(){e=b("fail")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Wt(t){let e,n,c,o,s,r,i,a,u,p,h,y,w,C,S,z,D,_,T,H,E,W,L,A=t[0].current+"",q=t[0].maximum+"",N=t[0].maximum<Lt&&Tt(t),U=t[2]>0&&t[0].maximum<Lt&&Mt(t);function O(e){t[7](e)}let P={};return void 0!==t[0].descriptors&&(P.items=t[0].descriptors),T=new _t({props:P}),M.push((()=>Z(T,"items",O))),{c(){e=$("div"),n=$("div"),c=$("div"),o=$("h2"),o.textContent="Nature",s=g(),r=$("h2"),i=$("button"),a=b(A),u=g(),p=$("h2"),p.innerHTML='<span class="m-1">/</span>',h=g(),y=$("h2"),w=$("button"),C=b(q),S=g(),N&&N.c(),z=g(),U&&U.c(),D=g(),_=$("div"),Q(T.$$.fragment),k(o,"class","mr-auto"),k(i,"class","btn badge btn-dark"),k(w,"class","btn badge btn-dark"),k(c,"class","d-flex"),k(_,"class","mt-2"),k(n,"class","card-body"),k(e,"id","$"+this.id),k(e,"class","card text-nowrap")},m(l,m){f(l,e,m),d(e,n),d(n,c),d(c,o),d(c,s),d(c,r),d(r,i),d(i,a),d(c,u),d(c,p),d(c,h),d(c,y),d(y,w),d(w,C),d(n,S),N&&N.m(n,null),d(n,z),U&&U.m(n,null),d(n,D),d(n,_),Y(T,_,null),E=!0,W||(L=[v(i,"click",t[3]),v(w,"click",t[4])],W=!0)},p(t,[e]){(!E||1&e)&&A!==(A=t[0].current+"")&&x(a,A),(!E||1&e)&&q!==(q=t[0].maximum+"")&&x(C,q),t[0].maximum<Lt?N?(N.p(t,e),1&e&&K(N,1)):(N=Tt(t),N.c(),K(N,1),N.m(n,z)):N&&(j(),R(N,1,1,(()=>{N=null})),B()),t[2]>0&&t[0].maximum<Lt?U?(U.p(t,e),5&e&&K(U,1)):(U=Mt(t),U.c(),K(U,1),U.m(n,D)):U&&(j(),R(U,1,1,(()=>{U=null})),B());const l={};!H&&1&e&&(H=!0,l.items=t[0].descriptors,I((()=>H=!1))),T.$set(l)},i(t){E||(K(N),K(U),K(T.$$.fragment,t),E=!0)},o(t){R(N),R(U),R(T.$$.fragment,t),E=!1},d(t){t&&m(e),N&&N.d(),U&&U.d(),X(T),W=!1,l(L)}}}const Lt=7;function At(t,e,n){let l,c,{nature:o}=e;return t.$$set=t=>{"nature"in t&&n(0,o=t.nature)},t.$$.update=()=>{1&t.$$.dirty&&n(2,l=o.maximum<2?0:o.maximum-1),1&t.$$.dirty&&n(1,c=o.maximum<1?1:o.maximum)},[o,c,l,function(t){n(0,o.current+=t.shiftKey?-1:1,o),o.current>o.maximum?n(0,o.current=0,o):o.current<0&&n(0,o.current=o.maximum,o)},function(t){n(0,o.maximum+=t.shiftKey?-1:1,o),o.maximum>Lt?n(0,o.maximum=0,o):o.maximum<0&&n(0,o.maximum=Lt,o),o.current>o.maximum&&n(0,o.current=o.maximum,o)},function(e){t.$$.not_equal(o.pass,e)&&(o.pass=e,n(0,o))},function(e){t.$$.not_equal(o.fail,e)&&(o.fail=e,n(0,o))},function(e){t.$$.not_equal(o.descriptors,e)&&(o.descriptors=e,n(0,o))}]}class qt extends nt{constructor(t){super(),et(this,t,At,Wt,o,{nature:0})}}function It(t){let e,n,c,o,s,r,i,a,u,p,h,y,w,C,S,z,D,_,T,H,M,E,W,L,A,q,I,N,U,O,P,F,V,j,B,J,G,Z,tt,et,nt,lt,ct,ot=t[0].abilities.lifestyle+"",st=t[0].abilities.might+"",rt=t[0].abilities.precedence+"";return o=new vt({props:{ability:t[0].abilities.will}}),r=new vt({props:{ability:t[0].abilities.health}}),a=new qt({props:{nature:t[0].abilities.nature}}),h=new vt({props:{ability:t[0].abilities.resources}}),w=new vt({props:{ability:t[0].abilities.circles}}),{c(){e=$("div"),n=$("div"),c=$("div"),Q(o.$$.fragment),s=g(),Q(r.$$.fragment),i=g(),Q(a.$$.fragment),u=g(),p=$("div"),Q(h.$$.fragment),y=g(),Q(w.$$.fragment),C=g(),S=$("div"),z=$("div"),D=$("h2"),D.textContent="Lifestyle",_=g(),T=$("h5"),H=$("button"),H.textContent="reset",M=g(),E=$("h2"),W=$("button"),L=b(ot),A=g(),q=$("div"),I=$("div"),N=$("h2"),N.textContent="Might",U=g(),O=$("h2"),P=$("button"),F=b(st),V=g(),j=$("div"),B=$("div"),J=$("h2"),J.textContent="Precedence",G=g(),Z=$("h2"),tt=$("button"),et=b(rt),k(c,"class","col-md-6"),k(H,"class","btn badge btn-light border align-self-center"),k(T,"class","ml-2"),k(W,"class","btn badge btn-dark"),k(E,"class","ml-auto"),k(z,"class","card-body d-flex"),k(S,"class","card"),k(N,"class","mr-auto"),k(P,"class","btn badge btn-dark"),k(I,"class","card-body d-flex"),k(q,"class","card"),k(J,"class","mr-auto"),k(tt,"class","btn badge btn-dark"),k(B,"class","card-body d-flex"),k(j,"class","card"),k(p,"class","col-md-6"),k(n,"class","row"),k(e,"id","$"+this.id),k(e,"class","container-fluid")},m(l,m){f(l,e,m),d(e,n),d(n,c),Y(o,c,null),d(c,s),Y(r,c,null),d(c,i),Y(a,c,null),d(n,u),d(n,p),Y(h,p,null),d(p,y),Y(w,p,null),d(p,C),d(p,S),d(S,z),d(z,D),d(z,_),d(z,T),d(T,H),d(z,M),d(z,E),d(E,W),d(W,L),d(p,A),d(p,q),d(q,I),d(I,N),d(I,U),d(I,O),d(O,P),d(P,F),d(p,V),d(p,j),d(j,B),d(B,J),d(B,G),d(B,Z),d(Z,tt),d(tt,et),nt=!0,lt||(ct=[v(H,"click",t[2]),v(W,"click",t[3]),v(P,"click",t[4]),v(tt,"click",t[5])],lt=!0)},p(t,[e]){const n={};1&e&&(n.ability=t[0].abilities.will),o.$set(n);const l={};1&e&&(l.ability=t[0].abilities.health),r.$set(l);const c={};1&e&&(c.nature=t[0].abilities.nature),a.$set(c);const s={};1&e&&(s.ability=t[0].abilities.resources),h.$set(s);const i={};1&e&&(i.ability=t[0].abilities.circles),w.$set(i),(!nt||1&e)&&ot!==(ot=t[0].abilities.lifestyle+"")&&x(L,ot),(!nt||1&e)&&st!==(st=t[0].abilities.might+"")&&x(F,st),(!nt||1&e)&&rt!==(rt=t[0].abilities.precedence+"")&&x(et,rt)},i(t){nt||(K(o.$$.fragment,t),K(r.$$.fragment,t),K(a.$$.fragment,t),K(h.$$.fragment,t),K(w.$$.fragment,t),nt=!0)},o(t){R(o.$$.fragment,t),R(r.$$.fragment,t),R(a.$$.fragment,t),R(h.$$.fragment,t),R(w.$$.fragment,t),nt=!1},d(t){t&&m(e),X(o),X(r),X(a),X(h),X(w),lt=!1,l(ct)}}}function Nt(t,e,n){let{model:l}=e;function c(t,e){let c=l.abilities[e.ability]+(t.shiftKey?-1:1);c<0&&(c=e.max),c>e.max&&(c=0),n(0,l.abilities[e.ability]=c,l)}return t.$$set=t=>{"model"in t&&n(0,l=t.model)},[l,c,()=>n(0,l.abilities.lifestyle=0,l),t=>c(t,{max:99,ability:"lifestyle"}),t=>c(t,{max:8,ability:"might"}),t=>c(t,{max:7,ability:"precedence"})]}class Ut extends nt{constructor(t){super(),et(this,t,Nt,It,o,{model:0})}}function Ot(t,e,n){const l=t.slice();return l[12]=e[n],l}function Pt(t,e,n){const l=t.slice();return l[15]=e[n],l}function Ft(t){let e,n,c,o,s,r,i,a,u,p,h,y,w,C,S,z,D,_,T,H,M,E=t[0].advancement[`current${t[15]}`]+"",W=t[0].advancement[`spent${t[15]}`]+"";function L(){return t[6](t[15])}function A(){return t[7](t[15])}function q(){return t[8](t[15])}function I(){return t[9](t[15])}return{c(){e=$("div"),n=$("div"),c=$("div"),o=$("h2"),s=b(t[15]),r=g(),i=$("div"),a=$("div"),u=$("button"),p=b(E),h=g(),y=$("button"),y.textContent="↓",w=g(),C=$("div"),S=$("button"),z=b(W),D=b(" spent"),_=g(),T=$("button"),T.textContent="←",k(o,"class","card-subtitle mb-1"),k(u,"class","btn btn-dark"),k(y,"class","btn btn-light border border-dark"),k(a,"class","btn-group align-self-center mr-1"),k(S,"class","btn btn-dark"),k(T,"class","btn btn-light border border-dark"),k(C,"class","btn-group align-self-center"),k(i,"class","d-flex"),k(c,"class","card-body"),k(n,"class","card"),k(e,"class","col-md-6")},m(t,l){f(t,e,l),d(e,n),d(n,c),d(c,o),d(o,s),d(c,r),d(c,i),d(i,a),d(a,u),d(u,p),d(a,h),d(a,y),d(i,w),d(i,C),d(C,S),d(S,z),d(S,D),d(C,_),d(C,T),H||(M=[v(u,"click",L),v(y,"click",A),v(S,"click",q),v(T,"click",I)],H=!0)},p(e,n){t=e,1&n&&E!==(E=t[0].advancement[`current${t[15]}`]+"")&&x(p,E),1&n&&W!==(W=t[0].advancement[`spent${t[15]}`]+"")&&x(z,W)},d(t){t&&m(e),H=!1,l(M)}}}function Vt(e){let n,l,c,o,s,r,i,a,u,b,h,x,y=e[2],w=[];for(let t=0;t<y.length;t+=1)w[t]=Bt(Ot(e,y,t));return{c(){n=$("div"),l=$("h5"),l.textContent="Level Requirements",c=g(),o=$("button"),o.innerHTML='<span aria-hidden="true">✗</span>',s=g(),r=$("div"),i=$("table"),a=$("thead"),a.innerHTML="<tr><th>Level</th> \n                                <th>Fate</th> \n                                <th>Persona</th></tr>",u=g(),b=$("tbody");for(let t=0;t<w.length;t+=1)w[t].c();k(l,"id","levelRequirementsTitle"),k(o,"type","button"),k(o,"class","position-topright close"),k(o,"aria-label","Close"),k(n,"class","card-header"),k(i,"class","table"),k(r,"class","card-body")},m(t,m){f(t,n,m),d(n,l),d(n,c),d(n,o),f(t,s,m),f(t,r,m),d(r,i),d(i,a),d(i,u),d(i,b);for(let t=0;t<w.length;t+=1)w[t]&&w[t].m(b,null);h||(x=v(o,"click",e[11]),h=!0)},p(t,e){if(4&e){let n;for(y=t[2],n=0;n<y.length;n+=1){const l=Ot(t,y,n);w[n]?w[n].p(l,e):(w[n]=Bt(l),w[n].c(),w[n].m(b,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=y.length}},i:t,o:t,d(t){t&&m(n),t&&m(s),t&&m(r),p(w,t),h=!1,x()}}}function jt(t){let e,n,l,c,o,s,r,i,a;return c=new _t({props:{items:t[0].advancement.levelBenefits}}),{c(){e=$("div"),n=$("h2"),n.textContent="Level Benefits",l=g(),Q(c.$$.fragment),o=g(),s=$("button"),s.textContent="?",k(n,"class","mr-auto"),k(s,"class","position-topright btn badge btn-light border border-dark"),k(e,"class","card-body")},m(u,m){f(u,e,m),d(e,n),d(e,l),Y(c,e,null),d(e,o),d(e,s),r=!0,i||(a=v(s,"click",t[10]),i=!0)},p(t,e){const n={};1&e&&(n.items=t[0].advancement.levelBenefits),c.$set(n)},i(t){r||(K(c.$$.fragment,t),r=!0)},o(t){R(c.$$.fragment,t),r=!1},d(t){t&&m(e),X(c),i=!1,a()}}}function Bt(e){let n,l,c,o,s,r,i,a,u,p,h=e[12].level+"",v=e[12].fate+"",k=e[12].persona+"";return{c(){n=$("tr"),l=$("td"),c=b(h),o=g(),s=$("td"),r=b(v),i=g(),a=$("td"),u=b(k),p=g()},m(t,e){f(t,n,e),d(n,l),d(l,c),d(n,o),d(n,s),d(s,r),d(n,i),d(n,a),d(a,u),d(n,p)},p:t,d(t){t&&m(n)}}}function Kt(t){let e,n,l,c,o,s,r,i,a=["Fate","Persona"],u=[];for(let e=0;e<2;e+=1)u[e]=Ft(Pt(t,a,e));const b=[jt,Vt],h=[];function v(t,e){return t[1]?1:0}return s=v(t),r=h[s]=b[s](t),{c(){e=$("div"),n=$("div");for(let t=0;t<2;t+=1)u[t].c();l=g(),c=$("div"),o=$("div"),r.c(),k(o,"class","card"),k(c,"class","col-12"),k(n,"class","row"),k(e,"class","container-fluid text-nowrap")},m(t,r){f(t,e,r),d(e,n);for(let t=0;t<2;t+=1)u[t]&&u[t].m(n,null);d(n,l),d(n,c),d(c,o),h[s].m(o,null),i=!0},p(t,[e]){if(57&e){let c;for(a=["Fate","Persona"],c=0;c<2;c+=1){const o=Pt(t,a,c);u[c]?u[c].p(o,e):(u[c]=Ft(o),u[c].c(),u[c].m(n,l))}for(;c<2;c+=1)u[c].d(1)}let c=s;s=v(t),s===c?h[s].p(t,e):(j(),R(h[c],1,1,(()=>{h[c]=null})),B(),r=h[s],r?r.p(t,e):(r=h[s]=b[s](t),r.c()),K(r,1),r.m(o,null))},i(t){i||(K(r),i=!0)},o(t){R(r),i=!1},d(t){t&&m(e),p(u,t),h[s].d()}}}function Rt(t,e,n){let{model:l}=e,c=!1;function o(t,e){n(0,l.advancement[t]+=e,l),l.advancement[t]<0&&n(0,l.advancement[t]=0,l)}function s(t){0!=l.advancement[`current${t}`]&&(n(0,l.advancement[`current${t}`]--,l),n(0,l.advancement[`spent${t}`]++,l))}function r(t){0!=l.advancement[`spent${t}`]&&(n(0,l.advancement[`current${t}`]++,l),n(0,l.advancement[`spent${t}`]--,l))}return t.$$set=t=>{"model"in t&&n(0,l=t.model)},[l,c,[{level:1,fate:0,persona:0},{level:2,fate:3,persona:3},{level:3,fate:7,persona:6},{level:4,fate:14,persona:12},{level:5,fate:22,persona:20},{level:6,fate:31,persona:30},{level:7,fate:41,persona:42},{level:8,fate:52,persona:56},{level:9,fate:64,persona:72},{level:10,fate:78,persona:98}],o,s,r,t=>o(`current${t}`,1),t=>o(`current${t}`,-1),t=>s(t),t=>r(t),()=>n(1,c=!0),()=>n(1,c=!1)]}class Jt extends nt{constructor(t){super(),et(this,t,Rt,Kt,o,{model:0})}}function Gt(t,e,n){const l=t.slice();return l[15]=e[n],l[17]=n,l}function Zt(t){let e,n,l,c,o,r;const d=t[10].default,p=s(d,t,t[9],null);function b(t,e){return 0==t[1].length?Xt:Yt}let h=b(t),x=h(t);return{c(){e=$("span"),p&&p.c(),n=g(),l=$("button"),x.c(),k(e,"class","py-2 border-bottom font-weight-bold"),k(l,"class","btn btn-light text-left align-top wrap w-100"),w(l,"min-height","2.5em")},m(s,i){f(s,e,i),p&&p.m(e,null),f(s,n,i),f(s,l,i),x.m(l,null),c=!0,o||(r=v(l,"click",t[14]),o=!0)},p(t,e){p&&p.p&&(!c||512&e)&&a(p,d,t,t[9],c?i(d,t[9],e,null):u(t[9]),null),h===(h=b(t))&&x?x.p(t,e):(x.d(1),x=h(t),x&&(x.c(),x.m(l,null)))},i(t){c||(K(p,t),c=!0)},o(t){R(p,t),c=!1},d(t){t&&m(e),p&&p.d(t),t&&m(n),t&&m(l),x.d(),o=!1,r()}}}function Qt(t){let e,n,c,o,r,d;const p=t[10].default,b=s(p,t,t[9],null);return{c(){e=$("span"),b&&b.c(),n=g(),c=$("textarea"),k(e,"class","py-2 border-bottom font-weight-bold"),k(c,"class","flex-grow-1 form-control")},m(l,s){f(l,e,s),b&&b.m(e,null),f(l,n,s),f(l,c,s),t[11](c),y(c,t[0]),o=!0,r||(d=[v(c,"input",t[12]),v(c,"blur",t[13]),v(c,"focus",t[6]),v(c,"keyup",t[6])],r=!0)},p(t,e){b&&b.p&&(!o||512&e)&&a(b,p,t,t[9],o?i(p,t[9],e,null):u(t[9]),null),1&e&&y(c,t[0])},i(t){o||(K(b,t),o=!0)},o(t){R(b,t),o=!1},d(o){o&&m(e),b&&b.d(o),o&&m(n),o&&m(c),t[11](null),r=!1,l(d)}}}function Yt(t){let e,n=t[1],l=[];for(let e=0;e<n.length;e+=1)l[e]=ne(Gt(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=h()},m(t,n){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,n);f(t,e,n)},p(t,c){if(51&c){let o;for(n=t[1],o=0;o<n.length;o+=1){const s=Gt(t,n,o);l[o]?l[o].p(s,c):(l[o]=ne(s),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){p(l,t),t&&m(e)}}}function Xt(t){let e;return{c(){e=b(t[0])},m(t,n){f(t,e,n)},p(t,n){1&n&&x(e,t[0])},d(t){t&&m(e)}}}function te(t){let e;return{c(){e=b(t[4])},m(t,n){f(t,e,n)},p(t,n){16&n&&x(e,t[4])},d(t){t&&m(e)}}}function ee(t){let e,n=t[0].substring(t[15].index+t[15][0].length,t[1][t[17]+1].index)+"";return{c(){e=b(n)},m(t,n){f(t,e,n)},p(t,l){3&l&&n!==(n=t[0].substring(t[15].index+t[15][0].length,t[1][t[17]+1].index)+"")&&x(e,n)},d(t){t&&m(e)}}}function ne(t){let e,n,l,c=t[15][0]+"",o=0==t[17]&&function(t){let e;return{c(){e=b(t[5])},m(t,n){f(t,e,n)},p(t,n){32&n&&x(e,t[5])},d(t){t&&m(e)}}}(t);function s(t,e){return t[17]<t[1].length-1?ee:te}let r=s(t),i=r(t);return{c(){o&&o.c(),e=$("span"),n=b(c),i.c(),l=h(),k(e,"class","bg-info")},m(t,c){o&&o.m(t,c),f(t,e,c),d(e,n),i.m(t,c),f(t,l,c)},p(t,e){0==t[17]&&o.p(t,e),2&e&&c!==(c=t[15][0]+"")&&x(n,c),r===(r=s(t))&&i?i.p(t,e):(i.d(1),i=r(t),i&&(i.c(),i.m(l.parentNode,l)))},d(t){o&&o.d(t),t&&m(e),i.d(t),t&&m(l)}}}function le(t){let e,n,l,c;const o=[Qt,Zt],s=[];function r(t,e){return t[2]?0:1}return e=r(t),n=s[e]=o[e](t),{c(){n.c(),l=h()},m(t,n){s[e].m(t,n),f(t,l,n),c=!0},p(t,[c]){let i=e;e=r(t),e===i?s[e].p(t,c):(j(),R(s[i],1,1,(()=>{s[i]=null})),B(),n=s[e],n?n.p(t,c):(n=s[e]=o[e](t),n.c()),K(n,1),n.m(l.parentNode,l))},i(t){c||(K(n),c=!0)},o(t){R(n),c=!1},d(t){s[e].d(t),t&&m(l)}}}function ce(t,e,n){let l,c,o,s,r,{$$slots:i={},$$scope:a}=e,{content:u=""}=e,{highlight:d=""}=e,f=!1;_((()=>{f&&r.focus()}));return t.$$set=t=>{"content"in t&&n(0,u=t.content),"highlight"in t&&n(7,d=t.highlight),"$$scope"in t&&n(9,a=t.$$scope)},t.$$.update=()=>{128&t.$$.dirty&&n(8,l=new RegExp(d,"gi")),257&t.$$.dirty&&n(1,c=[...u.matchAll(l)]),3&t.$$.dirty&&n(5,o=0==c.length?"":u.substring(0,c[0].index)),3&t.$$.dirty&&n(4,s=0==c.length?"":u.substring(c[c.length-1].index+c[c.length-1][0].length))},[u,c,f,r,s,o,function(){r&&n(3,r.style.height=`${r.scrollHeight+2}px`,r)},d,l,a,i,function(t){M[t?"unshift":"push"]((()=>{r=t,n(3,r)}))},function(){u=this.value,n(0,u)},()=>n(2,f=!1),()=>n(2,f=!0)]}class oe extends nt{constructor(t){super(),et(this,t,ce,le,o,{content:0,highlight:7})}}function se(t){let e,n,l,c,o,r,p,h;const y=t[4].default,C=s(y,t,t[3],null);return{c(){e=$("div"),n=$("span"),C&&C.c(),l=g(),c=$("button"),o=b(t[0]),k(n,"class","align-self-center text-right border-right pr-1 py-2 font-weight-bold"),w(n,"width","4.5em"),k(c,"class","flex-grow-1 btn btn-light text-left"),k(e,"class","d-flex mb-1 border-bottom col-lg-3 col-md-4")},m(s,i){f(s,e,i),d(e,n),C&&C.m(n,null),d(e,l),d(e,c),d(c,o),r=!0,p||(h=v(c,"click",t[8]),p=!0)},p(t,e){C&&C.p&&(!r||8&e)&&a(C,y,t,t[3],r?i(y,t[3],e,null):u(t[3]),null),(!r||1&e)&&x(o,t[0])},i(t){r||(K(C,t),r=!0)},o(t){R(C,t),r=!1},d(t){t&&m(e),C&&C.d(t),p=!1,h()}}}function re(t){let e,n,c,o,r,p,b;const h=t[4].default,x=s(h,t,t[3],null);return{c(){e=$("div"),n=$("span"),x&&x.c(),c=g(),o=$("input"),k(n,"class","align-self-center text-right mr-1 py-2 font-weight-bold"),w(n,"width","4.5em"),w(n,"height","2.5em"),k(o,"class","flex-grow-1 form-control"),k(e,"class","d-flex mb-1 border-bottom col-lg-3 col-md-4")},m(l,s){f(l,e,s),d(e,n),x&&x.m(n,null),d(e,c),d(e,o),t[5](o),y(o,t[0]),r=!0,p||(b=[v(o,"input",t[6]),v(o,"blur",t[7])],p=!0)},p(t,e){x&&x.p&&(!r||8&e)&&a(x,h,t,t[3],r?i(h,t[3],e,null):u(t[3]),null),1&e&&o.value!==t[0]&&y(o,t[0])},i(t){r||(K(x,t),r=!0)},o(t){R(x,t),r=!1},d(n){n&&m(e),x&&x.d(n),t[5](null),p=!1,l(b)}}}function ie(t){let e,n,l,c;const o=[re,se],s=[];function r(t,e){return t[1]?0:1}return e=r(t),n=s[e]=o[e](t),{c(){n.c(),l=h()},m(t,n){s[e].m(t,n),f(t,l,n),c=!0},p(t,[c]){let i=e;e=r(t),e===i?s[e].p(t,c):(j(),R(s[i],1,1,(()=>{s[i]=null})),B(),n=s[e],n?n.p(t,c):(n=s[e]=o[e](t),n.c()),K(n,1),n.m(l.parentNode,l))},i(t){c||(K(n),c=!0)},o(t){R(n),c=!1},d(t){s[e].d(t),t&&m(l)}}}function ae(t,e,n){let l,{$$slots:c={},$$scope:o}=e,{content:s=""}=e,r=!1;_((()=>{r&&l.focus()}));return t.$$set=t=>{"content"in t&&n(0,s=t.content),"$$scope"in t&&n(3,o=t.$$scope)},[s,r,l,o,c,function(t){M[t?"unshift":"push"]((()=>{l=t,n(2,l)}))},function(){s=this.value,n(0,s)},()=>n(1,r=!1),()=>n(1,r=!0)]}class ue extends nt{constructor(t){super(),et(this,t,ae,ie,o,{content:0})}}function de(t){let e;return{c(){e=b("Name")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function fe(t){let e;return{c(){e=b("Stock")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function me(t){let e;return{c(){e=b("Class")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function pe(t){let e;return{c(){e=b("Home")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function $e(t){let e;return{c(){e=b("Raiment")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function be(t){let e;return{c(){e=b("Epithet")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function ge(t){let e;return{c(){e=b("Parents")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function he(t){let e;return{c(){e=b("Mentor")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function ve(t){let e;return{c(){e=b("Age")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function ke(t){let e;return{c(){e=b("Level")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function xe(t){let e;return{c(){e=b("Belief")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function ye(t){let e;return{c(){e=b("Creed")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function we(t){let e;return{c(){e=b("Goal")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Ce(t){let e;return{c(){e=b("Instinct")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Se(t){let e,n,l,c,o,s,r,i,a,u,p,b,h,v,x,y,w,C,S,z,D,_,T,H,E,W,L,A,q,N,U,O,P,F,V,j,B,J,G,tt,et,nt,lt,ct,ot,st,rt,it,at,ut,dt,ft,mt;function pt(e){t[1](e)}let $t={$$slots:{default:[de]},$$scope:{ctx:t}};function bt(e){t[2](e)}void 0!==t[0].bio.name&&($t.content=t[0].bio.name),o=new ue({props:$t}),M.push((()=>Z(o,"content",pt)));let gt={$$slots:{default:[fe]},$$scope:{ctx:t}};function ht(e){t[3](e)}void 0!==t[0].bio.stock&&(gt.content=t[0].bio.stock),i=new ue({props:gt}),M.push((()=>Z(i,"content",bt)));let vt={$$slots:{default:[me]},$$scope:{ctx:t}};function kt(e){t[4](e)}void 0!==t[0].bio.classValue&&(vt.content=t[0].bio.classValue),p=new ue({props:vt}),M.push((()=>Z(p,"content",ht)));let xt={$$slots:{default:[pe]},$$scope:{ctx:t}};function yt(e){t[5](e)}void 0!==t[0].bio.home&&(xt.content=t[0].bio.home),v=new ue({props:xt}),M.push((()=>Z(v,"content",kt)));let wt={$$slots:{default:[$e]},$$scope:{ctx:t}};function Ct(e){t[6](e)}void 0!==t[0].bio.raiment&&(wt.content=t[0].bio.raiment),w=new ue({props:wt}),M.push((()=>Z(w,"content",yt)));let St={$$slots:{default:[be]},$$scope:{ctx:t}};function zt(e){t[7](e)}void 0!==t[0].bio.epithet&&(St.content=t[0].bio.epithet),z=new ue({props:St}),M.push((()=>Z(z,"content",Ct)));let Dt={$$slots:{default:[ge]},$$scope:{ctx:t}};function _t(e){t[8](e)}void 0!==t[0].bio.parents&&(Dt.content=t[0].bio.parents),T=new ue({props:Dt}),M.push((()=>Z(T,"content",zt)));let Tt={$$slots:{default:[he]},$$scope:{ctx:t}};function Ht(e){t[9](e)}void 0!==t[0].bio.mentor&&(Tt.content=t[0].bio.mentor),W=new ue({props:Tt}),M.push((()=>Z(W,"content",_t)));let Mt={$$slots:{default:[ve]},$$scope:{ctx:t}};function Et(e){t[10](e)}void 0!==t[0].bio.age&&(Mt.content=t[0].bio.age),q=new ue({props:Mt}),M.push((()=>Z(q,"content",Ht)));let Wt={$$slots:{default:[ke]},$$scope:{ctx:t}};function Lt(e){t[11](e)}void 0!==t[0].bio.level&&(Wt.content=t[0].bio.level),O=new ue({props:Wt}),M.push((()=>Z(O,"content",Et)));let At={$$slots:{default:[xe]},$$scope:{ctx:t}};function qt(e){t[12](e)}void 0!==t[0].bio.belief&&(At.content=t[0].bio.belief),G=new oe({props:At}),M.push((()=>Z(G,"content",Lt)));let It={$$slots:{default:[ye]},$$scope:{ctx:t}};function Nt(e){t[13](e)}void 0!==t[0].bio.creed&&(It.content=t[0].bio.creed),lt=new oe({props:It}),M.push((()=>Z(lt,"content",qt)));let Ut={$$slots:{default:[we]},$$scope:{ctx:t}};function Ot(e){t[14](e)}void 0!==t[0].bio.goal&&(Ut.content=t[0].bio.goal),rt=new oe({props:Ut}),M.push((()=>Z(rt,"content",Nt)));let Pt={$$slots:{default:[Ce]},$$scope:{ctx:t}};return void 0!==t[0].bio.instinct&&(Pt.content=t[0].bio.instinct),dt=new oe({props:Pt}),M.push((()=>Z(dt,"content",Ot))),{c(){e=$("div"),n=$("div"),l=$("div"),c=$("div"),Q(o.$$.fragment),r=g(),Q(i.$$.fragment),u=g(),Q(p.$$.fragment),h=g(),Q(v.$$.fragment),y=g(),Q(w.$$.fragment),S=g(),Q(z.$$.fragment),_=g(),Q(T.$$.fragment),E=g(),Q(W.$$.fragment),A=g(),Q(q.$$.fragment),U=g(),Q(O.$$.fragment),F=g(),V=$("div"),j=$("div"),B=$("div"),J=$("div"),Q(G.$$.fragment),et=g(),nt=$("div"),Q(lt.$$.fragment),ot=g(),st=$("div"),Q(rt.$$.fragment),at=g(),ut=$("div"),Q(dt.$$.fragment),k(c,"class","row"),k(l,"class","card-body"),k(n,"class","card"),k(J,"class","d-flex flex-column mb-1 col-lg-3 col-md-4"),k(nt,"class","d-flex flex-column mb-1 col-lg-3 col-md-4"),k(st,"class","d-flex flex-column mb-1 col-lg-3 col-md-4"),k(ut,"class","d-flex flex-column mb-1 col-lg-3 col-md-4"),k(B,"class","row"),k(j,"class","card-body"),k(V,"class","card"),k(e,"id","$"+this.id),k(e,"class","container-fluid")},m(t,s){f(t,e,s),d(e,n),d(n,l),d(l,c),Y(o,c,null),d(c,r),Y(i,c,null),d(c,u),Y(p,c,null),d(c,h),Y(v,c,null),d(c,y),Y(w,c,null),d(c,S),Y(z,c,null),d(c,_),Y(T,c,null),d(c,E),Y(W,c,null),d(c,A),Y(q,c,null),d(c,U),Y(O,c,null),d(e,F),d(e,V),d(V,j),d(j,B),d(B,J),Y(G,J,null),d(B,et),d(B,nt),Y(lt,nt,null),d(B,ot),d(B,st),Y(rt,st,null),d(B,at),d(B,ut),Y(dt,ut,null),mt=!0},p(t,[e]){const n={};32768&e&&(n.$$scope={dirty:e,ctx:t}),!s&&1&e&&(s=!0,n.content=t[0].bio.name,I((()=>s=!1))),o.$set(n);const l={};32768&e&&(l.$$scope={dirty:e,ctx:t}),!a&&1&e&&(a=!0,l.content=t[0].bio.stock,I((()=>a=!1))),i.$set(l);const c={};32768&e&&(c.$$scope={dirty:e,ctx:t}),!b&&1&e&&(b=!0,c.content=t[0].bio.classValue,I((()=>b=!1))),p.$set(c);const r={};32768&e&&(r.$$scope={dirty:e,ctx:t}),!x&&1&e&&(x=!0,r.content=t[0].bio.home,I((()=>x=!1))),v.$set(r);const u={};32768&e&&(u.$$scope={dirty:e,ctx:t}),!C&&1&e&&(C=!0,u.content=t[0].bio.raiment,I((()=>C=!1))),w.$set(u);const d={};32768&e&&(d.$$scope={dirty:e,ctx:t}),!D&&1&e&&(D=!0,d.content=t[0].bio.epithet,I((()=>D=!1))),z.$set(d);const f={};32768&e&&(f.$$scope={dirty:e,ctx:t}),!H&&1&e&&(H=!0,f.content=t[0].bio.parents,I((()=>H=!1))),T.$set(f);const m={};32768&e&&(m.$$scope={dirty:e,ctx:t}),!L&&1&e&&(L=!0,m.content=t[0].bio.mentor,I((()=>L=!1))),W.$set(m);const $={};32768&e&&($.$$scope={dirty:e,ctx:t}),!N&&1&e&&(N=!0,$.content=t[0].bio.age,I((()=>N=!1))),q.$set($);const g={};32768&e&&(g.$$scope={dirty:e,ctx:t}),!P&&1&e&&(P=!0,g.content=t[0].bio.level,I((()=>P=!1))),O.$set(g);const h={};32768&e&&(h.$$scope={dirty:e,ctx:t}),!tt&&1&e&&(tt=!0,h.content=t[0].bio.belief,I((()=>tt=!1))),G.$set(h);const k={};32768&e&&(k.$$scope={dirty:e,ctx:t}),!ct&&1&e&&(ct=!0,k.content=t[0].bio.creed,I((()=>ct=!1))),lt.$set(k);const y={};32768&e&&(y.$$scope={dirty:e,ctx:t}),!it&&1&e&&(it=!0,y.content=t[0].bio.goal,I((()=>it=!1))),rt.$set(y);const S={};32768&e&&(S.$$scope={dirty:e,ctx:t}),!ft&&1&e&&(ft=!0,S.content=t[0].bio.instinct,I((()=>ft=!1))),dt.$set(S)},i(t){mt||(K(o.$$.fragment,t),K(i.$$.fragment,t),K(p.$$.fragment,t),K(v.$$.fragment,t),K(w.$$.fragment,t),K(z.$$.fragment,t),K(T.$$.fragment,t),K(W.$$.fragment,t),K(q.$$.fragment,t),K(O.$$.fragment,t),K(G.$$.fragment,t),K(lt.$$.fragment,t),K(rt.$$.fragment,t),K(dt.$$.fragment,t),mt=!0)},o(t){R(o.$$.fragment,t),R(i.$$.fragment,t),R(p.$$.fragment,t),R(v.$$.fragment,t),R(w.$$.fragment,t),R(z.$$.fragment,t),R(T.$$.fragment,t),R(W.$$.fragment,t),R(q.$$.fragment,t),R(O.$$.fragment,t),R(G.$$.fragment,t),R(lt.$$.fragment,t),R(rt.$$.fragment,t),R(dt.$$.fragment,t),mt=!1},d(t){t&&m(e),X(o),X(i),X(p),X(v),X(w),X(z),X(T),X(W),X(q),X(O),X(G),X(lt),X(rt),X(dt)}}}function ze(t,e,n){let{model:l}=e;return t.$$set=t=>{"model"in t&&n(0,l=t.model)},[l,function(e){t.$$.not_equal(l.bio.name,e)&&(l.bio.name=e,n(0,l))},function(e){t.$$.not_equal(l.bio.stock,e)&&(l.bio.stock=e,n(0,l))},function(e){t.$$.not_equal(l.bio.classValue,e)&&(l.bio.classValue=e,n(0,l))},function(e){t.$$.not_equal(l.bio.home,e)&&(l.bio.home=e,n(0,l))},function(e){t.$$.not_equal(l.bio.raiment,e)&&(l.bio.raiment=e,n(0,l))},function(e){t.$$.not_equal(l.bio.epithet,e)&&(l.bio.epithet=e,n(0,l))},function(e){t.$$.not_equal(l.bio.parents,e)&&(l.bio.parents=e,n(0,l))},function(e){t.$$.not_equal(l.bio.mentor,e)&&(l.bio.mentor=e,n(0,l))},function(e){t.$$.not_equal(l.bio.age,e)&&(l.bio.age=e,n(0,l))},function(e){t.$$.not_equal(l.bio.level,e)&&(l.bio.level=e,n(0,l))},function(e){t.$$.not_equal(l.bio.belief,e)&&(l.bio.belief=e,n(0,l))},function(e){t.$$.not_equal(l.bio.creed,e)&&(l.bio.creed=e,n(0,l))},function(e){t.$$.not_equal(l.bio.goal,e)&&(l.bio.goal=e,n(0,l))},function(e){t.$$.not_equal(l.bio.instinct,e)&&(l.bio.instinct=e,n(0,l))}]}class De extends nt{constructor(t){super(),et(this,t,ze,Se,o,{model:0})}}function _e(t,e,n){const l=t.slice();return l[11]=e[n],l[12]=e,l[13]=n,l}function Te(t){let e,n,l,c,o=t[11]+"";function s(){return t[9](t[13])}return{c(){e=$("button"),n=b(o),k(e,"class","btn btn-light border-bottom text-left")},m(t,o){f(t,e,o),d(e,n),l||(c=v(e,"click",s),l=!0)},p(e,l){t=e,1&l&&o!==(o=t[11]+"")&&x(n,o)},d(t){t&&m(e),l=!1,c()}}}function He(t){let e,n,c;function o(){t[7].call(e,t[12],t[13])}return{c(){e=$("input"),k(e,"class","form-control my-1")},m(l,s){f(l,e,s),y(e,t[11]),t[8](e),n||(c=[v(e,"blur",t[4]),v(e,"input",o)],n=!0)},p(n,l){t=n,1&l&&e.value!==t[11]&&y(e,t[11])},d(o){o&&m(e),t[8](null),n=!1,l(c)}}}function Me(t){let e;function n(t,e){return t[2]==t[13]?He:Te}let l=n(t),c=l(t);return{c(){c.c(),e=h()},m(t,n){c.m(t,n),f(t,e,n)},p(t,o){l===(l=n(t))&&c?c.p(t,o):(c.d(1),c=l(t),c&&(c.c(),c.m(e.parentNode,e)))},d(t){c.d(t),t&&m(e)}}}function Ee(t){let e,n,c,o,r,b,h,x,y,w,C,S,z;const D=t[6].default,_=s(D,t,t[5],null);let T=t[0],H=[];for(let e=0;e<T.length;e+=1)H[e]=Me(_e(t,T,e));return{c(){e=$("div"),n=$("div"),c=$("div"),o=$("h2"),_&&_.c(),r=g();for(let t=0;t<H.length;t+=1)H[t].c();b=g(),h=$("div"),x=$("button"),x.textContent="Add",y=g(),w=$("button"),w.textContent="a → z",k(c,"class","d-flex flex-column"),k(x,"class","btn btn-light border my-1"),k(w,"class","btn btn-light border my-1"),k(h,"class","btn-group"),k(n,"class","card-body"),k(e,"class","card")},m(l,s){f(l,e,s),d(e,n),d(n,c),d(c,o),_&&_.m(o,null),d(c,r);for(let t=0;t<H.length;t+=1)H[t]&&H[t].m(c,null);d(n,b),d(n,h),d(h,x),d(h,y),d(h,w),C=!0,S||(z=[v(x,"click",t[3]),v(w,"click",t[10])],S=!0)},p(t,[e]){if(_&&_.p&&(!C||32&e)&&a(_,D,t,t[5],C?i(D,t[5],e,null):u(t[5]),null),23&e){let n;for(T=t[0],n=0;n<T.length;n+=1){const l=_e(t,T,n);H[n]?H[n].p(l,e):(H[n]=Me(l),H[n].c(),H[n].m(c,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=T.length}},i(t){C||(K(_,t),C=!0)},o(t){R(_,t),C=!1},d(t){t&&m(e),_&&_.d(t),p(H,t),S=!1,l(z)}}}function We(t,e,n){let l,{$$slots:c={},$$scope:o}=e,{items:s=[]}=e,r=-1;_((()=>{l&&l.focus()}));return t.$$set=t=>{"items"in t&&n(0,s=t.items),"$$scope"in t&&n(5,o=t.$$scope)},[s,l,r,function(){s.push(""),n(0,s),n(2,r=s.length-1)},function(){s[r]||s.splice(r,1),n(2,r=-1)},o,c,function(t,e){t[e]=this.value,n(0,s)},function(t){M[t?"unshift":"push"]((()=>{l=t,n(1,l)}))},t=>n(2,r=t),()=>{s.sort(),n(0,s)}]}class Le extends nt{constructor(t){super(),et(this,t,We,Ee,o,{items:0})}}function Ae(t){let e,n,l,c,o=t[0].name+"";return{c(){e=$("button"),n=b(o),k(e,"class","btn btn-light w-100 text-left font-weight-bold"),w(e,"min-height","2.2em")},m(o,s){f(o,e,s),d(e,n),l||(c=v(e,"click",t[9]),l=!0)},p(t,e){1&e&&o!==(o=t[0].name+"")&&x(n,o)},d(t){t&&m(e),l=!1,c()}}}function qe(t){let e,n,c;return{c(){e=$("input"),k(e,"class","form-control")},m(l,o){f(l,e,o),t[7](e),y(e,t[0].name),n||(c=[v(e,"blur",t[6]),v(e,"input",t[8])],n=!0)},p(t,n){1&n&&e.value!==t[0].name&&y(e,t[0].name)},d(o){o&&m(e),t[7](null),n=!1,l(c)}}}function Ie(e){let n,l,c;return{c(){n=$("button"),n.textContent="show",k(n,"class","badge btn btn-light border ml-1 p-2")},m(t,o){f(t,n,o),l||(c=v(n,"click",e[11]),l=!0)},p:t,d(t){t&&m(n),l=!1,c()}}}function Ne(e){let n,l,c;return{c(){n=$("button"),n.textContent="hide",k(n,"class","badge btn btn-light border ml-1 p-2")},m(t,o){f(t,n,o),l||(c=v(n,"click",e[10]),l=!0)},p:t,d(t){t&&m(n),l=!1,c()}}}function Ue(t){let e,n,l,c,o,s,r,i,a,u,p,b,h;function x(e){t[14](e)}c=new _t({props:{items:t[0].tags}});let y={};return void 0!==t[0].description&&(y.content=t[0].description),s=new oe({props:y}),M.push((()=>Z(s,"content",x))),{c(){e=$("div"),n=$("div"),l=$("div"),Q(c.$$.fragment),o=g(),Q(s.$$.fragment),i=g(),a=$("div"),u=$("button"),u.textContent="Delete",k(l,"class","mb-1"),k(u,"class","btn btn-dark"),k(a,"class","mt-1"),k(n,"class","card-body p-2"),k(e,"class","card")},m(r,m){f(r,e,m),d(e,n),d(n,l),Y(c,l,null),d(n,o),Y(s,n,null),d(n,i),d(n,a),d(a,u),p=!0,b||(h=v(u,"click",t[15]),b=!0)},p(t,e){const n={};1&e&&(n.items=t[0].tags),c.$set(n);const l={};!r&&1&e&&(r=!0,l.content=t[0].description,I((()=>r=!1))),s.$set(l)},i(t){p||(K(c.$$.fragment,t),K(s.$$.fragment,t),p=!0)},o(t){R(c.$$.fragment,t),R(s.$$.fragment,t),p=!1},d(t){t&&m(e),X(c),X(s),b=!1,h()}}}function Oe(t){let e,n,c,o,s,r,i,a,u,p,h,y,w,C,S,z=t[0].conditions+"";function D(t,e){return t[3]?qe:Ae}let _=D(t),T=_(t);function H(t,e){return t[2]?Ie:Ne}let M=H(t),E=M(t),W=!t[2]&&Ue(t);return{c(){e=$("div"),n=$("div"),c=$("button"),o=b(z),s=g(),T.c(),r=g(),E.c(),i=g(),a=$("div"),u=$("button"),u.textContent="↑",p=g(),h=$("button"),h.textContent="↓",y=g(),W&&W.c(),k(c,"class","btn btn-dark"),k(c,"title","Number of conditions"),k(u,"class","badge btn btn-light border ml-1 p-2"),k(h,"class","badge btn btn-light border p-2"),k(a,"class","btn-group"),k(n,"class","d-flex"),k(e,"class","mb-2")},m(l,m){f(l,e,m),d(e,n),d(n,c),d(c,o),d(n,s),T.m(n,null),d(n,r),E.m(n,null),d(n,i),d(n,a),d(a,u),d(a,p),d(a,h),d(e,y),W&&W.m(e,null),w=!0,C||(S=[v(c,"click",t[5]),v(u,"click",t[12]),v(h,"click",t[13])],C=!0)},p(t,[l]){(!w||1&l)&&z!==(z=t[0].conditions+"")&&x(o,z),_===(_=D(t))&&T?T.p(t,l):(T.d(1),T=_(t),T&&(T.c(),T.m(n,r))),M===(M=H(t))&&E?E.p(t,l):(E.d(1),E=M(t),E&&(E.c(),E.m(n,i))),t[2]?W&&(j(),R(W,1,1,(()=>{W=null})),B()):W?(W.p(t,l),4&l&&K(W,1)):(W=Ue(t),W.c(),K(W,1),W.m(e,null))},i(t){w||(K(W),w=!0)},o(t){R(W),w=!1},d(t){t&&m(e),T.d(),E.d(),W&&W.d(),C=!1,l(S)}}}function Pe(t,e,n){let l,{follower:c}=e,{actions:o}=e,s=!0,r=!1;_((()=>{l&&l.focus()}));return t.$$set=t=>{"follower"in t&&n(0,c=t.follower),"actions"in t&&n(1,o=t.actions)},[c,o,s,r,l,function(t){n(0,c.conditions+=t.shiftKey?-1:1,c),c.conditions<0&&n(0,c.conditions=6,c),c.conditions>6&&n(0,c.conditions=0,c)},()=>n(3,r=!1),function(t){M[t?"unshift":"push"]((()=>{l=t,n(4,l)}))},function(){c.name=this.value,n(0,c)},()=>n(3,r=!0),()=>n(2,s=!0),()=>n(2,s=!1),()=>o.move(c,-1),()=>o.move(c,1),function(e){t.$$.not_equal(c.description,e)&&(c.description=e,n(0,c))},()=>o.delete(c)]}class Fe extends nt{constructor(t){super(),et(this,t,Pe,Oe,o,{follower:0,actions:1})}}function Ve(t,e,n){const l=t.slice();return l[3]=e[n],l}function je(t,e){let n,l,c;return l=new Fe({props:{follower:e[3],actions:e[1]}}),{key:t,first:null,c(){n=h(),Q(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),Y(l,t,e),c=!0},p(t,n){e=t;const c={};1&n&&(c.follower=e[3]),l.$set(c)},i(t){c||(K(l.$$.fragment,t),c=!0)},o(t){R(l.$$.fragment,t),c=!1},d(t){t&&m(n),X(l,t)}}}function Be(t){let e,n,l,c,o,s,r,i,a,u,p=[],b=new Map,h=t[0];const x=t=>t[3].id;for(let e=0;e<h.length;e+=1){let n=Ve(t,h,e),l=x(n);b.set(l,p[e]=je(l,n))}return{c(){e=$("div"),n=$("div"),l=$("h2"),l.textContent="Followers",c=g(),o=$("div"),s=$("button"),s.textContent="Add follower",r=g();for(let t=0;t<p.length;t+=1)p[t].c();k(s,"class","btn btn-light border mb-1 mr-1"),k(o,"class","d-flex mb-1"),k(n,"class","card-body"),k(e,"class","card")},m(m,$){f(m,e,$),d(e,n),d(n,l),d(n,c),d(n,o),d(o,s),d(n,r);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(n,null);i=!0,a||(u=v(s,"click",t[2]),a=!0)},p(t,[e]){3&e&&(h=t[0],j(),p=G(p,e,x,1,t,h,b,n,J,je,null,Ve),B())},i(t){if(!i){for(let t=0;t<h.length;t+=1)K(p[t]);i=!0}},o(t){for(let t=0;t<p.length;t+=1)R(p[t]);i=!1},d(t){t&&m(e);for(let t=0;t<p.length;t+=1)p[t].d();a=!1,u()}}}function Ke(t,e,n){let{followers:l=[]}=e;l||(l=[]);const c={delete:t=>{if(!confirm(`Delete ${t.name}?`))return;let e=l.indexOf(t);l.splice(e,1),n(0,l)},move:(t,e)=>{let c=l.indexOf(t);l.splice(c,1),c+=e,c<0?c=l.length:c>l.length&&(c=0),l.splice(c,0,t),n(0,l)}};return t.$$set=t=>{"followers"in t&&n(0,l=t.followers)},[l,c,function(){l.push({id:crypto.randomUUID(),name:"New follower",conditions:0,description:"",tags:[]}),n(0,l)}]}class Re extends nt{constructor(t){super(),et(this,t,Ke,Be,o,{followers:0})}}function Je(t){let e;return{c(){e=b("Friends")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Ge(t){let e;return{c(){e=b("Enemies")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Ze(t){let e,n,l,c,o,s,r,i,a,u;return n=new Re({props:{followers:t[0].followers}}),s=new Le({props:{items:t[0].friends,$$slots:{default:[Je]},$$scope:{ctx:t}}}),a=new Le({props:{items:t[0].enemies,$$slots:{default:[Ge]},$$scope:{ctx:t}}}),{c(){e=$("div"),Q(n.$$.fragment),l=g(),c=$("div"),o=$("div"),Q(s.$$.fragment),r=g(),i=$("div"),Q(a.$$.fragment),k(o,"class","col-md-6"),k(i,"class","col-md-6"),k(c,"class","row"),k(e,"class","container-fluid")},m(t,m){f(t,e,m),Y(n,e,null),d(e,l),d(e,c),d(c,o),Y(s,o,null),d(c,r),d(c,i),Y(a,i,null),u=!0},p(t,[e]){const l={};1&e&&(l.followers=t[0].followers),n.$set(l);const c={};1&e&&(c.items=t[0].friends),2&e&&(c.$$scope={dirty:e,ctx:t}),s.$set(c);const o={};1&e&&(o.items=t[0].enemies),2&e&&(o.$$scope={dirty:e,ctx:t}),a.$set(o)},i(t){u||(K(n.$$.fragment,t),K(s.$$.fragment,t),K(a.$$.fragment,t),u=!0)},o(t){R(n.$$.fragment,t),R(s.$$.fragment,t),R(a.$$.fragment,t),u=!1},d(t){t&&m(e),X(n),X(s),X(a)}}}function Qe(t,e,n){let{circles:l}=e;return l.followers||(l.followers=[]),t.$$set=t=>{"circles"in t&&n(0,l=t.circles)},[l]}class Ye extends nt{constructor(t){super(),et(this,t,Qe,Ze,o,{circles:0})}}function Xe(t){let e,n,l,c;const o=t[2].default,r=s(o,t,t[1],null);return{c(){e=$("button"),r&&r.c(),k(e,"class","border border-dark btn m-1"),C(e,"btn-dark",t[0]),C(e,"btn-light",!t[0])},m(o,s){f(o,e,s),r&&r.m(e,null),n=!0,l||(c=v(e,"click",t[3]),l=!0)},p(t,[l]){r&&r.p&&(!n||2&l)&&a(r,o,t,t[1],n?i(o,t[1],l,null):u(t[1]),null),(!n||1&l)&&C(e,"btn-dark",t[0]),(!n||1&l)&&C(e,"btn-light",!t[0])},i(t){n||(K(r,t),n=!0)},o(t){R(r,t),n=!1},d(t){t&&m(e),r&&r.d(t),l=!1,c()}}}function tn(t,e,n){let{$$slots:l={},$$scope:c}=e,{selected:o=!1}=e;return t.$$set=t=>{"selected"in t&&n(0,o=t.selected),"$$scope"in t&&n(1,c=t.$$scope)},[o,c,l,()=>n(0,o=!o)]}class en extends nt{constructor(t){super(),et(this,t,tn,Xe,o,{selected:0})}}function nn(t,e,n){const l=t.slice();return l[16]=e[n],l}function ln(e){let n,l,c,o;return{c(){n=$("div"),l=$("button"),l.textContent="Conditions",k(l,"class","btn btn-light border col"),k(n,"class","container-fluid")},m(t,s){f(t,n,s),d(n,l),c||(o=v(l,"click",e[15]),c=!0)},p:t,i:t,o:t,d(t){t&&m(n),c=!1,o()}}}function cn(t){let e,n,l,c,o;const s=[sn,on],r=[];function i(t,e){return t[2]?1:0}return l=i(t),c=r[l]=s[l](t),{c(){e=$("div"),n=$("div"),c.c(),k(n,"class","card"),k(e,"class","container-fluid")},m(t,c){f(t,e,c),d(e,n),r[l].m(n,null),o=!0},p(t,e){let o=l;l=i(t),l===o?r[l].p(t,e):(j(),R(r[o],1,1,(()=>{r[o]=null})),B(),c=r[l],c?c.p(t,e):(c=r[l]=s[l](t),c.c()),K(c,1),c.m(n,null))},i(t){o||(K(c),o=!0)},o(t){R(c),o=!1},d(t){t&&m(e),r[l].d()}}}function on(e){let n,l,c,o,s,r,i,a,u=e[3],b=[];for(let t=0;t<u.length;t+=1)b[t]=rn(nn(e,u,t));return{c(){n=$("div"),l=$("h5"),l.textContent="Conditions",c=g(),o=$("button"),o.innerHTML='<span aria-hidden="true">✗</span>',s=g(),r=$("div");for(let t=0;t<b.length;t+=1)b[t].c();k(l,"class","card-title"),k(o,"type","button"),k(o,"class","close position-topright"),k(n,"class","card-header"),k(r,"class","card-body")},m(t,u){f(t,n,u),d(n,l),d(n,c),d(n,o),f(t,s,u),f(t,r,u);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(r,null);i||(a=v(o,"click",e[14]),i=!0)},p(t,e){if(8&e){let n;for(u=t[3],n=0;n<u.length;n+=1){const l=nn(t,u,n);b[n]?b[n].p(l,e):(b[n]=rn(l),b[n].c(),b[n].m(r,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=u.length}},i:t,o:t,d(t){t&&m(n),t&&m(s),t&&m(r),p(b,t),i=!1,a()}}}function sn(t){let e,n,c,o,s,r,i,a,u,p,b,h,x,y,w,C,S,z,D,_,T,H,E,W,L,A,q,N,U,O,P,F;function V(e){t[4](e)}let j={$$slots:{default:[an]},$$scope:{ctx:t}};function B(e){t[5](e)}void 0!==t[0].conditions.fresh&&(j.selected=t[0].conditions.fresh),n=new en({props:j}),M.push((()=>Z(n,"selected",V)));let J={$$slots:{default:[un]},$$scope:{ctx:t}};function G(e){t[6](e)}void 0!==t[0].conditions.hungry&&(J.selected=t[0].conditions.hungry),s=new en({props:J}),M.push((()=>Z(s,"selected",B)));let tt={$$slots:{default:[dn]},$$scope:{ctx:t}};function et(e){t[7](e)}void 0!==t[0].conditions.angry&&(tt.selected=t[0].conditions.angry),a=new en({props:tt}),M.push((()=>Z(a,"selected",G)));let nt={$$slots:{default:[fn]},$$scope:{ctx:t}};function lt(e){t[8](e)}void 0!==t[0].conditions.afraid&&(nt.selected=t[0].conditions.afraid),b=new en({props:nt}),M.push((()=>Z(b,"selected",et)));let ct={$$slots:{default:[mn]},$$scope:{ctx:t}};function ot(e){t[9](e)}void 0!==t[0].conditions.exhausted&&(ct.selected=t[0].conditions.exhausted),y=new en({props:ct}),M.push((()=>Z(y,"selected",lt)));let st={$$slots:{default:[pn]},$$scope:{ctx:t}};function rt(e){t[10](e)}void 0!==t[0].conditions.injured&&(st.selected=t[0].conditions.injured),S=new en({props:st}),M.push((()=>Z(S,"selected",ot)));let it={$$slots:{default:[$n]},$$scope:{ctx:t}};function at(e){t[11](e)}void 0!==t[0].conditions.sick&&(it.selected=t[0].conditions.sick),_=new en({props:it}),M.push((()=>Z(_,"selected",rt)));let ut={$$slots:{default:[bn]},$$scope:{ctx:t}};return void 0!==t[0].conditions.dead&&(ut.selected=t[0].conditions.dead),E=new en({props:ut}),M.push((()=>Z(E,"selected",at))),{c(){e=$("div"),Q(n.$$.fragment),o=g(),Q(s.$$.fragment),i=g(),Q(a.$$.fragment),p=g(),Q(b.$$.fragment),x=g(),Q(y.$$.fragment),C=g(),Q(S.$$.fragment),D=g(),Q(_.$$.fragment),H=g(),Q(E.$$.fragment),L=g(),A=$("div"),q=$("button"),q.textContent="?",N=g(),U=$("button"),U.textContent="✗",k(e,"class","card-body d-flex flex-wrap"),k(q,"class","btn badge btn-light border border-dark"),k(U,"class","btn badge btn-light border border-dark"),k(A,"class","btn-group position-topright")},m(l,c){f(l,e,c),Y(n,e,null),d(e,o),Y(s,e,null),d(e,i),Y(a,e,null),d(e,p),Y(b,e,null),d(e,x),Y(y,e,null),d(e,C),Y(S,e,null),d(e,D),Y(_,e,null),d(e,H),Y(E,e,null),f(l,L,c),f(l,A,c),d(A,q),d(A,N),d(A,U),O=!0,P||(F=[v(q,"click",t[12]),v(U,"click",t[13])],P=!0)},p(t,e){const l={};524288&e&&(l.$$scope={dirty:e,ctx:t}),!c&&1&e&&(c=!0,l.selected=t[0].conditions.fresh,I((()=>c=!1))),n.$set(l);const o={};524288&e&&(o.$$scope={dirty:e,ctx:t}),!r&&1&e&&(r=!0,o.selected=t[0].conditions.hungry,I((()=>r=!1))),s.$set(o);const i={};524288&e&&(i.$$scope={dirty:e,ctx:t}),!u&&1&e&&(u=!0,i.selected=t[0].conditions.angry,I((()=>u=!1))),a.$set(i);const d={};524288&e&&(d.$$scope={dirty:e,ctx:t}),!h&&1&e&&(h=!0,d.selected=t[0].conditions.afraid,I((()=>h=!1))),b.$set(d);const f={};524288&e&&(f.$$scope={dirty:e,ctx:t}),!w&&1&e&&(w=!0,f.selected=t[0].conditions.exhausted,I((()=>w=!1))),y.$set(f);const m={};524288&e&&(m.$$scope={dirty:e,ctx:t}),!z&&1&e&&(z=!0,m.selected=t[0].conditions.injured,I((()=>z=!1))),S.$set(m);const p={};524288&e&&(p.$$scope={dirty:e,ctx:t}),!T&&1&e&&(T=!0,p.selected=t[0].conditions.sick,I((()=>T=!1))),_.$set(p);const $={};524288&e&&($.$$scope={dirty:e,ctx:t}),!W&&1&e&&(W=!0,$.selected=t[0].conditions.dead,I((()=>W=!1))),E.$set($)},i(t){O||(K(n.$$.fragment,t),K(s.$$.fragment,t),K(a.$$.fragment,t),K(b.$$.fragment,t),K(y.$$.fragment,t),K(S.$$.fragment,t),K(_.$$.fragment,t),K(E.$$.fragment,t),O=!0)},o(t){R(n.$$.fragment,t),R(s.$$.fragment,t),R(a.$$.fragment,t),R(b.$$.fragment,t),R(y.$$.fragment,t),R(S.$$.fragment,t),R(_.$$.fragment,t),R(E.$$.fragment,t),O=!1},d(t){t&&m(e),X(n),X(s),X(a),X(b),X(y),X(S),X(_),X(E),t&&m(L),t&&m(A),P=!1,l(F)}}}function rn(e){let n,l,c,o,s,r=e[16].title+"",i=e[16].text+"";return{c(){n=$("h5"),l=b(r),c=g(),o=$("p"),s=b(i)},m(t,e){f(t,n,e),d(n,l),f(t,c,e),f(t,o,e),d(o,s)},p:t,d(t){t&&m(n),t&&m(c),t&&m(o)}}}function an(t){let e;return{c(){e=b("Fresh")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function un(t){let e;return{c(){e=b("Hungry and Thirsty")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function dn(t){let e;return{c(){e=b("Angry")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function fn(t){let e;return{c(){e=b("Afraid")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function mn(t){let e;return{c(){e=b("Exhausted")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function pn(t){let e;return{c(){e=b("Injured")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function $n(t){let e;return{c(){e=b("Sick")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function bn(t){let e;return{c(){e=b("Dead")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function gn(t){let e,n,l,c;const o=[cn,ln],s=[];function r(t,e){return t[1]?0:1}return e=r(t),n=s[e]=o[e](t),{c(){n.c(),l=h()},m(t,n){s[e].m(t,n),f(t,l,n),c=!0},p(t,[c]){let i=e;e=r(t),e===i?s[e].p(t,c):(j(),R(s[i],1,1,(()=>{s[i]=null})),B(),n=s[e],n?n.p(t,c):(n=s[e]=o[e](t),n.c()),K(n,1),n.m(l.parentNode,l))},i(t){c||(K(n),c=!0)},o(t){R(n),c=!1},d(t){s[e].d(t),t&&m(l)}}}function hn(t,e,n){let{model:l=rt()}=e,c=!0,o=!1;return t.$$set=t=>{"model"in t&&n(0,l=t.model)},[l,c,o,[{title:"Fresh",text:"+1D to all tests (except circles and resources) until other condition."},{title:"Hungry and Thirsty",text:"-1 disposition to any conflict."},{title:"Angry (Ob 2 Will)",text:"Can't use wises or beneficial traits."},{title:"Afraid (Ob 3 Will)",text:"Can't help or use Beginner's Luck."},{title:"Exhausted (Ob 3 Health)",text:"-1 disposition to any conflict. Instinct takes a turn and carries a -1s penalty."},{title:"Injured (Ob 4 Health)",text:"-1D to skills, Nature, Will, and Health (but not recovery)."},{title:"Sick (Ob 3 Will)",text:"-1D to skills, Nature, Will, and Health (but not recovery). Can't practice, learn, or advance."},{title:"Dead",text:"May not use wises, test, or help."}],function(e){t.$$.not_equal(l.conditions.fresh,e)&&(l.conditions.fresh=e,n(0,l))},function(e){t.$$.not_equal(l.conditions.hungry,e)&&(l.conditions.hungry=e,n(0,l))},function(e){t.$$.not_equal(l.conditions.angry,e)&&(l.conditions.angry=e,n(0,l))},function(e){t.$$.not_equal(l.conditions.afraid,e)&&(l.conditions.afraid=e,n(0,l))},function(e){t.$$.not_equal(l.conditions.exhausted,e)&&(l.conditions.exhausted=e,n(0,l))},function(e){t.$$.not_equal(l.conditions.injured,e)&&(l.conditions.injured=e,n(0,l))},function(e){t.$$.not_equal(l.conditions.sick,e)&&(l.conditions.sick=e,n(0,l))},function(e){t.$$.not_equal(l.conditions.dead,e)&&(l.conditions.dead=e,n(0,l))},()=>n(2,o=!0),()=>n(1,c=!1),()=>n(2,o=!1),()=>n(1,c=!0)]}class vn extends nt{constructor(t){super(),et(this,t,hn,gn,o,{model:0})}}function kn(t){let e,n,c,o,s,r,i,a,u,p,h,y,S,z=t[0].text+"",D=t[0].size+"",_=t[0].stackSize&&yn(t);return{c(){e=$("span"),n=$("span"),n.innerHTML='<span style="align-self: center;">⦀</span>',c=g(),o=$("span"),s=$("span"),r=b(z),i=g(),_&&_.c(),a=g(),u=$("button"),p=b(D),k(n,"tabindex","0"),k(n,"class","btn btn-light border border-dark flex-grow-0 align-items-center d-flex"),k(n,"draggable","true"),k(n,"title","Move"),k(o,"class","btn btn-light text-left border border-dark flex-grow-1"),k(u,"class","btn btn-light border border-dark flex-grow-0"),k(e,"class","d-flex btn-group mb-1"),w(e,"min-height",2.5*t[4]+"em"),C(e,"m-2",t[2])},m(l,m){f(l,e,m),d(e,n),d(e,c),d(e,o),d(o,s),d(s,r),d(o,i),_&&_.m(o,null),d(e,a),d(e,u),d(u,p),h=!0,y||(S=[v(n,"dragstart",t[16]),v(n,"dragend",t[17]),v(n,"click",t[5]),v(u,"click",t[19])],y=!0)},p(t,n){(!h||1&n)&&z!==(z=t[0].text+"")&&x(r,z),t[0].stackSize?_?(_.p(t,n),1&n&&K(_,1)):(_=yn(t),_.c(),K(_,1),_.m(o,null)):_&&(j(),R(_,1,1,(()=>{_=null})),B()),(!h||1&n)&&D!==(D=t[0].size+"")&&x(p,D),(!h||16&n)&&w(e,"min-height",2.5*t[4]+"em"),(!h||4&n)&&C(e,"m-2",t[2])},i(t){h||(K(_),h=!0)},o(t){R(_),h=!1},d(t){t&&m(e),_&&_.d(),y=!1,l(S)}}}function xn(e){let n,c,o,s,r,i,a,u,p,h,C,S,z,D,_,T,H,M,E,W,L,A,q,I,N,U,O,P,F,V,j,B,K,R,J,G,Z,Q,Y,X,tt,et,nt,lt,ct,ot=e[0].size+"",st=e[0].stackSize+"";return{c(){n=$("div"),c=$("div"),o=$("input"),s=g(),r=$("button"),i=b("Done"),a=g(),u=$("div"),p=$("span"),h=b(ot),C=g(),S=$("span"),S.textContent="Size",z=g(),D=$("div"),_=$("button"),T=b("↑"),H=g(),M=$("button"),E=b("↓"),W=g(),L=$("div"),A=$("span"),q=b(st),I=g(),N=$("span"),N.textContent="Uses",U=g(),O=$("div"),P=$("button"),F=b("↑"),V=g(),j=$("button"),B=b("↓"),K=g(),R=$("div"),J=$("div"),G=$("button"),Z=b("↑"),Q=g(),Y=$("button"),X=b("↓"),tt=g(),et=$("button"),nt=b("Delete"),k(o,"class","form-control flex-grow-1"),w(o,"min-width","0px"),k(r,"class",Sn+" btn-light ml-1"),k(c,"class","d-flex m-1"),k(p,"class",Sn+" btn-dark"),k(S,"class","ml-1"),k(_,"class",Sn),k(M,"class",Sn),k(D,"class","btn-group ml-auto"),k(u,"class","d-flex m-1 align-items-center"),k(A,"class",Sn+" btn-dark"),k(N,"class","ml-1"),k(P,"class",Sn),k(j,"class",Sn),k(O,"class","btn-group ml-auto"),k(L,"class","d-flex m-1 align-items-center"),k(G,"class",Sn+" btn-light"),k(Y,"class",Sn+" btn-light"),k(J,"class","btn-group"),k(et,"class",Sn+" btn-light ml-auto"),k(R,"class","d-flex m-1 align-items-center"),k(n,"class","btn bg-light mb-1 p-0 w-100 border")},m(t,l){f(t,n,l),d(n,c),d(c,o),y(o,e[0].text),d(c,s),d(c,r),d(r,i),d(n,a),d(n,u),d(u,p),d(p,h),d(u,C),d(u,S),d(u,z),d(u,D),d(D,_),d(_,T),d(D,H),d(D,M),d(M,E),d(n,W),d(n,L),d(L,A),d(A,q),d(L,I),d(L,N),d(L,U),d(L,O),d(O,P),d(P,F),d(O,V),d(O,j),d(j,B),d(n,K),d(n,R),d(R,J),d(J,G),d(G,Z),d(J,Q),d(J,Y),d(Y,X),d(R,tt),d(R,et),d(et,nt),lt||(ct=[v(o,"input",e[7]),v(r,"click",e[8]),v(_,"click",e[9]),v(M,"click",e[10]),v(P,"click",e[11]),v(j,"click",e[12]),v(G,"click",e[13]),v(Y,"click",e[14]),v(et,"click",e[15])],lt=!0)},p(t,e){1&e&&o.value!==t[0].text&&y(o,t[0].text),1&e&&ot!==(ot=t[0].size+"")&&x(h,ot),1&e&&st!==(st=t[0].stackSize+"")&&x(q,st)},i:t,o:t,d(t){t&&m(n),lt=!1,l(ct)}}}function yn(t){let e,n,l;function c(e){t[18](e)}let o={count:t[0].stackSize,$$slots:{default:[wn]},$$scope:{ctx:t}};return void 0!==t[0].stack&&(o.value=t[0].stack),e=new ft({props:o}),M.push((()=>Z(e,"value",c))),{c(){Q(e.$$.fragment)},m(t,n){Y(e,t,n),l=!0},p(t,l){const c={};1&l&&(c.count=t[0].stackSize),1048576&l&&(c.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,c.value=t[0].stack,I((()=>n=!1))),e.$set(c)},i(t){l||(K(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function wn(t){let e;return{c(){e=b("Used")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Cn(t){let e,n,l,c;const o=[xn,kn],s=[];function r(t,e){return t[3]?0:1}return n=r(t),l=s[n]=o[n](t),{c(){e=$("div"),l.c()},m(t,l){f(t,e,l),s[n].m(e,null),c=!0},p(t,[c]){let i=n;n=r(t),n===i?s[n].p(t,c):(j(),R(s[i],1,1,(()=>{s[i]=null})),B(),l=s[n],l?l.p(t,c):(l=s[n]=o[n](t),l.c()),K(l,1),l.m(e,null))},i(t){c||(K(l),c=!0)},o(t){R(l),c=!1},d(t){t&&m(e),s[n].d()}}}const Sn="btn border border-dark align-self-start";function zn(t,e,n){let l,{item:c}=e,{actions:o}=e,{selected:s=!1}=e,r=!1;function i(t){n(0,c.stackSize+=t,c),c.stackSize<0&&n(0,c.stackSize=0,c)}void 0===c.stackSize&&(c.stackSize=0,c.stack=0);return t.$$set=t=>{"item"in t&&n(0,c=t.item),"actions"in t&&n(1,o=t.actions),"selected"in t&&n(2,s=t.selected)},t.$$.update=()=>{1&t.$$.dirty&&n(4,l=c.stackSize?c.size+1:c.size)},[c,o,s,r,l,function(){o.select(c)},i,function(){c.text=this.value,n(0,c)},()=>n(3,r=!1),()=>o.resize(c,1),()=>o.resize(c,-1),()=>i(1),()=>i(-1),()=>o.move(c,-1),()=>o.move(c,1),()=>o.delete(c),()=>o.dragStart(c),()=>o.dragEnd(),function(e){t.$$.not_equal(c.stack,e)&&(c.stack=e,n(0,c))},()=>n(3,r=!0)]}class Dn extends nt{constructor(t){super(),et(this,t,zn,Cn,o,{item:0,actions:1,selected:2})}}function _n(t,e,n){const l=t.slice();return l[25]=e[n],l}function Tn(t){let e,n,l,c=t[0].name+"";return{c(){e=$("h5"),n=$("span"),l=b(c),k(n,"class","card-title mb-0"),k(e,"class","m-0")},m(t,c){f(t,e,c),d(e,n),d(n,l)},p(t,e){1&e&&c!==(c=t[0].name+"")&&x(l,c)},d(t){t&&m(e)}}}function Hn(t){let e,n,l,c,o,s=t[0].name+"";return{c(){e=$("h4"),n=$("button"),l=b(s),k(n,"class","badge btn btn-light text-left card-title w-100 mb-0"),k(e,"class","flex-grow-1 m-0")},m(s,r){f(s,e,r),d(e,n),d(n,l),c||(o=v(n,"click",t[21]),c=!0)},p(t,e){1&e&&s!==(s=t[0].name+"")&&x(l,s)},d(t){t&&m(e),c=!1,o()}}}function Mn(t){let e,n,c;return{c(){e=$("input"),k(e,"class","form-control mr-2")},m(l,o){f(l,e,o),t[19](e),y(e,t[0].name),n||(c=[v(e,"blur",t[18]),v(e,"input",t[20])],n=!0)},p(t,n){1&n&&e.value!==t[0].name&&y(e,t[0].name)},d(o){o&&m(e),t[19](null),n=!1,l(c)}}}function En(t){let e,n,l,c,o,s=t[0].name+"";return{c(){e=$("h4"),n=$("button"),l=b(s),k(n,"class","badge btn btn-light text-left card-title w-100 mb-0"),k(e,"class","flex-grow-1 m-0")},m(s,r){f(s,e,r),d(e,n),d(n,l),c||(o=v(n,"click",t[15]),c=!0)},p(t,e){1&e&&s!==(s=t[0].name+"")&&x(l,s)},d(t){t&&m(e),c=!1,o()}}}function Wn(t){let e,n,l,c,o,s=t[0].size+"";return{c(){e=$("h5"),n=$("span"),l=b(t[3]),c=b(" / "),o=b(s),k(n,"class","badge btn btn-light"),k(e,"class","ml-auto mr-1")},m(t,s){f(t,e,s),d(e,n),d(n,l),d(n,c),d(n,o)},p(t,e){8&e&&x(l,t[3]),1&e&&s!==(s=t[0].size+"")&&x(o,s)},d(t){t&&m(e)}}}function Ln(t){let e,n,l;return{c(){e=$("h5"),n=$("span"),l=b(t[3]),k(n,"class","badge btn btn-light"),k(e,"class","ml-auto mr-1")},m(t,c){f(t,e,c),d(e,n),d(n,l)},p(t,e){8&e&&x(l,t[3])},d(t){t&&m(e)}}}function An(t,e){let n,l,c;return l=new Dn({props:{item:e[25],actions:e[9],selected:e[2]==e[25]}}),{key:t,first:null,c(){n=h(),Q(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),Y(l,t,e),c=!0},p(t,n){e=t;const c={};1&n&&(c.item=e[25]),5&n&&(c.selected=e[2]==e[25]),l.$set(c)},i(t){c||(K(l.$$.fragment,t),c=!0)},o(t){R(l.$$.fragment,t),c=!1},d(t){t&&m(n),X(l,t)}}}function qn(t){let e,n,c,o;return{c(){e=$("button"),e.disabled=t[7],k(e,"class",n="drop btn border mb-1 "+(t[7]?"disabled btn-secondary":"btn-light")),w(e,"height",2.5*t[4]+"em")},m(n,l){f(n,e,l),c||(o=[v(e,"dragenter",t[11]),v(e,"dragleave",On),v(e,"dragover",t[12]),v(e,"drop",t[13]),v(e,"click",t[10])],c=!0)},p(t,l){128&l&&(e.disabled=t[7]),128&l&&n!==(n="drop btn border mb-1 "+(t[7]?"disabled btn-secondary":"btn-light"))&&k(e,"class",n),16&l&&w(e,"height",2.5*t[4]+"em")},d(t){t&&m(e),c=!1,l(o)}}}function In(e){let n,l,c,o;return{c(){n=$("div"),l=$("button"),l.textContent="Delete",k(l,"class","btn btn-light border ml-auto"),k(n,"class","d-flex")},m(t,s){f(t,n,s),d(n,l),c||(o=v(l,"click",e[23]),c=!0)},p:t,d(t){t&&m(n),c=!1,o()}}}function Nn(t){let e,n,c,o,s,r,i,a,u,p,h,x,y,w,C,S,z,D,_,T=[],H=new Map;function M(t,e){return"pack"==t[0].format?En:"custom"==t[0].format&&t[5]?Mn:"custom"==t[0].format?Hn:Tn}let E=M(t),W=E(t);let L=function(t){return t[8]?Ln:Wn}(t),A=L(t),q=t[0].items;const I=t=>t[25].id;for(let e=0;e<q.length;e+=1){let n=_n(t,q,e),l=I(n);H.set(l,T[e]=An(l,n))}let N=t[4]>0&&qn(t),U="custom"==t[0].format&&In(t);return{c(){e=$("div"),n=$("div"),c=$("div"),W.c(),o=g(),A.c(),s=g(),r=$("div"),i=$("button"),a=b("hide"),u=g(),p=$("button"),h=b("a → z"),x=g(),y=$("div"),w=$("div");for(let t=0;t<T.length;t+=1)T[t].c();C=g(),N&&N.c(),S=g(),U&&U.c(),k(i,"class",Un),k(p,"class",Un),k(r,"class","ml-1 btn-group"),k(c,"class","card-header p-2 d-flex"),k(w,"class","d-flex flex-column"),k(y,"class","card-body"),k(n,"class","card"),k(e,"class","col-lg-3 col-md-4 col-sm-6 my-1")},m(l,m){f(l,e,m),d(e,n),d(n,c),W.m(c,null),d(c,o),A.m(c,null),d(c,s),d(c,r),d(r,i),d(i,a),d(r,u),d(r,p),d(p,h),d(n,x),d(n,y),d(y,w);for(let t=0;t<T.length;t+=1)T[t]&&T[t].m(w,null);d(w,C),N&&N.m(w,null),d(y,S),U&&U.m(y,null),z=!0,D||(_=[v(i,"click",t[22]),v(p,"click",t[14])],D=!0)},p(t,[e]){E===(E=M(t))&&W?W.p(t,e):(W.d(1),W=E(t),W&&(W.c(),W.m(c,o))),A.p(t,e),517&e&&(q=t[0].items,j(),T=G(T,e,I,1,t,q,H,w,J,An,C,_n),B()),t[4]>0?N?N.p(t,e):(N=qn(t),N.c(),N.m(w,null)):N&&(N.d(1),N=null),"custom"==t[0].format?U?U.p(t,e):(U=In(t),U.c(),U.m(y,null)):U&&(U.d(1),U=null)},i(t){if(!z){for(let t=0;t<q.length;t+=1)K(T[t]);z=!0}},o(t){for(let t=0;t<T.length;t+=1)R(T[t]);z=!1},d(t){t&&m(e),W.d(),A.d();for(let t=0;t<T.length;t+=1)T[t].d();N&&N.d(),U&&U.d(),D=!1,l(_)}}}const Un="badge btn btn-light border border-dark align-self-center p-2";function On(t){t.target.classList.remove("dragover")}function Pn(t,e,n){let l,c,o,s,{container:r}=e,{dragItem:i}=e,{actions:a}=e,{selected:u}=e;const d=["custom","pockets"].includes(r.format),f={delete:t=>{let e=r.items.indexOf(t);r.items.splice(e,1),n(0,r)},dragEnd:()=>{a.dragEnd()},dragStart:t=>{a.dragStart(r,t)},move:(t,e)=>{let l=r.items.indexOf(t);r.items.splice(l,1),l+=e,l<0?l=r.items.length:l>r.items.length&&(l=0),r.items.splice(l,0,t),n(0,r)},resize:(t,e)=>{t.size+=e,c-e<0&&(t.size-=e),0==t.size&&(t.size=1),n(0,r)},select:t=>{a.select(r,t)}};let m,p,$=!1;r.items.forEach((t=>{t.id||(t.id=crypto.randomUUID())})),_((()=>{m&&m.focus()}));return t.$$set=t=>{"container"in t&&n(0,r=t.container),"dragItem"in t&&n(16,i=t.dragItem),"actions"in t&&n(1,a=t.actions),"selected"in t&&n(2,u=t.selected)},t.$$.update=()=>{1&t.$$.dirty&&n(3,l=r.items.reduce(((t,e)=>t+e.size),0)),9&t.$$.dirty&&n(4,c=d?1:r.size-l),65540&t.$$.dirty&&n(17,p=d?1:null!=i?i.size:null!=u?u.size:1),196628&t.$$.dirty&&(o=(null!=i||null!=u)&&c>=p),131088&t.$$.dirty&&n(7,s=c<p)},[r,a,u,l,c,$,m,s,d,f,function(){0!=c&&(o?a.selectEnd(r):null==u&&(r.items.push({text:"",size:1,id:crypto.randomUUID()}),n(0,r)))},function(t){o&&t.target.classList.add("dragover")},function(t){o&&t.preventDefault()},function(t){t.target.classList.remove("dragover"),a.dragEnd(r)},function(){r.items.sort(((t,e)=>t.text.localeCompare(e.text))),n(0,r)},function(){6==r.size&&l<=3?(n(0,r.size=3,r),n(0,r.name="Satchel",r)):(n(0,r.size=6,r),n(0,r.name="Backpack",r))},i,p,()=>n(5,$=!1),function(t){M[t?"unshift":"push"]((()=>{m=t,n(6,m)}))},function(){r.name=this.value,n(0,r)},()=>n(5,$=!0),()=>a.hide(r),()=>a.delete(r)]}class Fn extends nt{constructor(t){super(),et(this,t,Pn,Nn,o,{container:0,dragItem:16,actions:1,selected:2})}}function Vn(t,e,n){const l=t.slice();return l[7]=e[n],l}function jn(t,e,n){const l=t.slice();return l[7]=e[n],l[10]=e,l[11]=n,l}function Bn(t){let e,n,l,c,o=t[7].name+"";function s(){return t[5](t[7],t[10],t[11])}return{c(){e=$("button"),n=b(o),k(e,"class","btn btn-light border mt-1 mr-1")},m(t,o){f(t,e,o),d(e,n),l||(c=v(e,"click",s),l=!0)},p(e,l){t=e,1&l&&o!==(o=t[7].name+"")&&x(n,o)},d(t){t&&m(e),l=!1,c()}}}function Kn(t){let e,n=t[7].hide&&Bn(t);return{c(){n&&n.c(),e=h()},m(t,l){n&&n.m(t,l),f(t,e,l)},p(t,l){t[7].hide?n?n.p(t,l):(n=Bn(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&m(e)}}}function Rn(t){let e,n;return e=new Fn({props:{container:t[7],dragItem:t[1],actions:t[3],selected:t[2]}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.container=t[7]),2&n&&(l.dragItem=t[1]),4&n&&(l.selected=t[2]),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Jn(t,e){let n,l,c,o=!e[7].hide&&Rn(e);return{key:t,first:null,c(){n=h(),o&&o.c(),l=h(),this.first=n},m(t,e){f(t,n,e),o&&o.m(t,e),f(t,l,e),c=!0},p(t,n){(e=t)[7].hide?o&&(j(),R(o,1,1,(()=>{o=null})),B()):o?(o.p(e,n),1&n&&K(o,1)):(o=Rn(e),o.c(),K(o,1),o.m(l.parentNode,l))},i(t){c||(K(o),c=!0)},o(t){R(o),c=!1},d(t){t&&m(n),o&&o.d(t),t&&m(l)}}}function Gn(t){let e,n,l,c,o,s,r,i,a,u,b,h,x,y,w=[],C=new Map,S=t[0],z=[];for(let e=0;e<S.length;e+=1)z[e]=Kn(jn(t,S,e));let D=t[0];const _=t=>t[7].id;for(let e=0;e<D.length;e+=1){let n=Vn(t,D,e),l=_(n);C.set(l,w[e]=Jn(l,n))}return{c(){e=$("div"),n=$("div"),l=$("div"),c=$("div"),o=$("div"),o.innerHTML='<h5 class="m-0">Containers</h5>',s=g(),r=$("div"),i=$("button"),i.textContent="Add container",a=g(),u=$("div");for(let t=0;t<z.length;t+=1)z[t].c();b=g();for(let t=0;t<w.length;t+=1)w[t].c();k(o,"class","card-header p-2"),k(i,"class","btn btn-light border"),k(r,"class","card-body d-flex flex-column"),k(c,"class","card"),k(l,"class","col-md-12 my-1"),k(n,"class","row"),k(e,"class","container-fluid")},m(m,p){f(m,e,p),d(e,n),d(n,l),d(l,c),d(c,o),d(c,s),d(c,r),d(r,i),d(r,a),d(r,u);for(let t=0;t<z.length;t+=1)z[t]&&z[t].m(u,null);d(n,b);for(let t=0;t<w.length;t+=1)w[t]&&w[t].m(n,null);h=!0,x||(y=v(i,"click",t[4]),x=!0)},p(t,[e]){if(1&e){let n;for(S=t[0],n=0;n<S.length;n+=1){const l=jn(t,S,n);z[n]?z[n].p(l,e):(z[n]=Kn(l),z[n].c(),z[n].m(u,null))}for(;n<z.length;n+=1)z[n].d(1);z.length=S.length}15&e&&(D=t[0],j(),w=G(w,e,_,1,t,D,C,n,J,Jn,null,Vn),B())},i(t){if(!h){for(let t=0;t<D.length;t+=1)K(w[t]);h=!0}},o(t){for(let t=0;t<w.length;t+=1)R(w[t]);h=!1},d(t){t&&m(e),p(z,t);for(let t=0;t<w.length;t+=1)w[t].d();x=!1,y()}}}function Zn(t,e,n){let l,c,o,{inventory:s}=e;const r={delete:t=>{if(!confirm(`Delete ${t.name} permanently?`))return;let e=s.indexOf(t);s.splice(e,1),n(0,s)},dragEnd:t=>{if(t){let e=l.items.indexOf(c);l.items.splice(e,1),t.items.push(c)}n(1,c=null),l=null,n(2,o=null),n(0,s)},dragStart:(t,e)=>{l=t,n(1,c=e),n(0,s)},hide:t=>{t.hide=!0,n(0,s)},select:(t,e)=>{l=t,n(2,o=o==e?null:e),n(0,s)},selectEnd:t=>{let e=l.items.indexOf(o);l.items.splice(e,1),t.items.push(o),n(2,o=null),l=null,n(0,s)}};return t.$$set=t=>{"inventory"in t&&n(0,s=t.inventory)},t.$$.update=()=>{1&t.$$.dirty&&s.forEach((t=>{t.id||(t.id=crypto.randomUUID())}))},[s,c,o,r,function(){let t=ot({name:"new container",size:1,format:"custom"});s.push(t),n(0,s)},(t,e,l)=>n(0,e[l].hide=!1,s)]}class Qn extends nt{constructor(t){super(),et(this,t,Zn,Gn,o,{inventory:0})}}function Yn(t){let e,n,l,c;const o=t[4].default,r=s(o,t,t[3],null);return{c(){e=$("a"),r&&r.c(),k(e,"href","#"),k(e,"class","nav-item nav-link"),C(e,"active",t[0]==t[1])},m(o,s){f(o,e,s),r&&r.m(e,null),n=!0,l||(c=v(e,"click",t[2]),l=!0)},p(t,[l]){r&&r.p&&(!n||8&l)&&a(r,o,t,t[3],n?i(o,t[3],l,null):u(t[3]),null),(!n||3&l)&&C(e,"active",t[0]==t[1])},i(t){n||(K(r,t),n=!0)},o(t){R(r,t),n=!1},d(t){t&&m(e),r&&r.d(t),l=!1,c()}}}function Xn(t,e,n){let{$$slots:l={},$$scope:c}=e;const o=T();let{tabValue:s}=e,{tab:r=""}=e;return t.$$set=t=>{"tabValue"in t&&n(1,s=t.tabValue),"tab"in t&&n(0,r=t.tab),"$$scope"in t&&n(3,c=t.$$scope)},[r,s,function(){n(0,r=s),o("setTab",{tab:s})},c,l]}class tl extends nt{constructor(t){super(),et(this,t,Xn,Yn,o,{tabValue:1,tab:0})}}const el={colonialMarines:()=>({navbar:{tab:"bio"},abilities:ct(),advancement:{currentFate:0,currentPersona:0,spentFate:0,spentPersona:0,levelBenefits:[]},bio:{name:"",parents:"",mentor:"",age:"",home:"",level:"",raiment:"",stock:"",classValue:"",belief:"",creed:"",goal:"",instinct:"",epithet:""},circles:{friends:[],enemies:[]},conditions:{shown:!0,fresh:!1,hungry:!1,angry:!1,afraid:!1,exhausted:!1,injured:!1,sick:!1,dead:!1},inventory:[ot({name:"Armament",size:5,format:"pockets"}),ot({name:"Protection",size:2,format:"static"}),ot({name:"Pack",size:1,format:"pockets"}),ot({name:"Combat Webbing",size:1,format:"pockets"})],mod:"colonialMarines",notes:[],skills:{compact:!1,skills:[st({name:"Admin",bluck:"Will",special:!0}),st({name:"Armorer",bluck:"Health",special:!0}),st({name:"Broker",bluck:"Will",special:!0}),st({name:"Criminal",bluck:"Will",special:!0}),st({name:"Executive",bluck:"Will",special:!0}),st({name:"Gunner",bluck:"Health",special:!0}),st({name:"Instructor",bluck:"Health",special:!0}),st({name:"Leader",bluck:"Health",special:!0}),st({name:"Manipulator",bluck:"Will",special:!0}),st({name:"Medic",bluck:"Will",special:!0}),st({name:"Operator",bluck:"Health",special:!0}),st({name:"Persuader",bluck:"Will",special:!0}),st({name:"Pilot",bluck:"Health",special:!0}),st({name:"Programmer",bluck:"Will",special:!0}),st({name:"Scavenger",bluck:"Will",special:!0}),st({name:"Scientist",bluck:"Will",special:!0}),st({name:"Scout",bluck:"Will",special:!0}),st({name:"Soldier",bluck:"Health",special:!1}),st({name:"Survivalist",bluck:"Health",special:!0}),st({name:"Technician",bluck:"Health",special:!0})]},spells:{burden:0,urdr:0,memory:0,spells:[]},traits:[],wises:[]}),torchbearer:rt},nl=(t,e)=>{for(let n in e)t[n]||(t[n]=e[n]),"object"==typeof t[n]&&nl(t[n],e[n])};var ll=t=>{if(confirm(`Delete ${t.bio.name}?`))return localStorage.removeItem(t.bio.name),{success:`${t.bio.name} deleted from character storage`}},cl=()=>{if(confirm("Delete all saved characters?"))return localStorage.clear(),{success:"All characters deleted from character storage"}},ol=t=>{let e=URL.createObjectURL(new Blob([JSON.stringify(t)])),n=document.createElement("a");n.href=e,n.download=`${t.bio.name}.tb2e`,n.click()},sl=t=>{let e=document.createElement("input");e.type="file",e.accept=".tb2e",e.onchange=e=>{e.target.files[0].text().then((e=>{let n=JSON.parse(e).bio.name;localStorage.setItem(n,e),t(`${n} added to character storage`)}))},e.click()},rl=(t,e)=>{let n=e;if(n==`${t.bio.name}.tb2e`)return{model:t};let l="";return t.bio.name&&confirm(`Save ${t.bio.name} before changing characters?`)&&(localStorage.setItem(t.bio.name,JSON.stringify(t)),l+=`${t.bio.name} saved, `),(t=JSON.parse(localStorage.getItem(n))).mod||(t.mod="torchbearer"),nl(t,el[t.mod]()),{model:t,alert:{success:`${l}${t.bio.name} opened`}}},il=()=>{let t=[...new Array(window.localStorage.length)].map(((t,e)=>window.localStorage.key(e)));return t=t.filter((t=>t.endsWith(".tb2e"))),t.sort(((t,e)=>t.localeCompare(e))),t},al=(t,e)=>{let n="";return t.bio.name&&confirm(`Save ${t.bio.name} before changing characters?`)&&(localStorage.setItem(t.bio.name,JSON.stringify(t)),n+=`${t.bio.name} saved, `),{model:t=el[e](),alert:{success:`${n}${e} loaded`}}},ul=t=>t.bio.name?(localStorage.setItem(`${t.bio.name}.tb2e`,JSON.stringify(t)),{success:`${t.bio.name} saved`}):{error:"Cannot save an unnamed character"};const dl=new URLSearchParams(window.location.search).get("theme")??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");function fl(t,e,n){const l=t.slice();return l[42]=e[n],l}function ml(t){let e;return{c(){e=b("Abilities")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function pl(t){let e;return{c(){e=b("Advancement")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function $l(t){let e;return{c(){e=b("Bio")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function bl(t){let e;return{c(){e=b("Circles")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function gl(t){let e;return{c(){e=b("Inventory")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function hl(t){let e;return{c(){e=b("Notes")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function vl(t){let e;return{c(){e=b("Skills")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function kl(t){let e;return{c(){e=b("Spells")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function xl(t){let e;return{c(){e=b("Traits")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function yl(t){let e;return{c(){e=b("Wises")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function wl(t){let e,n,c,o,s=t[42]+"";function r(){return t[28](t[42])}return{c(){e=$("button"),n=b(s),k(e,"class","dropdown-item")},m(l,s){f(l,e,s),d(e,n),c||(o=[v(e,"blur",t[8]),v(e,"click",r)],c=!0)},p(e,l){t=e,8&l[0]&&s!==(s=t[42]+"")&&x(n,s)},d(t){t&&m(e),c=!1,l(o)}}}function Cl(t){let e,n,c,o,s,r=t[4].error+"";return{c(){e=$("button"),n=$("strong"),c=b(r),k(e,"class","alert alert-static alert-danger btn text-center w-100")},m(l,r){f(l,e,r),d(e,n),d(n,c),t[37](e),o||(s=[v(e,"blur",t[38]),v(e,"click",t[39])],o=!0)},p(t,e){16&e[0]&&r!==(r=t[4].error+"")&&x(c,r)},d(n){n&&m(e),t[37](null),o=!1,l(s)}}}function Sl(t){let e,n,c,o,s,r=t[4].success+"";return{c(){e=$("button"),n=$("strong"),c=b(r),k(e,"class","alert alert-static alert-success btn text-center w-100")},m(l,r){f(l,e,r),d(e,n),d(n,c),t[34](e),o||(s=[v(e,"blur",t[35]),v(e,"click",t[36])],o=!0)},p(t,e){16&e[0]&&r!==(r=t[4].success+"")&&x(c,r)},d(n){n&&m(e),t[34](null),o=!1,l(s)}}}function zl(t){let e,n,c,o,s,r,i,a,u,b,x,y,S,z,D,_,T,H,E,W,L,A,q,N,U,O,P,F,V,j,B,J,G,tt,et,nt,lt,ct,ot,st,rt,it,at,ut,dt,ft,mt,pt,$t,bt,gt,ht,vt,kt,xt,yt,wt,Ct,St,zt,Dt,_t,Tt,Ht,Mt,Et,Wt,Lt,At,qt,It,Nt;function Ut(e){t[17](e)}let Ot={tabValue:"abilities",$$slots:{default:[ml]},$$scope:{ctx:t}};function Pt(e){t[18](e)}void 0!==t[0]&&(Ot.tab=t[0]),r=new tl({props:Ot}),M.push((()=>Z(r,"tab",Ut))),r.$on("setTab",t[14]);let Ft={tabValue:"advancement",$$slots:{default:[pl]},$$scope:{ctx:t}};function Vt(e){t[19](e)}void 0!==t[0]&&(Ft.tab=t[0]),u=new tl({props:Ft}),M.push((()=>Z(u,"tab",Pt))),u.$on("setTab",t[14]);let jt={tabValue:"bio",$$slots:{default:[$l]},$$scope:{ctx:t}};function Bt(e){t[20](e)}void 0!==t[0]&&(jt.tab=t[0]),y=new tl({props:jt}),M.push((()=>Z(y,"tab",Vt))),y.$on("setTab",t[14]);let Kt={tabValue:"circles",$$slots:{default:[bl]},$$scope:{ctx:t}};function Rt(e){t[21](e)}void 0!==t[0]&&(Kt.tab=t[0]),D=new tl({props:Kt}),M.push((()=>Z(D,"tab",Bt))),D.$on("setTab",t[14]);let Jt={tabValue:"inventory",$$slots:{default:[gl]},$$scope:{ctx:t}};function Gt(e){t[22](e)}void 0!==t[0]&&(Jt.tab=t[0]),H=new tl({props:Jt}),M.push((()=>Z(H,"tab",Rt))),H.$on("setTab",t[14]);let Zt={tabValue:"notes",$$slots:{default:[hl]},$$scope:{ctx:t}};function Qt(e){t[23](e)}void 0!==t[0]&&(Zt.tab=t[0]),L=new tl({props:Zt}),M.push((()=>Z(L,"tab",Gt))),L.$on("setTab",t[14]);let Yt={tabValue:"skills",$$slots:{default:[vl]},$$scope:{ctx:t}};function Xt(e){t[24](e)}void 0!==t[0]&&(Yt.tab=t[0]),N=new tl({props:Yt}),M.push((()=>Z(N,"tab",Qt))),N.$on("setTab",t[14]);let te={tabValue:"spells",$$slots:{default:[kl]},$$scope:{ctx:t}};function ee(e){t[25](e)}void 0!==t[0]&&(te.tab=t[0]),P=new tl({props:te}),M.push((()=>Z(P,"tab",Xt))),P.$on("setTab",t[14]);let ne={tabValue:"traits",$$slots:{default:[xl]},$$scope:{ctx:t}};function le(e){t[26](e)}void 0!==t[0]&&(ne.tab=t[0]),j=new tl({props:ne}),M.push((()=>Z(j,"tab",ee))),j.$on("setTab",t[14]);let ce={tabValue:"wises",$$slots:{default:[yl]},$$scope:{ctx:t}};void 0!==t[0]&&(ce.tab=t[0]),G=new tl({props:ce}),M.push((()=>Z(G,"tab",le))),G.$on("setTab",t[14]);let oe=t[3],se=[];for(let e=0;e<oe.length;e+=1)se[e]=wl(fl(t,oe,e));function re(t,e){return t[4]?.success?Sl:t[4]?.error?Cl:void 0}let ie=re(t),ae=ie&&ie(t);return{c(){e=$("nav"),n=$("button"),n.innerHTML='<span class="navbar-toggler-icon"></span>',c=g(),o=$("div"),s=$("ul"),Q(r.$$.fragment),a=g(),Q(u.$$.fragment),x=g(),Q(y.$$.fragment),z=g(),Q(D.$$.fragment),T=g(),Q(H.$$.fragment),W=g(),Q(L.$$.fragment),q=g(),Q(N.$$.fragment),O=g(),Q(P.$$.fragment),V=g(),Q(j.$$.fragment),J=g(),Q(G.$$.fragment),et=g(),nt=$("li"),lt=$("a"),lt.textContent="Characters",ct=g(),ot=$("div");for(let t=0;t<se.length;t+=1)se[t].c();rt=g(),it=$("li"),at=$("a"),at.textContent="Mods",ut=g(),dt=$("div"),ft=$("button"),ft.textContent="Colonial Marines",mt=g(),pt=$("button"),pt.textContent="Torchbearer",bt=g(),gt=$("div"),ht=$("div"),vt=$("button"),vt.textContent="Options",kt=g(),xt=$("div"),yt=$("button"),yt.textContent="Save",wt=g(),Ct=$("button"),Ct.textContent="Export",St=g(),zt=$("button"),zt.textContent="Import",Dt=g(),_t=$("button"),_t.textContent="Delete",Tt=g(),Ht=$("button"),Ht.textContent="Delete all",Mt=g(),Et=$("button"),Et.textContent=("dark"==dl?"Light":"Dark")+" mode",Lt=g(),ae&&ae.c(),At=h(),k(n,"class","navbar-toggler"),k(n,"type","button"),k(lt,"href","#"),k(lt,"class","nav-link dropdown-toggle"),C(lt,"disabled",!t[3].length),k(ot,"class","dropdown-menu"),k(ot,"style",st="display: "+("characters"==t[2]?"block":"none")),k(nt,"class","nav-item dropdown"),k(at,"href","#"),k(at,"class","nav-link dropdown-toggle"),k(ft,"class","dropdown-item"),k(pt,"class","dropdown-item"),k(dt,"class","dropdown-menu"),k(dt,"style",$t="display: "+("mods"==t[2]?"block":"none")),k(it,"class","nav-item dropdown"),k(s,"class","navbar-nav mr-auto"),k(vt,"href","#"),k(vt,"class","dropdown-toggle btn btn-light border border-dark"),k(yt,"class","dropdown-item"),k(Ct,"class","dropdown-item"),k(zt,"class","dropdown-item"),k(_t,"class","dropdown-item"),k(Ht,"class","dropdown-item"),k(Et,"class","dropdown-item"),k(xt,"class","dropdown-menu"),k(xt,"style",Wt="display: "+("options"==t[2]?"block":"none")),k(ht,"class","nav-item dropdown"),k(gt,"class","navbar-nav"),k(o,"class","collapse navbar-collapse"),w(o,"display",t[1]),k(e,"class","navbar navbar-expand-md navbar-light bg-light")},m(l,i){f(l,e,i),d(e,n),d(e,c),d(e,o),d(o,s),Y(r,s,null),d(s,a),Y(u,s,null),d(s,x),Y(y,s,null),d(s,z),Y(D,s,null),d(s,T),Y(H,s,null),d(s,W),Y(L,s,null),d(s,q),Y(N,s,null),d(s,O),Y(P,s,null),d(s,V),Y(j,s,null),d(s,J),Y(G,s,null),d(s,et),d(s,nt),d(nt,lt),d(nt,ct),d(nt,ot);for(let t=0;t<se.length;t+=1)se[t]&&se[t].m(ot,null);d(s,rt),d(s,it),d(it,at),d(it,ut),d(it,dt),d(dt,ft),d(dt,mt),d(dt,pt),d(o,bt),d(o,gt),d(gt,ht),d(ht,vt),d(ht,kt),d(ht,xt),d(xt,yt),d(xt,wt),d(xt,Ct),d(xt,St),d(xt,zt),d(xt,Dt),d(xt,_t),d(xt,Tt),d(xt,Ht),d(xt,Mt),d(xt,Et),f(l,Lt,i),ae&&ae.m(l,i),f(l,At,i),qt=!0,It||(Nt=[v(n,"click",t[14]),v(lt,"blur",t[8]),v(lt,"click",t[27]),v(at,"blur",t[8]),v(at,"click",t[29]),v(ft,"blur",t[8]),v(ft,"click",t[30]),v(pt,"blur",t[8]),v(pt,"click",t[31]),v(vt,"blur",t[8]),v(vt,"click",t[32]),v(yt,"click",t[12]),v(yt,"blur",t[8]),v(Ct,"click",t[11]),v(Ct,"blur",t[8]),v(zt,"click",t[15]),v(zt,"blur",t[8]),v(_t,"click",t[9]),v(_t,"blur",t[8]),v(Ht,"click",t[10]),v(Ht,"blur",t[8]),v(Et,"click",t[33])],It=!0)},p(t,e){const n={};16384&e[1]&&(n.$$scope={dirty:e,ctx:t}),!i&&1&e[0]&&(i=!0,n.tab=t[0],I((()=>i=!1))),r.$set(n);const l={};16384&e[1]&&(l.$$scope={dirty:e,ctx:t}),!b&&1&e[0]&&(b=!0,l.tab=t[0],I((()=>b=!1))),u.$set(l);const c={};16384&e[1]&&(c.$$scope={dirty:e,ctx:t}),!S&&1&e[0]&&(S=!0,c.tab=t[0],I((()=>S=!1))),y.$set(c);const s={};16384&e[1]&&(s.$$scope={dirty:e,ctx:t}),!_&&1&e[0]&&(_=!0,s.tab=t[0],I((()=>_=!1))),D.$set(s);const a={};16384&e[1]&&(a.$$scope={dirty:e,ctx:t}),!E&&1&e[0]&&(E=!0,a.tab=t[0],I((()=>E=!1))),H.$set(a);const d={};16384&e[1]&&(d.$$scope={dirty:e,ctx:t}),!A&&1&e[0]&&(A=!0,d.tab=t[0],I((()=>A=!1))),L.$set(d);const f={};16384&e[1]&&(f.$$scope={dirty:e,ctx:t}),!U&&1&e[0]&&(U=!0,f.tab=t[0],I((()=>U=!1))),N.$set(f);const m={};16384&e[1]&&(m.$$scope={dirty:e,ctx:t}),!F&&1&e[0]&&(F=!0,m.tab=t[0],I((()=>F=!1))),P.$set(m);const p={};16384&e[1]&&(p.$$scope={dirty:e,ctx:t}),!B&&1&e[0]&&(B=!0,p.tab=t[0],I((()=>B=!1))),j.$set(p);const $={};if(16384&e[1]&&($.$$scope={dirty:e,ctx:t}),!tt&&1&e[0]&&(tt=!0,$.tab=t[0],I((()=>tt=!1))),G.$set($),(!qt||8&e[0])&&C(lt,"disabled",!t[3].length),328&e[0]){let n;for(oe=t[3],n=0;n<oe.length;n+=1){const l=fl(t,oe,n);se[n]?se[n].p(l,e):(se[n]=wl(l),se[n].c(),se[n].m(ot,null))}for(;n<se.length;n+=1)se[n].d(1);se.length=oe.length}(!qt||4&e[0]&&st!==(st="display: "+("characters"==t[2]?"block":"none")))&&k(ot,"style",st),(!qt||4&e[0]&&$t!==($t="display: "+("mods"==t[2]?"block":"none")))&&k(dt,"style",$t),(!qt||4&e[0]&&Wt!==(Wt="display: "+("options"==t[2]?"block":"none")))&&k(xt,"style",Wt),2&e[0]&&w(o,"display",t[1]),ie===(ie=re(t))&&ae?ae.p(t,e):(ae&&ae.d(1),ae=ie&&ie(t),ae&&(ae.c(),ae.m(At.parentNode,At)))},i(t){qt||(K(r.$$.fragment,t),K(u.$$.fragment,t),K(y.$$.fragment,t),K(D.$$.fragment,t),K(H.$$.fragment,t),K(L.$$.fragment,t),K(N.$$.fragment,t),K(P.$$.fragment,t),K(j.$$.fragment,t),K(G.$$.fragment,t),qt=!0)},o(t){R(r.$$.fragment,t),R(u.$$.fragment,t),R(y.$$.fragment,t),R(D.$$.fragment,t),R(H.$$.fragment,t),R(L.$$.fragment,t),R(N.$$.fragment,t),R(P.$$.fragment,t),R(j.$$.fragment,t),R(G.$$.fragment,t),qt=!1},d(t){t&&m(e),X(r),X(u),X(y),X(D),X(H),X(L),X(N),X(P),X(j),X(G),p(se,t),t&&m(Lt),ae&&ae.d(t),t&&m(At),It=!1,l(Nt)}}}function Dl(t,e,n){let l,c,{model:o=rt()}=e,{tab:s="bio"}=e,r="none",i="",a=[];function u(t){let e=rl(o,t);n(16,o=e.model),n(4,l=e.alert),p()}function d(t){let e=al(o,t);n(16,o=e.model),n(4,l=e.alert),p()}function f(){n(3,a=il())}function m(t){n(2,i=t)}function p(){n(1,r="none"==r?"block":"none")}f();let $=window.setInterval((()=>{console.log(`Autosave (${o.bio.name})`),null!=a.find((t=>t==o.bio.name))&&ul(o)}),1e4);var b;_((()=>{c&&c.focus()})),b=()=>{clearInterval($)},D().$$.on_destroy.push(b);return t.$$set=t=>{"model"in t&&n(16,o=t.model),"tab"in t&&n(0,s=t.tab)},[s,r,i,a,l,c,u,d,function(t){t.relatedTarget?.className.includes("dropdown-item")||n(2,i="")},function(){n(4,l=ll(o)),f(),p()},function(){n(4,l=cl()),f(),p()},function(){ol(o),p()},function(){n(4,l=ul(o)),n(3,a=il()),p()},m,p,function(){sl((t=>{n(4,l={success:t}),n(3,a=il())})),p()},o,function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},()=>m("characters"),t=>u(t),()=>m("mods"),()=>d("colonialMarines"),()=>d("torchbearer"),()=>m("options"),()=>{return t="dark"==dl?"light":"dark",void(window.location.search=`theme=${t}`);var t},function(t){M[t?"unshift":"push"]((()=>{c=t,n(5,c)}))},()=>n(4,l=null),()=>n(4,l=null),function(t){M[t?"unshift":"push"]((()=>{c=t,n(5,c)}))},()=>n(4,l=null),()=>n(4,l=null)]}class _l extends nt{constructor(t){super(),et(this,t,Dl,zl,o,{model:16,tab:0},null,[-1,-1])}}var Tl={shortDate:(t=new Date)=>{let e=t.getDate().toString();1==e.length&&(e=`0${e}`);let n=(t.getMonth()+1).toString();1==n.length&&(n=`0${n}`);let l=t.getFullYear();for(;l.length<4;)l=`0${l}`;return`${l}-${n}-${e}`}};function Hl(t){let e,n,c,o,s,r,i,a,u,p,b,h,x,y,w;function C(t,e){return t[3]?Wl:El}let S=C(t),z=S(t);function D(e){t[15](e)}let _={highlight:t[2]};return void 0!==t[0].content&&(_.content=t[0].content),b=new oe({props:_}),M.push((()=>Z(b,"content",D))),{c(){e=$("div"),n=$("div"),c=$("div"),o=$("div"),z.c(),s=g(),r=$("button"),r.textContent="hide",i=g(),a=$("button"),a.textContent="delete",u=g(),p=$("div"),Q(b.$$.fragment),k(r,"class","badge btn btn-light border ml-1 p-2"),k(a,"class","badge btn btn-light border ml-1 p-2"),k(o,"class","d-flex"),k(p,"class","d-flex"),k(c,"class","card-body"),k(n,"class","card"),k(e,"class","col-12")},m(l,m){f(l,e,m),d(e,n),d(n,c),d(c,o),z.m(o,null),d(o,s),d(o,r),d(o,i),d(o,a),d(c,u),d(c,p),Y(b,p,null),x=!0,y||(w=[v(r,"click",t[13]),v(a,"click",t[14])],y=!0)},p(t,e){S===(S=C(t))&&z?z.p(t,e):(z.d(1),z=S(t),z&&(z.c(),z.m(o,s)));const n={};4&e&&(n.highlight=t[2]),!h&&1&e&&(h=!0,n.content=t[0].content,I((()=>h=!1))),b.$set(n)},i(t){x||(K(b.$$.fragment,t),x=!0)},o(t){R(b.$$.fragment,t),x=!1},d(t){t&&m(e),z.d(),X(b),y=!1,l(w)}}}function Ml(e){let n,c,o,s,r,i,a,u,p,h=e[0].title+"",y=Tl.shortDate(e[5])+"";return{c(){n=$("div"),c=$("h4"),o=$("button"),s=b(h),r=g(),i=$("button"),a=b(y),k(o,"class","badge btn btn-light w-100 text-left"),w(o,"min-height","2.2em"),k(c,"class","flex-grow-1 m-0"),k(i,"class","badge btn btn-light border ml-1 p-2"),k(n,"class","col-12 d-flex")},m(t,l){f(t,n,l),d(n,c),d(c,o),d(o,s),d(n,r),d(n,i),d(i,a),u||(p=[v(o,"click",e[7]),v(i,"click",e[8])],u=!0)},p(t,e){1&e&&h!==(h=t[0].title+"")&&x(s,h),32&e&&y!==(y=Tl.shortDate(t[5])+"")&&x(a,y)},i:t,o:t,d(t){t&&m(n),u=!1,l(p)}}}function El(t){let e,n,l,c,o=t[0].title+"";return{c(){e=$("button"),n=b(o),k(e,"class","btn btn-light w-100 text-left font-weight-bold"),w(e,"min-height","2.2em")},m(o,s){f(o,e,s),d(e,n),l||(c=v(e,"click",t[12]),l=!0)},p(t,e){1&e&&o!==(o=t[0].title+"")&&x(n,o)},d(t){t&&m(e),l=!1,c()}}}function Wl(t){let e,n,c;return{c(){e=$("input"),k(e,"class","form-control")},m(l,o){f(l,e,o),t[10](e),y(e,t[0].title),n||(c=[v(e,"blur",t[9]),v(e,"input",t[11])],n=!0)},p(t,n){1&n&&e.value!==t[0].title&&y(e,t[0].title)},d(o){o&&m(e),t[10](null),n=!1,l(c)}}}function Ll(t){let e,n,l,c;const o=[Ml,Hl],s=[];function r(t,e){return t[6]?0:1}return e=r(t),n=s[e]=o[e](t),{c(){n.c(),l=h()},m(t,n){s[e].m(t,n),f(t,l,n),c=!0},p(t,[c]){let i=e;e=r(t),e===i?s[e].p(t,c):(j(),R(s[i],1,1,(()=>{s[i]=null})),B(),n=s[e],n?n.p(t,c):(n=s[e]=o[e](t),n.c()),K(n,1),n.m(l.parentNode,l))},i(t){c||(K(n),c=!0)},o(t){R(n),c=!1},d(t){s[e].d(t),t&&m(l)}}}function Al(t,e,n){let l,c,o,{actions:s}=e,{note:r}=e,{highlight:i}=e,a=!1;_((()=>{o&&o.focus()}));return t.$$set=t=>{"actions"in t&&n(1,s=t.actions),"note"in t&&n(0,r=t.note),"highlight"in t&&n(2,i=t.highlight)},t.$$.update=()=>{4&t.$$.dirty&&n(6,l=""==i),1&t.$$.dirty&&n(5,c=new Date(r.date))},[r,s,i,a,o,c,l,()=>n(6,l=!1),()=>n(6,l=!1),()=>n(3,a=!1),function(t){M[t?"unshift":"push"]((()=>{o=t,n(4,o)}))},function(){r.title=this.value,n(0,r)},()=>n(3,a=!0),()=>n(6,l=!0),()=>s.delete(r),function(e){t.$$.not_equal(r.content,e)&&(r.content=e,n(0,r))}]}class ql extends nt{constructor(t){super(),et(this,t,Al,Ll,o,{actions:1,note:0,highlight:2})}}function Il(t,e,n){const l=t.slice();return l[14]=e[n],l}function Nl(t,e){let n,l,c;return l=new ql({props:{note:e[14],actions:e[3],highlight:e[0]}}),{key:t,first:null,c(){n=h(),Q(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),Y(l,t,e),c=!0},p(t,n){e=t;const c={};4&n&&(c.note=e[14]),1&n&&(c.highlight=e[0]),l.$set(c)},i(t){c||(K(l.$$.fragment,t),c=!0)},o(t){R(l.$$.fragment,t),c=!1},d(t){t&&m(n),X(l,t)}}}function Ul(t){let e,n,c,o,s,r,i,a,u,p,b,h,x,w,C,S,z,D,_,T,H,M,E,W,L,A,q,I,N=[],U=new Map,O=t[2];const P=t=>t[14].id;for(let e=0;e<O.length;e+=1){let n=Il(t,O,e),l=P(n);U.set(l,N[e]=Nl(l,n))}return{c(){e=$("div"),n=$("div"),c=$("div"),o=$("div"),s=$("div"),r=$("div"),i=$("button"),i.textContent="Add note",a=g(),u=$("div"),p=$("button"),p.textContent="Sort",b=g(),h=$("div"),x=$("button"),x.textContent="Newest",w=g(),C=$("button"),C.textContent="Oldest",S=g(),z=$("button"),z.textContent="A → Z",D=g(),_=$("button"),_.textContent="Z → A",H=g(),M=$("div"),E=$("input"),W=g(),L=$("div");for(let t=0;t<N.length;t+=1)N[t].c();k(i,"class","btn btn-light border mb-1 mr-1"),k(p,"class","dropdown-toggle btn btn-light border mb-1"),k(x,"class","dropdown-item"),k(C,"class","dropdown-item"),k(z,"class","dropdown-item"),k(_,"class","dropdown-item"),k(h,"class","dropdown-menu"),k(h,"style",T="display: "+("sort"==t[1]?"block":"none")),k(u,"class","dropdown"),k(r,"class","d-flex"),k(E,"class","form-control"),k(E,"placeholder","filter"),k(M,"class","d-flex"),k(L,"class","row mt-2"),k(s,"class","card-body"),k(o,"class","card"),k(c,"class","col"),k(n,"class","row"),k(e,"class","container-fluid")},m(l,m){f(l,e,m),d(e,n),d(n,c),d(c,o),d(o,s),d(s,r),d(r,i),d(r,a),d(r,u),d(u,p),d(u,b),d(u,h),d(h,x),d(h,w),d(h,C),d(h,S),d(h,z),d(h,D),d(h,_),d(s,H),d(s,M),d(M,E),y(E,t[0]),d(s,W),d(s,L);for(let t=0;t<N.length;t+=1)N[t]&&N[t].m(L,null);A=!0,q||(I=[v(i,"click",t[4]),v(p,"blur",t[5]),v(p,"click",t[8]),v(x,"blur",t[5]),v(x,"click",t[9]),v(C,"blur",t[5]),v(C,"click",t[10]),v(z,"blur",t[5]),v(z,"click",t[11]),v(_,"blur",t[5]),v(_,"click",t[12]),v(E,"input",t[13])],q=!0)},p(t,[e]){(!A||2&e&&T!==(T="display: "+("sort"==t[1]?"block":"none")))&&k(h,"style",T),1&e&&E.value!==t[0]&&y(E,t[0]),13&e&&(O=t[2],j(),N=G(N,e,P,1,t,O,U,L,J,Nl,null,Il),B())},i(t){if(!A){for(let t=0;t<O.length;t+=1)K(N[t]);A=!0}},o(t){for(let t=0;t<N.length;t+=1)R(N[t]);A=!1},d(t){t&&m(e);for(let t=0;t<N.length;t+=1)N[t].d();q=!1,l(I)}}}function Ol(t,e,n){let l,{notes:c}=e;const o={delete:t=>{if(!confirm(`Delete ${t.title}?`))return;let e=c.indexOf(t);c.splice(e,1),n(7,c)}};let s="",r="";function i(t){"alpha"==t?c.sort(((t,e)=>t.title.localeCompare(e.title))):"ralpha"==t?c.sort(((t,e)=>e.title.localeCompare(t.title))):"oldest"==t?c.sort(((t,e)=>t.date>e.date)):"newest"==t&&c.sort(((t,e)=>t.date<e.date)),n(7,c)}return t.$$set=t=>{"notes"in t&&n(7,c=t.notes)},t.$$.update=()=>{129&t.$$.dirty&&n(2,l=c.filter((t=>!s||t.title.toLowerCase().includes(s.toLowerCase())||t.content.toLowerCase().includes(s.toLowerCase())))),128&t.$$.dirty&&c.forEach((t=>{t.id||(t.id=crypto.randomUUID())}))},[s,r,l,o,function(){c.splice(0,0,{id:crypto.randomUUID(),title:"New note",date:(new Date).toISOString(),content:"Enter your notes here"}),n(7,c)},function(t){t.relatedTarget?.className.includes("dropdown-item")||n(1,r="")},i,c,()=>n(1,r="sort"),()=>i("newest"),()=>i("oldest"),()=>i("alpha"),()=>i("ralpha"),function(){s=this.value,n(0,s)}]}class Pl extends nt{constructor(t){super(),et(this,t,Ol,Ul,o,{notes:7})}}function Fl(e){let n,l,c;return{c(){n=$("button"),n.textContent="Specialty",k(n,"class","badge btn btn-light ml-auto")},m(t,o){f(t,n,o),l||(c=v(n,"click",e[10]),l=!0)},p:t,d(t){t&&m(n),l=!1,c()}}}function Vl(t){let e,n,c,o,s,r,i,a,u=t[0].bluck+"";return{c(){e=$("button"),n=b("Delete"),o=g(),s=$("button"),r=b(u),k(e,"class",c="badge btn btn-light "+t[9]),k(s,"class","badge btn badge-dark ml-1")},m(l,c){f(l,e,c),d(e,n),f(l,o,c),f(l,s,c),d(s,r),i||(a=[v(e,"click",t[13]),v(s,"click",t[12])],i=!0)},p(t,n){512&n&&c!==(c="badge btn btn-light "+t[9])&&k(e,"class",c),1&n&&u!==(u=t[0].bluck+"")&&x(r,u)},d(t){t&&m(e),t&&m(o),t&&m(s),i=!1,l(a)}}}function jl(t){let e,n,l,c=t[0].bluck+"";return{c(){e=$("span"),n=b(c),k(e,"class",l="badge badge-light border border-dark "+t[9])},m(t,l){f(t,e,l),d(e,n)},p(t,o){1&o&&c!==(c=t[0].bluck+"")&&x(n,c),512&o&&l!==(l="badge badge-light border border-dark "+t[9])&&k(e,"class",l)},d(t){t&&m(e)}}}function Bl(t){let e,n,l,c;function o(t,e){return t[0].specialty?Jl:Rl}let s=o(t),r=s(t);return{c(){e=$("div"),n=$("button"),r.c(),k(n,"class",nc),w(n,"min-height","2.2em"),k(e,"class","flex-grow-1")},m(o,s){f(o,e,s),d(e,n),r.m(n,null),l||(c=v(n,"click",t[17]),l=!0)},p(t,e){s===(s=o(t))&&r?r.p(t,e):(r.d(1),r=s(t),r&&(r.c(),r.m(n,null)))},d(t){t&&m(e),r.d(),l=!1,c()}}}function Kl(t){let e,n,c;return{c(){e=$("input"),k(e,"class","form-control mb-1 mr-1")},m(l,o){f(l,e,o),t[15](e),y(e,t[0].name),n||(c=[v(e,"blur",t[14]),v(e,"input",t[16])],n=!0)},p(t,n){1&n&&e.value!==t[0].name&&y(e,t[0].name)},d(o){o&&m(e),t[15](null),n=!1,l(c)}}}function Rl(t){let e,n=t[0].name+"";return{c(){e=b(n)},m(t,n){f(t,e,n)},p(t,l){1&l&&n!==(n=t[0].name+"")&&x(e,n)},d(t){t&&m(e)}}}function Jl(t){let e,n,l=t[0].name+"";return{c(){e=$("u"),n=b(l)},m(t,l){f(t,e,l),d(e,n)},p(t,e){1&e&&l!==(l=t[0].name+"")&&x(n,l)},d(t){t&&m(e)}}}function Gl(t){let e,n,l,c;function o(e){t[18](e)}let s={count:t[0].rating,$$slots:{default:[Zl]},$$scope:{ctx:t}};return void 0!==t[0].pass&&(s.value=t[0].pass),n=new ft({props:s}),M.push((()=>Z(n,"value",o))),{c(){e=$("div"),Q(n.$$.fragment),k(e,"class","d-flex")},m(t,l){f(t,e,l),Y(n,e,null),c=!0},p(t,e){const c={};1&e&&(c.count=t[0].rating),2097152&e&&(c.$$scope={dirty:e,ctx:t}),!l&&1&e&&(l=!0,c.value=t[0].pass,I((()=>l=!1))),n.$set(c)},i(t){c||(K(n.$$.fragment,t),c=!0)},o(t){R(n.$$.fragment,t),c=!1},d(t){t&&m(e),X(n)}}}function Zl(t){let e;return{c(){e=b("Pass")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Ql(t){let e,n,l,c;function o(e){t[19](e)}let s={count:t[0].rating-1,$$slots:{default:[Yl]},$$scope:{ctx:t}};return void 0!==t[0].fail&&(s.value=t[0].fail),n=new ft({props:s}),M.push((()=>Z(n,"value",o))),{c(){e=$("div"),Q(n.$$.fragment),k(e,"class","d-flex")},m(t,l){f(t,e,l),Y(n,e,null),c=!0},p(t,e){const c={};1&e&&(c.count=t[0].rating-1),2097152&e&&(c.$$scope={dirty:e,ctx:t}),!l&&1&e&&(l=!0,c.value=t[0].fail,I((()=>l=!1))),n.$set(c)},i(t){c||(K(n.$$.fragment,t),c=!0)},o(t){R(n.$$.fragment,t),c=!1},d(t){t&&m(e),X(n)}}}function Yl(t){let e;return{c(){e=b("Fail")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function Xl(t){let e,n,l,c;function o(e){t[20](e)}let s={count:t[2],$$slots:{default:[tc]},$$scope:{ctx:t}};return void 0!==t[0].pass&&(s.value=t[0].pass),n=new ft({props:s}),M.push((()=>Z(n,"value",o))),{c(){e=$("div"),Q(n.$$.fragment),k(e,"class","d-flex")},m(t,l){f(t,e,l),Y(n,e,null),c=!0},p(t,e){const c={};4&e&&(c.count=t[2]),2097152&e&&(c.$$scope={dirty:e,ctx:t}),!l&&1&e&&(l=!0,c.value=t[0].pass,I((()=>l=!1))),n.$set(c)},i(t){c||(K(n.$$.fragment,t),c=!0)},o(t){R(n.$$.fragment,t),c=!1},d(t){t&&m(e),X(n)}}}function tc(t){let e;return{c(){e=b("BL")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function ec(t){let e,n,l,c,o,s,r,i,a,u,p,h,y,w,C,S,z,D=t[0].rating+"",_=!t[3]&&Fl(t);function T(t,e){return t[0].readonly?jl:Vl}let H=T(t),M=H(t);function E(t,e){return t[4]?Kl:Bl}let W=E(t),L=W(t),A=t[8]&&Gl(t),q=t[7]&&Ql(t),I=t[6]&&Xl(t);return{c(){e=$("div"),n=$("div"),l=$("div"),c=$("div"),_&&_.c(),o=g(),M.c(),s=g(),r=$("div"),L.c(),i=g(),a=$("h4"),u=$("button"),p=b(D),h=g(),A&&A.c(),y=g(),q&&q.c(),w=g(),I&&I.c(),k(c,"class","d-flex"),k(u,"class","badge btn btn-dark"),k(r,"class","d-flex"),k(l,"class","card-body pt-1"),k(n,"class","card"),k(e,"class","col-lg-4 col-md-6")},m(m,$){f(m,e,$),d(e,n),d(n,l),d(l,c),_&&_.m(c,null),d(c,o),M.m(c,null),d(l,s),d(l,r),L.m(r,null),d(r,i),d(r,a),d(a,u),d(u,p),d(l,h),A&&A.m(l,null),d(l,y),q&&q.m(l,null),d(l,w),I&&I.m(l,null),C=!0,S||(z=v(u,"click",t[11]),S=!0)},p(t,[e]){t[3]?_&&(_.d(1),_=null):_?_.p(t,e):(_=Fl(t),_.c(),_.m(c,o)),H===(H=T(t))&&M?M.p(t,e):(M.d(1),M=H(t),M&&(M.c(),M.m(c,null))),W===(W=E(t))&&L?L.p(t,e):(L.d(1),L=W(t),L&&(L.c(),L.m(r,i))),(!C||1&e)&&D!==(D=t[0].rating+"")&&x(p,D),t[8]?A?(A.p(t,e),256&e&&K(A,1)):(A=Gl(t),A.c(),K(A,1),A.m(l,y)):A&&(j(),R(A,1,1,(()=>{A=null})),B()),t[7]?q?(q.p(t,e),128&e&&K(q,1)):(q=Ql(t),q.c(),K(q,1),q.m(l,w)):q&&(j(),R(q,1,1,(()=>{q=null})),B()),t[6]?I?(I.p(t,e),64&e&&K(I,1)):(I=Xl(t),I.c(),K(I,1),I.m(l,null)):I&&(j(),R(I,1,1,(()=>{I=null})),B())},i(t){C||(K(A),K(q),K(I),C=!0)},o(t){R(A),R(q),R(I),C=!1},d(t){t&&m(e),_&&_.d(),M.d(),L.d(),A&&A.d(),q&&q.d(),I&&I.d(),S=!1,z()}}}const nc="btn btn-light w-100 text-left font-weight-bold pl-2";function lc(t,e,n){let l,c,o,s,r,{actions:i}=e,{skill:a}=e,{bluckTries:u}=e,{lockspecial:d}=e,f=!1;_((()=>{r&&r.focus()}));return t.$$set=t=>{"actions"in t&&n(1,i=t.actions),"skill"in t&&n(0,a=t.skill),"bluckTries"in t&&n(2,u=t.bluckTries),"lockspecial"in t&&n(3,d=t.lockspecial)},t.$$.update=()=>{8&t.$$.dirty&&n(9,l=d?"ml-auto":"ml-1"),1&t.$$.dirty&&n(8,c=a.rating>=1&&a.rating<a.cap),1&t.$$.dirty&&n(7,o=a.rating>=2&&a.rating<a.cap),1&t.$$.dirty&&n(6,s=0==a.rating)},[a,i,u,d,f,r,s,o,c,l,function(){d||i.setSpecial(a)},function(t){n(0,a.rating+=t.shiftKey?-1:1,a),a.rating<0?n(0,a.rating=a.cap,a):a.rating>a.cap&&n(0,a.rating=0,a)},function(){n(0,a.bluck="Health"==a.bluck?"Will":"Health",a)},()=>i.delete(a),()=>n(4,f=!1),function(t){M[t?"unshift":"push"]((()=>{r=t,n(5,r)}))},function(){a.name=this.value,n(0,a)},()=>n(4,f=!a.readonly),function(e){t.$$.not_equal(a.pass,e)&&(a.pass=e,n(0,a))},function(e){t.$$.not_equal(a.fail,e)&&(a.fail=e,n(0,a))},function(e){t.$$.not_equal(a.pass,e)&&(a.pass=e,n(0,a))}]}class cc extends nt{constructor(t){super(),et(this,t,lc,ec,o,{actions:1,skill:0,bluckTries:2,lockspecial:3})}}function oc(t,e,n){const l=t.slice();return l[13]=e[n],l}function sc(t,e){let n,l,c;return l=new cc({props:{actions:e[4],skill:e[13],bluckTries:e[1],lockspecial:e[0].lockspecial}}),{key:t,first:null,c(){n=h(),Q(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),Y(l,t,e),c=!0},p(t,n){e=t;const c={};8&n&&(c.skill=e[13]),2&n&&(c.bluckTries=e[1]),1&n&&(c.lockspecial=e[0].lockspecial),l.$set(c)},i(t){c||(K(l.$$.fragment,t),c=!0)},o(t){R(l.$$.fragment,t),c=!1},d(t){t&&m(n),X(l,t)}}}function rc(t){let e,n,c,o,s,r,i,a,u,p,h,x,y,C,S,z,D,_,T,H,M,E,W,L,A,q,I,N,U,O,P,F,V=[],Z=new Map,Q=t[3];const Y=t=>t[13].id;for(let e=0;e<Q.length;e+=1){let n=oc(t,Q,e),l=Y(n);Z.set(l,V[e]=sc(l,n))}return{c(){e=$("div"),n=$("div"),c=$("div"),o=$("div"),s=$("div"),r=$("div"),i=$("button"),i.textContent="Add skill",a=g(),u=$("div"),p=$("button"),p.textContent="Show skills",h=g(),x=$("div"),y=$("button"),C=b("All"),z=g(),D=$("button"),_=b("Known and learning"),H=g(),M=$("button"),E=b("Known"),L=g(),A=$("button"),q=b("Lock specialty"),N=g(),U=$("div");for(let t=0;t<V.length;t+=1)V[t].c();k(i,"class","btn btn-light border mb-1 mr-1"),k(p,"class","dropdown-toggle btn btn-light border mb-1 mr-1"),k(y,"class",S="dropdown-item "+("all"==t[0].show?ic:"")),k(D,"class",T="dropdown-item "+("bluck"==t[0].show?ic:"")),k(M,"class",W="dropdown-item "+("zero"==t[0].show?ic:"")),k(x,"class","dropdown-menu"),w(x,"display","filter"==t[2]?"block":"none"),k(u,"class","dropdown"),k(A,"class",I="btn border mb-1 "+(t[0].lockspecial?"btn-dark":"btn-light")),k(r,"class","d-flex"),k(U,"class","row mt-2"),k(s,"class","card-body"),k(o,"class","card"),k(c,"class","col"),k(n,"class","row"),k(e,"class","container-fluid")},m(l,m){f(l,e,m),d(e,n),d(n,c),d(c,o),d(o,s),d(s,r),d(r,i),d(r,a),d(r,u),d(u,p),d(u,h),d(u,x),d(x,y),d(y,C),d(x,z),d(x,D),d(D,_),d(x,H),d(x,M),d(M,E),d(r,L),d(r,A),d(A,q),d(s,N),d(s,U);for(let t=0;t<V.length;t+=1)V[t]&&V[t].m(U,null);O=!0,P||(F=[v(i,"click",t[5]),v(p,"blur",t[6]),v(p,"click",t[8]),v(y,"blur",t[6]),v(y,"click",t[9]),v(D,"blur",t[6]),v(D,"click",t[10]),v(M,"blur",t[6]),v(M,"click",t[11]),v(A,"click",t[12])],P=!0)},p(t,[e]){(!O||1&e&&S!==(S="dropdown-item "+("all"==t[0].show?ic:"")))&&k(y,"class",S),(!O||1&e&&T!==(T="dropdown-item "+("bluck"==t[0].show?ic:"")))&&k(D,"class",T),(!O||1&e&&W!==(W="dropdown-item "+("zero"==t[0].show?ic:"")))&&k(M,"class",W),4&e&&w(x,"display","filter"==t[2]?"block":"none"),(!O||1&e&&I!==(I="btn border mb-1 "+(t[0].lockspecial?"btn-dark":"btn-light")))&&k(A,"class",I),27&e&&(Q=t[3],j(),V=G(V,e,Y,1,t,Q,Z,U,J,sc,null,oc),B())},i(t){if(!O){for(let t=0;t<Q.length;t+=1)K(V[t]);O=!0}},o(t){for(let t=0;t<V.length;t+=1)R(V[t]);O=!1},d(t){t&&m(e);for(let t=0;t<V.length;t+=1)V[t].d();P=!1,l(F)}}}const ic="bg-dark text-light";function ac(t,e,n){let l,{skills:c}=e,{bluckTries:o}=e;const s={delete:t=>{if(!confirm(`Delete ${t.name}?`))return;let e=c.skills.indexOf(t);c.skills.splice(e,1),n(0,c)},setSpecial:t=>{c.skills.forEach((t=>t.specialty=!1)),t.specialty=!0,n(0,c)}};let r;function i(){n(0,c.lockspecial=!c.lockspecial,c),n(0,c)}return t.$$set=t=>{"skills"in t&&n(0,c=t.skills),"bluckTries"in t&&n(1,o=t.bluckTries)},t.$$.update=()=>{1&t.$$.dirty&&n(3,l=c.skills.filter((t=>"all"==c.show||"bluck"==c.show&&(t.rating>0||t.pass>0)||"zero"==c.show&&t.rating>0))),1&t.$$.dirty&&c.skills.forEach((t=>{t.id||(t.id=crypto.randomUUID())}))},[c,o,r,l,s,function(){c.skills.push(st({name:"New Skill",readonly:!1})),n(0,c)},function(t){t.relatedTarget?.className.includes("dropdown-item")||n(2,r="")},i,()=>n(2,r="filter"),()=>n(0,c.show="all",c),()=>n(0,c.show="bluck",c),()=>n(0,c.show="zero",c),()=>i()]}class uc extends nt{constructor(t){super(),et(this,t,ac,rc,o,{skills:0,bluckTries:1})}}function dc(t){let e,n,l,c,o,s=t[0].name+"";return{c(){e=$("h4"),n=$("button"),l=b(s),k(n,"class","badge btn btn-light w-100 text-left"),k(e,"class","flex-grow-1")},m(s,r){f(s,e,r),d(e,n),d(n,l),c||(o=v(n,"click",t[15]),c=!0)},p(t,e){1&e&&s!==(s=t[0].name+"")&&x(l,s)},d(t){t&&m(e),c=!1,o()}}}function fc(t){let e,n,c;return{c(){e=$("input"),k(e,"class","flex-grow-1 form-control")},m(l,o){f(l,e,o),t[13](e),y(e,t[0].name),n||(c=[v(e,"blur",t[12]),v(e,"input",t[14])],n=!0)},p(t,n){1&n&&e.value!==t[0].name&&y(e,t[0].name)},d(o){o&&m(e),t[13](null),n=!1,l(c)}}}function mc(t){let e,n,l,c,o;return{c(){e=$("button"),n=b("Relic"),k(e,"class",l="btn "+t[7]+" ml-auto mr-1")},m(l,s){f(l,e,s),d(e,n),c||(o=v(e,"click",t[18]),c=!0)},p(t,n){128&n&&l!==(l="btn "+t[7]+" ml-auto mr-1")&&k(e,"class",l)},d(t){t&&m(e),c=!1,o()}}}function pc(t){let e,n,c,o,s,r,i,a,u,p,h,x,y,w;return{c(){e=$("div"),n=$("button"),c=b("Spellbook"),s=g(),r=$("button"),i=b("Scroll"),u=g(),p=$("button"),h=b("Memorized"),k(n,"class",o="btn "+t[7]+" mr-1"),k(r,"class",a="btn "+t[6]+" mr-1"),k(p,"class",x="btn "+t[5]+" mr-1"),k(e,"class","d-flex ml-auto")},m(l,o){f(l,e,o),d(e,n),d(n,c),d(e,s),d(e,r),d(r,i),d(e,u),d(e,p),d(p,h),y||(w=[v(n,"click",t[10]),v(r,"click",t[17]),v(p,"click",t[11])],y=!0)},p(t,e){128&e&&o!==(o="btn "+t[7]+" mr-1")&&k(n,"class",o),64&e&&a!==(a="btn "+t[6]+" mr-1")&&k(r,"class",a),32&e&&x!==(x="btn "+t[5]+" mr-1")&&k(p,"class",x)},d(t){t&&m(e),y=!1,l(w)}}}function $c(t){let e,n,c,o,s,r,i,a,u,p,h,y,w,C,S,z,D,_,T,H,E,W=t[8][t[0].circle-1]+"";function L(t,e){return t[4]?fc:dc}let A=L(t),q=A(t);function N(t,e){return"magician"==t[2]?pc:"theurge"==t[2]?mc:void 0}let U=N(t),O=U&&U(t);function P(e){t[19](e)}let F={};return void 0!==t[0].description&&(F.content=t[0].description),D=new oe({props:F}),M.push((()=>Z(D,"content",P))),{c(){e=$("div"),n=$("div"),c=$("div"),o=$("div"),q.c(),s=g(),r=$("button"),r.textContent="Delete",i=g(),a=$("div"),u=$("h5"),p=$("button"),h=b(W),y=g(),O&&O.c(),w=g(),C=$("div"),S=g(),z=$("div"),Q(D.$$.fragment),k(r,"class","badge btn btn-light"),k(o,"class","d-flex"),k(p,"class","badge btn btn-dark w-100 text-left"),k(a,"class","d-flex mt-1 flex-wrap"),k(C,"class","d-flex mt-1"),k(z,"class","d-flex mt-1"),k(c,"class","card-body"),k(n,"class","card"),k(e,"class","col-md-6")},m(l,m){f(l,e,m),d(e,n),d(n,c),d(c,o),q.m(o,null),d(o,s),d(o,r),d(c,i),d(c,a),d(a,u),d(u,p),d(p,h),d(a,y),O&&O.m(a,null),d(c,w),d(c,C),d(c,S),d(c,z),Y(D,z,null),T=!0,H||(E=[v(r,"click",t[16]),v(p,"click",t[9])],H=!0)},p(t,[e]){A===(A=L(t))&&q?q.p(t,e):(q.d(1),q=A(t),q&&(q.c(),q.m(o,s))),(!T||1&e)&&W!==(W=t[8][t[0].circle-1]+"")&&x(h,W),U===(U=N(t))&&O?O.p(t,e):(O&&O.d(1),O=U&&U(t),O&&(O.c(),O.m(a,null)));const n={};!_&&1&e&&(_=!0,n.content=t[0].description,I((()=>_=!1))),D.$set(n)},i(t){T||(K(D.$$.fragment,t),T=!0)},o(t){R(D.$$.fragment,t),T=!1},d(t){t&&m(e),q.d(),O&&O.d(),X(D),H=!1,l(E)}}}function bc(t,e,n){let l,c,o,{actions:s}=e,{spell:r}=e,{caster:i}=e;let a,u=!1;_((()=>{a&&a.focus()}));return t.$$set=t=>{"actions"in t&&n(1,s=t.actions),"spell"in t&&n(0,r=t.spell),"caster"in t&&n(2,i=t.caster)},t.$$.update=()=>{1&t.$$.dirty&&n(7,l=r.inventory?"btn-dark":"btn-light border"),1&t.$$.dirty&&n(6,c=r.scroll?"btn-dark":"btn-light border"),1&t.$$.dirty&&n(5,o=r.memorized?"btn-dark":"btn-light border")},[r,s,i,a,u,o,c,l,["1st Circle","2nd Circle","3rd Circle","4th Circle","5th Circle"],function(t){n(0,r.circle+=t.shiftKey?-1:1,r),r.circle>5?n(0,r.circle=1,r):r.circle<1&&n(0,r.circle=5,r),s.refresh()},function(){n(0,r.inventory=!r.inventory,r),s.refresh()},function(){n(0,r.memorized=!r.memorized,r),s.refresh()},()=>n(4,u=!1),function(t){M[t?"unshift":"push"]((()=>{a=t,n(3,a)}))},function(){r.name=this.value,n(0,r)},()=>n(4,u=!0),()=>s.delete(r),()=>n(0,r.scroll=!r.scroll,r),()=>n(0,r.inventory=!r.inventory,r),function(e){t.$$.not_equal(r.description,e)&&(r.description=e,n(0,r))}]}class gc extends nt{constructor(t){super(),et(this,t,bc,$c,o,{actions:1,spell:0,caster:2})}}function hc(t,e,n){const l=t.slice();return l[17]=e[n],l}function vc(t,e,n){const l=t.slice();return l[20]=e[n],l}function kc(t){let e,n,l,c,o,s,r,i,a,u,p,h,y=t[0].memory+"";return{c(){e=$("div"),n=$("h3"),n.innerHTML='<span class="align-self-center font-weight-bold mr-1">Memory palace</span>',l=g(),c=$("span"),o=b(t[1]),s=g(),r=$("span"),r.textContent="/",i=g(),a=$("button"),u=b(y),k(c,"class","align-self-center btn badge-light border ml-auto"),C(c,"bg-danger",t[1]<0),k(r,"class","align-self-center mx-1"),k(a,"class","align-self-center btn btn-dark"),k(e,"class","d-flex col-md-6")},m(m,$){f(m,e,$),d(e,n),d(e,l),d(e,c),d(c,o),d(e,s),d(e,r),d(e,i),d(e,a),d(a,u),p||(h=v(a,"click",t[12]),p=!0)},p(t,e){2&e&&x(o,t[1]),2&e&&C(c,"bg-danger",t[1]<0),1&e&&y!==(y=t[0].memory+"")&&x(u,y)},d(t){t&&m(e),p=!1,h()}}}function xc(t){let e,n,c,o,s,r,i,a,u,p=t[0].burden+"";return{c(){e=$("div"),n=$("h3"),n.innerHTML='<span class="align-self-center font-weight-bold">Burden</span>',c=g(),o=$("button"),o.textContent="↓",s=g(),r=$("button"),i=b(p),w(n,"width","5em"),k(o,"class","align-self-center btn btn-light border border-dark ml-auto"),k(r,"class","align-self-center btn btn-dark"),C(r,"bg-danger",t[0].burden>t[0].urdr),k(e,"class","d-flex col-md-6")},m(l,m){f(l,e,m),d(e,n),d(e,c),d(e,o),d(e,s),d(e,r),d(r,i),a||(u=[v(o,"click",t[10]),v(r,"click",t[9])],a=!0)},p(t,e){1&e&&p!==(p=t[0].burden+"")&&x(i,p),1&e&&C(r,"bg-danger",t[0].burden>t[0].urdr)},d(t){t&&m(e),a=!1,l(u)}}}function yc(t){let e,n,l,c,o,s,r,i=t[0].urdr+"";return{c(){e=$("div"),n=$("h3"),n.innerHTML='<span class="align-self-center font-weight-bold">Urdr</span>',l=g(),c=$("button"),o=b(i),k(c,"class","align-self-center btn btn-dark ml-auto"),k(e,"class","d-flex col-md-6")},m(i,a){f(i,e,a),d(e,n),d(e,l),d(e,c),d(c,o),s||(r=v(c,"click",t[13]),s=!0)},p(t,e){1&e&&i!==(i=t[0].urdr+"")&&x(o,i)},d(t){t&&m(e),s=!1,r()}}}function wc(t){let e,n,l,c,o;return{c(){e=$("div"),n=$("h3"),n.innerHTML='<span class="align-self-center font-weight-bold">In Spellbook</span>',l=g(),c=$("span"),o=b(t[6]),k(c,"class","align-self-center btn badge-light border ml-auto"),k(e,"class","d-flex col-md-6")},m(t,s){f(t,e,s),d(e,n),d(e,l),d(e,c),d(c,o)},p(t,e){64&e&&x(o,t[6])},d(t){t&&m(e)}}}function Cc(t){let e,n,c,o,s,r,i=t[20].text+"";function a(){return t[15](t[20])}return{c(){e=$("button"),n=b(i),c=g(),k(e,"class",o="dropdown-item "+(t[0].show==t[20].val?Dc:""))},m(l,o){f(l,e,o),d(e,n),d(e,c),s||(r=[v(e,"blur",t[11]),v(e,"click",a)],s=!0)},p(l,c){t=l,16&c&&i!==(i=t[20].text+"")&&x(n,i),17&c&&o!==(o="dropdown-item "+(t[0].show==t[20].val?Dc:""))&&k(e,"class",o)},d(t){t&&m(e),s=!1,l(r)}}}function Sc(t,e){let n,l,c;return l=new gc({props:{spell:e[17],caster:e[5],actions:e[7]}}),{key:t,first:null,c(){n=h(),Q(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),Y(l,t,e),c=!0},p(t,n){e=t;const c={};8&n&&(c.spell=e[17]),32&n&&(c.caster=e[5]),l.$set(c)},i(t){c||(K(l.$$.fragment,t),c=!0)},o(t){R(l.$$.fragment,t),c=!1},d(t){t&&m(n),X(l,t)}}}function zc(t){let e,n,c,o,s,r,i,a,u,b,h,x,y,C,S,z,D,_,T,H,M,E,W=[],L=new Map,A=0==t[0].urdr&&kc(t),q=t[0].urdr>0&&xc(t),I=0==t[0].memory&&yc(t),N=t[0].memory>0&&wc(t),U=t[4](),O=[];for(let e=0;e<U.length;e+=1)O[e]=Cc(vc(t,U,e));let P=t[3];const F=t=>t[17].id;for(let e=0;e<P.length;e+=1){let n=hc(t,P,e),l=F(n);L.set(l,W[e]=Sc(l,n))}return{c(){e=$("div"),n=$("div"),c=$("div"),o=$("div"),s=$("div"),r=$("div"),A&&A.c(),i=g(),q&&q.c(),a=g(),I&&I.c(),u=g(),N&&N.c(),b=g(),h=$("div"),x=$("div"),y=$("button"),y.textContent="Show",C=g(),S=$("div");for(let t=0;t<O.length;t+=1)O[t].c();z=g(),D=$("button"),D.textContent="Add spell",_=g(),T=$("div");for(let t=0;t<W.length;t+=1)W[t].c();k(r,"class","row"),k(y,"class","dropdown-toggle btn btn-light border mb-1 mr-1"),k(S,"class","dropdown-menu"),w(S,"display","filters"==t[2]?"block":"none"),k(x,"class","dropdown"),k(D,"class","btn btn-light border mb-1 mr-1"),k(h,"class","d-flex mt-2"),k(T,"class","row mt-2"),k(s,"class","card-body"),k(o,"class","card"),k(c,"class","col-12"),k(n,"class","row"),k(e,"class","container-fluid")},m(l,m){f(l,e,m),d(e,n),d(n,c),d(c,o),d(o,s),d(s,r),A&&A.m(r,null),d(r,i),q&&q.m(r,null),d(r,a),I&&I.m(r,null),d(r,u),N&&N.m(r,null),d(s,b),d(s,h),d(h,x),d(x,y),d(x,C),d(x,S);for(let t=0;t<O.length;t+=1)O[t]&&O[t].m(S,null);d(h,z),d(h,D),d(s,_),d(s,T);for(let t=0;t<W.length;t+=1)W[t]&&W[t].m(T,null);H=!0,M||(E=[v(y,"blur",t[11]),v(y,"click",t[14]),v(D,"click",t[8])],M=!0)},p(t,[e]){if(0==t[0].urdr?A?A.p(t,e):(A=kc(t),A.c(),A.m(r,i)):A&&(A.d(1),A=null),t[0].urdr>0?q?q.p(t,e):(q=xc(t),q.c(),q.m(r,a)):q&&(q.d(1),q=null),0==t[0].memory?I?I.p(t,e):(I=yc(t),I.c(),I.m(r,u)):I&&(I.d(1),I=null),t[0].memory>0?N?N.p(t,e):(N=wc(t),N.c(),N.m(r,null)):N&&(N.d(1),N=null),2065&e){let n;for(U=t[4](),n=0;n<U.length;n+=1){const l=vc(t,U,n);O[n]?O[n].p(l,e):(O[n]=Cc(l),O[n].c(),O[n].m(S,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=U.length}4&e&&w(S,"display","filters"==t[2]?"block":"none"),168&e&&(P=t[3],j(),W=G(W,e,F,1,t,P,L,T,J,Sc,null,hc),B())},i(t){if(!H){for(let t=0;t<P.length;t+=1)K(W[t]);H=!0}},o(t){for(let t=0;t<W.length;t+=1)R(W[t]);H=!1},d(t){t&&m(e),A&&A.d(),q&&q.d(),I&&I.d(),N&&N.d(),p(O,t);for(let t=0;t<W.length;t+=1)W[t].d();M=!1,l(E)}}}const Dc="bg-dark text-light";function _c(t,e,n){let l,c,o,s,r,{spells:i}=e;const a={delete:t=>{if(!confirm(`Delete ${t.name}?`))return;let e=i.spells.indexOf(t);i.spells.splice(e,1),d()},refresh:d};let u="";function d(){n(0,i),i.spells.sort(((t,e)=>t.circle==e.circle?t.name.localeCompare(e.name):t.circle-e.circle))}i.spells.forEach((t=>{t.id||(t.id=crypto.randomUUID())}));return t.$$set=t=>{"spells"in t&&n(0,i=t.spells)},t.$$.update=()=>{1&t.$$.dirty&&n(6,l=i.spells.reduce(((t,e)=>t+(e.inventory?e.circle:0)),0)),1&t.$$.dirty&&n(1,c=i.memory-i.spells.reduce(((t,e)=>t+(e.memorized?e.circle:0)),0)),1&t.$$.dirty&&n(5,o=i.memory>0?"magician":"theurge"),1&t.$$.dirty&&n(4,s=()=>{let t=[{val:"all",text:"All"}];return i.memory>0?t=t.concat([{val:"capacity",text:"Can memorize"},{val:"inventoryScroll",text:"Inventory"},{val:"memory",text:"Memorized"},{val:"scroll",text:"Scrolls"},{val:"inventory",text:"Spellbook"}]):i.urdr>0&&(t=t.concat([{val:"inventory",text:"Relic"},{val:"burden",text:"Within burden"}])),t}),3&t.$$.dirty&&n(3,r=i.spells.filter((t=>!i.show||"all"==i.show||("burden"==i.show?t.circle<=i.urdr-i.burden:"capacity"==i.show?c>=t.circle||t.memorized:"inventory"==i.show?t.inventory:"inventory&scroll"==i.show?t.inventory||t.scroll:"memory"==i.show?t.memorized:"scroll"==i.show?t.scroll:void 0))))},[i,c,u,r,s,o,l,a,function(){i.spells.push({id:crypto.randomUUID(),name:"~new spell",circle:1,memorized:!1,inventory:!1,scroll:!1,description:"Enter a description"}),d()},function(t){n(0,i.burden+=t.shiftKey?-1:1,i),i.burden<0&&n(0,i.burden=0,i)},function(){i.burden>0&&n(0,i.burden--,i)},function(t){t.relatedTarget?.className.includes("dropdown-item")||n(2,u="")},function(t){n(0,i.memory+=t.shiftKey?-1:1,i),i.memory<0?n(0,i.memory=9,i):i.memory>9&&n(0,i.memory=0,i)},function(t){n(0,i.urdr+=t.shiftKey?-1:1,i),i.urdr<0?n(0,i.urdr=9,i):i.urdr>9&&n(0,i.urdr=0,i)},()=>n(2,u="filters"),t=>n(0,i.show=t.val,i)]}class Tc extends nt{constructor(t){super(),et(this,t,_c,zc,o,{spells:0})}}function Hc(t){let e,n,l,c,o=t[0].name+"";return{c(){e=$("button"),n=b(o),k(e,"class","btn btn-light w-100 text-left font-weight-bold flex-grow-1")},m(o,s){f(o,e,s),d(e,n),l||(c=v(e,"click",t[10]),l=!0)},p(t,e){1&e&&o!==(o=t[0].name+"")&&x(n,o)},d(t){t&&m(e),l=!1,c()}}}function Mc(t){let e,n,c;return{c(){e=$("input"),k(e,"class","form-control mb-1 mr-1")},m(l,o){f(l,e,o),y(e,t[0].name),t[9](e),n||(c=[v(e,"blur",t[7]),v(e,"input",t[8])],n=!0)},p(t,n){1&n&&e.value!==t[0].name&&y(e,t[0].name)},d(o){o&&m(e),t[9](null),n=!1,l(c)}}}function Ec(t){let e,n,l,c,o;return{c(){e=$("button"),n=b("+1D"),k(e,"class",l="border border-dark btn "+(t[0].used>=1?"btn-dark":"btn-light"))},m(l,s){f(l,e,s),d(e,n),c||(o=v(e,"click",t[11]),c=!0)},p(t,n){1&n&&l!==(l="border border-dark btn "+(t[0].used>=1?"btn-dark":"btn-light"))&&k(e,"class",l)},d(t){t&&m(e),c=!1,o()}}}function Wc(t){let e,n,l,c,o;return{c(){e=$("button"),n=b("+1D"),k(e,"class",l="border border-dark btn "+(t[0].used>=2?"btn-dark":"btn-light"))},m(l,s){f(l,e,s),d(e,n),c||(o=v(e,"click",t[12]),c=!0)},p(t,n){1&n&&l!==(l="border border-dark btn "+(t[0].used>=2?"btn-dark":"btn-light"))&&k(e,"class",l)},d(t){t&&m(e),c=!1,o()}}}function Lc(e){let n,c,o,s,r,i,a,u,p,h,y,w,C,S,z,D,_,T,H,M,E,W,L,A,q,I,N,U,O=e[0].level+"";function P(t,e){return t[2]?Mc:Hc}let F=P(e),V=F(e),j=e[0].level<3&&Ec(e),B=2==e[0].level&&Wc(e);return{c(){n=$("div"),c=$("div"),o=$("div"),s=$("div"),V.c(),r=g(),i=$("button"),a=b(O),u=g(),p=$("div"),h=$("div"),j&&j.c(),y=g(),B&&B.c(),w=g(),C=$("div"),S=$("button"),z=b("✓"),_=g(),T=$("button"),H=b("✓"),E=g(),W=$("button"),L=b("Used"),q=g(),I=$("button"),I.textContent="Delete",k(i,"tabindex","0"),k(i,"class","btn btn-dark"),k(s,"class","d-flex mb-1"),k(h,"class","btn-group"),k(S,"class",D="border border-dark btn "+(e[0].checks>=1?"btn-dark":"btn-light")),k(T,"class",M="border border-dark btn "+(e[0].checks>=2?"btn-dark":"btn-light")),k(W,"class",A="btn "+(e[0].usedAgainst?"btn-dark":"btn-light")+" border border-dark"),k(C,"class","btn-group ml-1"),k(I,"class","btn btn-light border border-dark ml-auto"),k(p,"class","d-flex"),k(o,"class","card-body"),k(c,"class","card"),k(n,"class","col-md-6")},m(t,l){f(t,n,l),d(n,c),d(c,o),d(o,s),V.m(s,null),d(s,r),d(s,i),d(i,a),d(o,u),d(o,p),d(p,h),j&&j.m(h,null),d(h,y),B&&B.m(h,null),d(p,w),d(p,C),d(C,S),d(S,z),d(C,_),d(C,T),d(T,H),d(C,E),d(C,W),d(W,L),d(p,q),d(p,I),N||(U=[v(i,"click",e[4]),v(S,"click",e[13]),v(T,"click",e[14]),v(W,"click",e[15]),v(I,"click",e[16])],N=!0)},p(t,[e]){F===(F=P(t))&&V?V.p(t,e):(V.d(1),V=F(t),V&&(V.c(),V.m(s,r))),1&e&&O!==(O=t[0].level+"")&&x(a,O),t[0].level<3?j?j.p(t,e):(j=Ec(t),j.c(),j.m(h,y)):j&&(j.d(1),j=null),2==t[0].level?B?B.p(t,e):(B=Wc(t),B.c(),B.m(h,null)):B&&(B.d(1),B=null),1&e&&D!==(D="border border-dark btn "+(t[0].checks>=1?"btn-dark":"btn-light"))&&k(S,"class",D),1&e&&M!==(M="border border-dark btn "+(t[0].checks>=2?"btn-dark":"btn-light"))&&k(T,"class",M),1&e&&A!==(A="btn "+(t[0].usedAgainst?"btn-dark":"btn-light")+" border border-dark")&&k(W,"class",A)},i:t,o:t,d(t){t&&m(n),V.d(),j&&j.d(),B&&B.d(),N=!1,l(U)}}}function Ac(t,e,n){let l,{actions:c}=e,{trait:o}=e,s=!1;function r(t){o.checks==t?n(0,o.checks--,o):n(0,o.checks=t,o)}function i(t){o.used==t?n(0,o.used--,o):n(0,o.used=t,o)}_((()=>{l&&l.focus()}));return t.$$set=t=>{"actions"in t&&n(1,c=t.actions),"trait"in t&&n(0,o=t.trait)},[o,c,s,l,function(t){n(0,o.level+=t.shiftKey?-1:1,o),o.level>3?n(0,o.level=1,o):o.level<1&&n(0,o.level=3,o)},r,i,()=>n(2,s=!1),function(){o.name=this.value,n(0,o)},function(t){M[t?"unshift":"push"]((()=>{l=t,n(3,l)}))},()=>n(2,s=!0),()=>i(1),()=>i(2),()=>r(1),()=>r(2),()=>n(0,o.usedAgainst=!o.usedAgainst,o),()=>c.delete(o)]}class qc extends nt{constructor(t){super(),et(this,t,Ac,Lc,o,{actions:1,trait:0})}}function Ic(t,e,n){const l=t.slice();return l[6]=e[n],l}function Nc(e){let n,l,c,o,s,r,i,a;return{c(){n=$("div"),l=$("h5"),l.textContent="Traits",c=g(),o=$("button"),o.textContent="✗",s=g(),r=$("div"),r.innerHTML="<p>Traits grant bonuses by level:</p> \n            <ul><li>Level 1 traits grant +1D to a relevent test once per session</li> \n                <li>Level 2 traits grant +1D to a relevent test twice per session</li> \n                <li>Level 3 traits grant +1s to all relevent tests</li></ul> \n            <p>Each trait can be used once per session to generate up to two checks.</p> \n            <ul><li>One check is generated when used to apply a -1D penalty to an independent or versus test</li> \n                <li>Two checks are generated when used to grant an opponent a +2D advantage in a versus test</li> \n                <li>Two checks are generated when used to break a tie in an opponent&#39;s favor in a versus test</li></ul>",k(l,"class","card-title"),k(o,"class","close position-topright"),k(o,"type","button"),k(n,"class","card-header"),k(r,"class","card-body")},m(t,u){f(t,n,u),d(n,l),d(n,c),d(n,o),f(t,s,u),f(t,r,u),i||(a=v(o,"click",e[5]),i=!0)},p:t,i:t,o:t,d(t){t&&m(n),t&&m(s),t&&m(r),i=!1,a()}}}function Uc(t){let e,n,l,c,o,s,r,i,a,u=[],p=new Map,b=t[0].length<4&&Oc(t),h=t[0];const x=t=>t[6].id;for(let e=0;e<h.length;e+=1){let n=Ic(t,h,e),l=x(n);p.set(l,u[e]=Pc(l,n))}return{c(){e=$("div"),n=$("div"),l=$("button"),l.textContent="?",c=g(),b&&b.c(),o=g(),s=$("div");for(let t=0;t<u.length;t+=1)u[t].c();k(l,"class","btn badge btn-light border border-dark"),k(n,"class","btn-group position-topright"),k(s,"class","row"),k(e,"class","card-body")},m(m,p){f(m,e,p),d(e,n),d(n,l),d(e,c),b&&b.m(e,null),d(e,o),d(e,s);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(s,null);r=!0,i||(a=v(l,"click",t[4]),i=!0)},p(t,n){t[0].length<4?b?b.p(t,n):(b=Oc(t),b.c(),b.m(e,o)):b&&(b.d(1),b=null),5&n&&(h=t[0],j(),u=G(u,n,x,1,t,h,p,s,J,Pc,null,Ic),B())},i(t){if(!r){for(let t=0;t<h.length;t+=1)K(u[t]);r=!0}},o(t){for(let t=0;t<u.length;t+=1)R(u[t]);r=!1},d(t){t&&m(e),b&&b.d();for(let t=0;t<u.length;t+=1)u[t].d();i=!1,a()}}}function Oc(e){let n,l,c,o,s;return{c(){n=$("div"),l=$("div"),c=$("button"),c.textContent="Add trait",k(c,"class","btn btn-light border mb-1"),k(l,"class","col-md-12"),k(n,"class","row")},m(t,r){f(t,n,r),d(n,l),d(l,c),o||(s=v(c,"click",e[3]),o=!0)},p:t,d(t){t&&m(n),o=!1,s()}}}function Pc(t,e){let n,l,c;return l=new qc({props:{trait:e[6],actions:e[2]}}),{key:t,first:null,c(){n=h(),Q(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),Y(l,t,e),c=!0},p(t,n){e=t;const c={};1&n&&(c.trait=e[6]),l.$set(c)},i(t){c||(K(l.$$.fragment,t),c=!0)},o(t){R(l.$$.fragment,t),c=!1},d(t){t&&m(n),X(l,t)}}}function Fc(t){let e,n,l,c,o;const s=[Uc,Nc],r=[];function i(t,e){return t[1]?1:0}return l=i(t),c=r[l]=s[l](t),{c(){e=$("div"),n=$("div"),c.c(),k(n,"class","card"),k(e,"class","container-fluid")},m(t,c){f(t,e,c),d(e,n),r[l].m(n,null),o=!0},p(t,[e]){let o=l;l=i(t),l===o?r[l].p(t,e):(j(),R(r[o],1,1,(()=>{r[o]=null})),B(),c=r[l],c?c.p(t,e):(c=r[l]=s[l](t),c.c()),K(c,1),c.m(n,null))},i(t){o||(K(c),o=!0)},o(t){R(c),o=!1},d(t){t&&m(e),r[l].d()}}}function Vc(t,e,n){let{traits:l}=e;const c={delete:t=>{if(!confirm(`Delete ${t.name}?`))return;let e=l.indexOf(t);l.splice(e,1),n(0,l)}};let o=!1;return t.$$set=t=>{"traits"in t&&n(0,l=t.traits)},t.$$.update=()=>{1&t.$$.dirty&&l.forEach((t=>{t.id||(t.id=crypto.randomUUID())}))},[l,o,c,function(){l.push({id:crypto.randomUUID(),name:"New trait",level:1,used:0,usedAgainst:!1,checks:0}),n(0,l)},()=>n(1,o=!0),()=>n(1,o=!1)]}class jc extends nt{constructor(t){super(),et(this,t,Vc,Fc,o,{traits:0})}}function Bc(t){let e,n,c,o,s,r,i,a,u,p,h,x,y,w,C,S,z,D,_,T,H,M,E,W,L,A;function q(t,e){return t[3]?Jc:Rc}let I=q(t),N=I(t);return{c(){e=$("div"),n=$("div"),c=$("div"),o=$("div"),N.c(),s=g(),r=$("div"),i=$("div"),a=$("button"),u=b("Pass"),h=g(),x=$("button"),y=b("Fail"),C=g(),S=$("button"),z=b("Fate"),_=g(),T=$("button"),H=b("Persona"),E=g(),W=$("button"),W.textContent="Forget",k(o,"class","d-flex mb-1"),k(a,"class",p="btn "+(t[0].pass?"btn-dark":"btn-light")+" border border-dark"),k(x,"class",w="btn "+(t[0].fail?"btn-dark":"btn-light")+" border border-dark"),k(S,"class",D="btn "+(t[0].fate?"btn-dark":"btn-light")+" border border-dark"),k(T,"class",M="btn "+(t[0].persona?"btn-dark":"btn-light")+" border border-dark"),k(i,"class","btn-group"),k(W,"class","btn btn-light border ml-auto"),k(r,"class","d-flex"),k(c,"class","card-body"),k(n,"class","card"),k(e,"class","col-md-6")},m(l,m){f(l,e,m),d(e,n),d(n,c),d(c,o),N.m(o,null),d(c,s),d(c,r),d(r,i),d(i,a),d(a,u),d(i,h),d(i,x),d(x,y),d(i,C),d(i,S),d(S,z),d(i,_),d(i,T),d(T,H),d(r,E),d(r,W),L||(A=[v(a,"click",t[13]),v(x,"click",t[14]),v(S,"click",t[15]),v(T,"click",t[16]),v(W,"click",t[17])],L=!0)},p(t,e){I===(I=q(t))&&N?N.p(t,e):(N.d(1),N=I(t),N&&(N.c(),N.m(o,null))),1&e&&p!==(p="btn "+(t[0].pass?"btn-dark":"btn-light")+" border border-dark")&&k(a,"class",p),1&e&&w!==(w="btn "+(t[0].fail?"btn-dark":"btn-light")+" border border-dark")&&k(x,"class",w),1&e&&D!==(D="btn "+(t[0].fate?"btn-dark":"btn-light")+" border border-dark")&&k(S,"class",D),1&e&&M!==(M="btn "+(t[0].persona?"btn-dark":"btn-light")+" border border-dark")&&k(T,"class",M)},d(t){t&&m(e),N.d(),L=!1,l(A)}}}function Kc(t){let e,n,l,c,o;function s(t,e){return t[3]?Zc:Gc}let r=s(t),i=r(t);return{c(){e=$("div"),i.c(),n=g(),l=$("button"),l.textContent="Delete",k(l,"class","btn btn-light border ml-auto mb-1"),k(e,"class","d-flex")},m(s,r){f(s,e,r),i.m(e,null),d(e,n),d(e,l),c||(o=v(l,"click",t[8]),c=!0)},p(t,l){r===(r=s(t))&&i?i.p(t,l):(i.d(1),i=r(t),i&&(i.c(),i.m(e,n)))},d(t){t&&m(e),i.d(),c=!1,o()}}}function Rc(t){let e,n,l,c,o=t[0].name+"";return{c(){e=$("button"),n=b(o),k(e,"class","btn btn-light w-100 text-left font-weight-bold"),w(e,"min-height","2.2em")},m(o,s){f(o,e,s),d(e,n),l||(c=v(e,"click",t[12]),l=!0)},p(t,e){1&e&&o!==(o=t[0].name+"")&&x(n,o)},d(t){t&&m(e),l=!1,c()}}}function Jc(t){let e,n,c;return{c(){e=$("input"),k(e,"class","form-control mb-1")},m(l,o){f(l,e,o),y(e,t[0].name),t[11](e),n||(c=[v(e,"blur",t[9]),v(e,"input",t[10])],n=!0)},p(t,n){1&n&&e.value!==t[0].name&&y(e,t[0].name)},d(o){o&&m(e),t[11](null),n=!1,l(c)}}}function Gc(t){let e,n,l,c,o=t[0].name+"";return{c(){e=$("button"),n=b(o),k(e,"class","btn btn-light border mb-1 mr-1 w-100 text-left")},m(o,s){f(o,e,s),d(e,n),l||(c=v(e,"click",t[7]),l=!0)},p(t,e){1&e&&o!==(o=t[0].name+"")&&x(n,o)},d(t){t&&m(e),l=!1,c()}}}function Zc(t){let e,n,c;return{c(){e=$("input"),k(e,"class","form-control mb-1 mr-1")},m(l,o){f(l,e,o),y(e,t[0].name),t[6](e),n||(c=[v(e,"blur",t[4]),v(e,"input",t[5])],n=!0)},p(t,n){1&n&&e.value!==t[0].name&&y(e,t[0].name)},d(o){o&&m(e),t[6](null),n=!1,l(c)}}}function Qc(e){let n;function l(t,e){return t[0].old?Kc:Bc}let c=l(e),o=c(e);return{c(){o.c(),n=h()},m(t,e){o.m(t,e),f(t,n,e)},p(t,[e]){c===(c=l(t))&&o?o.p(t,e):(o.d(1),o=c(t),o&&(o.c(),o.m(n.parentNode,n)))},i:t,o:t,d(t){o.d(t),t&&m(n)}}}function Yc(t,e,n){let l,{actions:c}=e,{wise:o}=e,s=!1;_((()=>{l&&l.focus()}));return t.$$set=t=>{"actions"in t&&n(1,c=t.actions),"wise"in t&&n(0,o=t.wise)},[o,c,l,s,()=>n(3,s=!1),function(){o.name=this.value,n(0,o)},function(t){M[t?"unshift":"push"]((()=>{l=t,n(2,l)}))},()=>n(3,s=!0),()=>c.delete(o),()=>n(3,s=!1),function(){o.name=this.value,n(0,o)},function(t){M[t?"unshift":"push"]((()=>{l=t,n(2,l)}))},()=>n(3,s=!0),()=>n(0,o.pass=!o.pass,o),()=>n(0,o.fail=!o.fail,o),()=>n(0,o.fate=!o.fate,o),()=>n(0,o.persona=!o.persona,o),()=>{n(0,o.old=!0,o),c.refresh()}]}class Xc extends nt{constructor(t){super(),et(this,t,Yc,Qc,o,{actions:1,wise:0})}}function to(t,e,n){const l=t.slice();return l[9]=e[n],l}function eo(t,e,n){const l=t.slice();return l[9]=e[n],l}function no(e){let n,l,c,o,s,r,i,a;return{c(){n=$("div"),l=$("h5"),l.textContent="Wises",c=g(),o=$("button"),o.textContent="✗",s=g(),r=$("div"),r.innerHTML="<p>Wises can be used to help others in place of a relevent skill. Doing so isolates the helping character from receiving conditions from the test.</p> \n            <p>Wises can be used to salvage a failed roll:</p> \n            <ul><li><strong>Deeper understanding</strong> Spend a point of fate to reroll a single failed die</li> \n                <li><strong>Of course!</strong> Spend a point of persona to reroll all failed dice</li></ul> \n            <p>Once a wise has been used to help another in a failed and successful test, as well as <strong>deeper understanding</strong> \n                and <strong>of course!</strong>, the wise may be replaced with another, or a test for advancement may be marked for a skill related\n                to the wise.</p>",k(l,"class","card-title"),k(o,"class","close position-topright"),k(o,"type","button"),k(n,"class","card-header"),k(r,"class","card-body")},m(t,u){f(t,n,u),d(n,l),d(n,c),d(n,o),f(t,s,u),f(t,r,u),i||(a=v(o,"click",e[7]),i=!0)},p:t,i:t,o:t,d(t){t&&m(n),t&&m(s),t&&m(r),i=!1,a()}}}function lo(t){let e,n,l,c,o,s,r,i,a,u=[],p=new Map,b=t[2].length<4&&co(t),h=t[2];const x=t=>t[9].id;for(let e=0;e<h.length;e+=1){let n=eo(t,h,e),l=x(n);p.set(l,u[e]=oo(l,n))}return{c(){e=$("div"),n=$("div"),l=$("button"),l.textContent="?",c=g(),b&&b.c(),o=g(),s=$("div");for(let t=0;t<u.length;t+=1)u[t].c();k(l,"class","btn badge btn-light border border-dark"),k(n,"class","btn-group position-topright"),k(s,"class","row"),k(e,"class","card-body")},m(m,p){f(m,e,p),d(e,n),d(n,l),d(e,c),b&&b.m(e,null),d(e,o),d(e,s);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(s,null);r=!0,i||(a=v(l,"click",t[6]),i=!0)},p(t,n){t[2].length<4?b?b.p(t,n):(b=co(t),b.c(),b.m(e,o)):b&&(b.d(1),b=null),12&n&&(h=t[2],j(),u=G(u,n,x,1,t,h,p,s,J,oo,null,eo),B())},i(t){if(!r){for(let t=0;t<h.length;t+=1)K(u[t]);r=!0}},o(t){for(let t=0;t<u.length;t+=1)R(u[t]);r=!1},d(t){t&&m(e),b&&b.d();for(let t=0;t<u.length;t+=1)u[t].d();i=!1,a()}}}function co(e){let n,l,c,o,s;return{c(){n=$("div"),l=$("div"),c=$("button"),c.textContent="Add wise",k(c,"class","btn btn-light border mb-1"),k(l,"class","col-md-12"),k(n,"class","row")},m(t,r){f(t,n,r),d(n,l),d(l,c),o||(s=v(c,"click",e[4]),o=!0)},p:t,d(t){t&&m(n),o=!1,s()}}}function oo(t,e){let n,l,c;return l=new Xc({props:{wise:e[9],actions:e[3]}}),{key:t,first:null,c(){n=h(),Q(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),Y(l,t,e),c=!0},p(t,n){e=t;const c={};4&n&&(c.wise=e[9]),l.$set(c)},i(t){c||(K(l.$$.fragment,t),c=!0)},o(t){R(l.$$.fragment,t),c=!1},d(t){t&&m(n),X(l,t)}}}function so(t){let e,n,l,c,o,s,r=[],i=new Map,a=t[1];const u=t=>t[9].id;for(let e=0;e<a.length;e+=1){let n=to(t,a,e),l=u(n);i.set(l,r[e]=ro(l,n))}return{c(){e=$("div"),n=$("div"),l=$("h4"),l.textContent="Previous Wises",c=g(),o=$("div");for(let t=0;t<r.length;t+=1)r[t].c();k(o,"class","d-flex flex-column"),k(n,"class","card-body"),k(e,"class","card")},m(t,i){f(t,e,i),d(e,n),d(n,l),d(n,c),d(n,o);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(o,null);s=!0},p(t,e){10&e&&(a=t[1],j(),r=G(r,e,u,1,t,a,i,o,J,ro,null,to),B())},i(t){if(!s){for(let t=0;t<a.length;t+=1)K(r[t]);s=!0}},o(t){for(let t=0;t<r.length;t+=1)R(r[t]);s=!1},d(t){t&&m(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function ro(t,e){let n,l,c;return l=new Xc({props:{wise:e[9],actions:e[3]}}),{key:t,first:null,c(){n=h(),Q(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),Y(l,t,e),c=!0},p(t,n){e=t;const c={};2&n&&(c.wise=e[9]),l.$set(c)},i(t){c||(K(l.$$.fragment,t),c=!0)},o(t){R(l.$$.fragment,t),c=!1},d(t){t&&m(n),X(l,t)}}}function io(t){let e,n,l,c,o,s;const r=[lo,no],i=[];function a(t,e){return t[0]?1:0}l=a(t),c=i[l]=r[l](t);let u=t[1].length>0&&so(t);return{c(){e=$("div"),n=$("div"),c.c(),o=g(),u&&u.c(),k(n,"class","card"),k(e,"class","container-fluid")},m(t,c){f(t,e,c),d(e,n),i[l].m(n,null),d(e,o),u&&u.m(e,null),s=!0},p(t,[o]){let s=l;l=a(t),l===s?i[l].p(t,o):(j(),R(i[s],1,1,(()=>{i[s]=null})),B(),c=i[l],c?c.p(t,o):(c=i[l]=r[l](t),c.c()),K(c,1),c.m(n,null)),t[1].length>0?u?(u.p(t,o),2&o&&K(u,1)):(u=so(t),u.c(),K(u,1),u.m(e,null)):u&&(j(),R(u,1,1,(()=>{u=null})),B())},i(t){s||(K(c),K(u),s=!0)},o(t){R(c),R(u),s=!1},d(t){t&&m(e),i[l].d(),u&&u.d()}}}function ao(t,e,n){let l,c,{wises:o}=e;const s={delete:t=>{if(!confirm(`Delete ${t.name}?`))return;let e=o.indexOf(t);o.splice(e,1),i()},refresh:i};let r=!1;function i(){n(5,o)}return t.$$set=t=>{"wises"in t&&n(5,o=t.wises)},t.$$.update=()=>{32&t.$$.dirty&&n(2,l=o.filter((t=>!t.old))),32&t.$$.dirty&&n(1,c=o.filter((t=>t.old))),32&t.$$.dirty&&o.forEach((t=>{t.id||(t.id=crypto.randomUUID())}))},[r,c,l,s,function(){o.push({id:crypto.randomUUID(),name:"New wise",pass:!1,fail:!1,fate:!1,persona:!1}),i()},o,()=>n(0,r=!0),()=>n(0,r=!1)]}class uo extends nt{constructor(t){super(),et(this,t,ao,io,o,{wises:5})}}function fo(t){let e;return{c(){e=$("link"),k(e,"rel","stylesheet"),k(e,"href","https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"),k(e,"integrity","sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn"),k(e,"crossorigin","anonymous")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function mo(t){let e;return{c(){e=$("link"),k(e,"rel","stylesheet"),k(e,"href","https://cdn.jsdelivr.net/gh/vinorodrigues/bootstrap-dark@0.6.1/dist/bootstrap-dark.min.css")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function po(t){let e,n;return e=new uo({props:{wises:t[0].wises}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.wises=t[0].wises),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function $o(t){let e,n;return e=new jc({props:{traits:t[0].traits}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.traits=t[0].traits),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function bo(t){let e,n;return e=new Tc({props:{spells:t[0].spells}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.spells=t[0].spells),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function go(t){let e,n;return e=new uc({props:{skills:t[0].skills,bluckTries:t[0].abilities.nature.maximum}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.skills=t[0].skills),1&n&&(l.bluckTries=t[0].abilities.nature.maximum),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ho(t){let e,n;return e=new Pl({props:{notes:t[0].notes}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.notes=t[0].notes),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function vo(t){let e,n;return e=new Qn({props:{inventory:t[0].inventory}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.inventory=t[0].inventory),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ko(t){let e,n;return e=new Ye({props:{circles:t[0].circles}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.circles=t[0].circles),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function xo(t){let e,n;return e=new De({props:{model:t[0]}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.model=t[0]),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function yo(t){let e,n;return e=new Jt({props:{model:t[0]}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.model=t[0]),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function wo(t){let e,n;return e=new Ut({props:{model:t[0]}}),{c(){Q(e.$$.fragment)},m(t,l){Y(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.model=t[0]),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Co(t){let e,n,l,c,o,s,r,i,a,u,p,b;let v=("dark"==dl?mo:fo)(t);function x(e){t[2](e)}function y(e){t[3](e)}let w={};void 0!==t[0]&&(w.model=t[0]),void 0!==t[1]&&(w.tab=t[1]),c=new _l({props:w}),M.push((()=>Z(c,"model",x))),M.push((()=>Z(c,"tab",y))),i=new vn({props:{model:t[0]}});const C=[wo,yo,xo,ko,vo,ho,go,bo,$o,po],S=[];function z(t,e){return"abilities"==t[1]?0:"advancement"==t[1]?1:"bio"==t[1]?2:"circles"==t[1]?3:"inventory"==t[1]?4:"notes"==t[1]?5:"skills"==t[1]?6:"spells"==t[1]?7:"traits"==t[1]?8:"wises"==t[1]?9:-1}return~(u=z(t))&&(p=S[u]=C[u](t)),{c(){v.c(),e=h(),n=g(),l=$("main"),Q(c.$$.fragment),r=g(),Q(i.$$.fragment),a=g(),p&&p.c(),k(l,"id","app")},m(t,o){v.m(document.head,null),d(document.head,e),f(t,n,o),f(t,l,o),Y(c,l,null),d(l,r),Y(i,l,null),d(l,a),~u&&S[u].m(l,null),b=!0},p(t,[e]){const n={};!o&&1&e&&(o=!0,n.model=t[0],I((()=>o=!1))),!s&&2&e&&(s=!0,n.tab=t[1],I((()=>s=!1))),c.$set(n);const r={};1&e&&(r.model=t[0]),i.$set(r);let a=u;u=z(t),u===a?~u&&S[u].p(t,e):(p&&(j(),R(S[a],1,1,(()=>{S[a]=null})),B()),~u?(p=S[u],p?p.p(t,e):(p=S[u]=C[u](t),p.c()),K(p,1),p.m(l,null)):p=null)},i(t){b||(K(c.$$.fragment,t),K(i.$$.fragment,t),K(p),b=!0)},o(t){R(c.$$.fragment,t),R(i.$$.fragment,t),R(p),b=!1},d(t){v.d(t),m(e),t&&m(n),t&&m(l),X(c),X(i),~u&&S[u].d()}}}function So(t,e,n){let l=rt(),c="bio";return[l,c,function(t){l=t,n(0,l)},function(t){c=t,n(1,c)}]}return new class extends nt{constructor(t){super(),et(this,t,So,Co,o,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
